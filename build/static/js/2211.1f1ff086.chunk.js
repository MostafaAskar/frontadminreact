"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2211],{82211:(l,e,n)=>{n.r(e),n.d(e,{default:()=>k});var i=n(47313),t=n(2717),a=n(90954),s=n(97890),d=n(24511),o=n(23560),r=n(77181),c=n(83371),u=n(68197),m=n(59624),v=n(93709),h=n(45705),x=n(59491),p=n(72652),j=n(97421),Z=n(71810),b=n(14349),y=n(10976),g=n(9274),I=n(66672),f=n(46417);function q(l){let{data:e,handleCancel:n,handleOk:t,visible:a}=l;const{t:s}=(0,d.$)(),[o]=y.Z.useForm(),[r,c]=(0,i.useState)(!1);return(0,f.jsx)(g.Z,{title:s(e.title),visible:a,onCancel:n,footer:[(0,f.jsx)(x.Z,{type:"primary",onClick:()=>o.submit(),loading:r,children:s("save")}),(0,f.jsx)(x.Z,{type:"default",onClick:n,children:s("cancel")})],children:(0,f.jsx)(y.Z,{layout:"vertical",onFinish:l=>{c(!0);const e={...l,status:"canceled"};t(e)},form:o,children:(0,f.jsx)(y.Z.Item,{children:(0,f.jsx)(u.Z,{className:"mt-4",children:(0,f.jsx)(m.Z,{span:24,children:(0,f.jsx)(y.Z.Item,{name:"status_note",label:s("note"),rules:[{validator:(l,e)=>e?e&&""===(null===e||void 0===e?void 0:e.trim())?Promise.reject(new Error(s("no.empty.space"))):e&&(null===e||void 0===e?void 0:e.trim().length)<2?Promise.reject(new Error(s("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(s("required")))}],children:(0,f.jsx)(I.Z.TextArea,{maxLength:250,showCount:!0})})})})})})})}const $={type:"product"},k=()=>{var l,e,n,y,g,I,k,w,C,N,S,_,E,P;const z=(0,t.I0)(),A=(0,s.s0)(),{t:F}=(0,d.$)(),{id:L}=(0,s.UO)(),{activeMenu:O}=(0,t.v9)((l=>l.menu)),{defaultLang:U}=(0,t.v9)((l=>l.formLang),t.wU),[B,M]=(0,i.useState)(!1),[T,V]=(0,i.useState)(!1),[D,G]=(0,i.useState)({}),[H,J]=(0,i.useState)({}),[K,Q]=(0,i.useState)(""),[R,W]=(0,i.useState)(!1);function X(l){V(!0);const e="catalog/products";b.Z.changeStatus(L,l).then((()=>{A(`/${e}`,{state:{tab:"request"}}),z((0,a.ph)({...O,nextUrl:e})),o.Am.success(F("successfully.changed")),z((0,Z.aw)($))})).finally((()=>{W(!1),V(!1)}))}(0,i.useEffect)((()=>{var l;l=L,M(!0),b.Z.getById(l).then((l=>{var e;G(l.data.data),J(l.data.model),Q(null===(e=l.data)||void 0===e?void 0:e.status_note)})).finally((()=>{M(!1),z((0,a.A_)(O))}))}),[L]);const Y=D,ll=H;return B?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(p.Z,{size:"large",className:"py-5"})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(r.Z,{children:[(0,f.jsxs)(c.Z,{bordered:!0,title:F("changed.info"),children:[(0,f.jsx)(c.Z.Item,{label:`${F("title")} (${U})`,span:3,children:Y[`title[${U}]`]}),(0,f.jsx)(c.Z.Item,{label:`${F("description")} (${U})`,span:3,children:Y[`description[${U}]`]}),(0,f.jsx)(c.Z.Item,{label:F("shop"),span:1.5,children:null===Y||void 0===Y||null===(l=Y.shop)||void 0===l?void 0:l.translation.title}),(0,f.jsx)(c.Z.Item,{label:F("category"),span:1.5,children:null===Y||void 0===Y||null===(e=Y.category)||void 0===e?void 0:e.label}),(0,f.jsx)(c.Z.Item,{label:F("brand"),span:1.5,children:null===Y||void 0===Y||null===(n=Y.brand)||void 0===n?void 0:n.label}),(0,f.jsx)(c.Z.Item,{label:F("unit"),span:1.5,children:null===Y||void 0===Y||null===(y=Y.unit)||void 0===y?void 0:y.label}),(0,f.jsx)(c.Z.Item,{label:F("images"),span:3,children:(0,f.jsx)(u.Z,{gutter:12,children:null===Y||void 0===Y||null===(g=Y.images)||void 0===g?void 0:g.map(((l,e)=>(0,f.jsx)(m.Z,{children:(0,f.jsx)("img",{width:80,alt:"product",src:l.url})},"image"+e)))})}),(0,f.jsx)(c.Z.Item,{label:F("tax"),children:null===Y||void 0===Y?void 0:Y.tax}),(0,f.jsx)(c.Z.Item,{label:F("min.quantity"),children:null===Y||void 0===Y?void 0:Y.min_qty}),(0,f.jsx)(c.Z.Item,{label:F("max.quantity"),children:null===Y||void 0===Y?void 0:Y.max_qty})]}),null===Y||void 0===Y||null===(I=Y.stocks)||void 0===I?void 0:I.map(((l,e)=>{var n;return l?(0,f.jsxs)(c.Z,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(c.Z.Item,{label:F("price"),span:2,children:l.price}),(0,f.jsx)(c.Z.Item,{label:F("quantity"),span:2,children:l.quantity}),null===l||void 0===l||null===(n=l.ids)||void 0===n?void 0:n.map(((l,e)=>(0,f.jsx)(c.Z.Item,{label:null===Y||void 0===Y?void 0:Y.extras[e].label,children:null===l||void 0===l?void 0:l.label},"extra"+e)))]},"desc"+e):""})),(0,f.jsxs)(c.Z,{bordered:!0,className:"mt-4",title:F("original.info"),children:[(0,f.jsx)(c.Z.Item,{label:`${F("title")} (${U})`,span:3,column:3,children:null===ll||void 0===ll||null===(k=ll.translation)||void 0===k?void 0:k.title}),(0,f.jsx)(c.Z.Item,{label:`${F("description")} (${U})`,span:3,column:3,children:null===ll||void 0===ll||null===(w=ll.translation)||void 0===w?void 0:w.description}),(0,f.jsx)(c.Z.Item,{label:F("shop"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(C=ll.shop)||void 0===C?void 0:C.translation.title}),(0,f.jsx)(c.Z.Item,{label:F("category"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(N=ll.category)||void 0===N?void 0:N.translation.title}),(0,f.jsx)(c.Z.Item,{label:F("brand"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(S=ll.brand)||void 0===S?void 0:S.title}),(0,f.jsx)(c.Z.Item,{label:F("unit"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(_=ll.unit)||void 0===_?void 0:_.translation.title}),(0,f.jsx)(c.Z.Item,{label:F("images"),span:3,column:3,children:(0,f.jsx)(u.Z,{gutter:12,children:null===ll||void 0===ll||null===(E=ll.galleries)||void 0===E?void 0:E.map(((l,e)=>(0,f.jsx)(m.Z,{children:(0,f.jsx)("img",{width:80,alt:"product",src:j.bV+l.path})},"image"+e)))})}),(0,f.jsx)(c.Z.Item,{span:3,column:3,label:F("tax"),children:null===ll||void 0===ll?void 0:ll.tax}),(0,f.jsx)(c.Z.Item,{span:3,column:3,label:F("min.quantity"),children:null===ll||void 0===ll?void 0:ll.min_qty}),(0,f.jsx)(c.Z.Item,{span:3,column:3,label:F("max.quantity"),children:null===ll||void 0===ll?void 0:ll.max_qty})]}),null===ll||void 0===ll||null===(P=ll.stocks)||void 0===P?void 0:P.map(((l,e)=>{var n;return l?(0,f.jsxs)(c.Z,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(c.Z.Item,{label:F("price"),span:2,column:2,children:null===l||void 0===l?void 0:l.price}),(0,f.jsx)(c.Z.Item,{label:F("quantity"),span:2,column:2,children:null===l||void 0===l?void 0:l.quantity}),null===l||void 0===l||null===(n=l.extras)||void 0===n?void 0:n.map(((l,e)=>{var n,i;return(0,f.jsx)(c.Z.Item,{label:null===l||void 0===l||null===(n=l.group)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title,span:2,column:2,children:null===l||void 0===l?void 0:l.value},"extra"+e)}))]},"desc"+e):""})),K&&(0,f.jsx)(v.Z,{className:"mt-4",message:F("status.note"),description:K,type:"error"}),(0,f.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,f.jsxs)(h.Z,{children:[(0,f.jsx)(x.Z,{type:"primary",onClick:()=>{X({status:"approved"})},children:F("accept")}),(0,f.jsx)(x.Z,{type:"primary",danger:!0,onClick:()=>{W(!0)},children:F("decline")})]})})]}),(0,f.jsx)(q,{data:{title:"decline"},visible:R,handleCancel:()=>W(!1),handleOk:X,laoding:T})]})}}}]);