(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5435],{55940:(e,l,t)=>{"use strict";t.d(l,{Z:()=>r});t(47313);var i=t(59491),n=t(47515),d=t(23560),s=t(24511),o=t(79492),a=t(46417);function r(e){let{size:l="",onClick:t,type:r="default",...u}=e;const{t:v}=(0,s.$)(),{isDemo:c}=(0,o.Z)();return(0,a.jsx)(i.Z,{size:l,icon:(0,a.jsx)(n.Z,{}),onClick:e=>{c?d.Am.warning(v("cannot.work.demo")):t(e)},type:r,...u})}},53233:(e,l,t)=>{"use strict";t.d(l,{Z:()=>x});var i=t(47313),n=t(56140),d=t(67251),s=t(45705),o=t(86345),a=t(78267),r=t(37388),u=t(59491),v=t(99587),c=t(24511),h=t(46417);const{Text:m}=n.Z,x=e=>{let{columns:l=[],setColumns:t,style:n,size:x="",iconOnly:p}=e;const{t:y}=(0,c.$)(),[f,j]=(0,i.useState)(!1),g=(0,h.jsx)(d.Z,{children:null===l||void 0===l?void 0:l.map(((e,i)=>(0,h.jsx)(d.Z.Item,{children:(0,h.jsxs)(s.Z,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(o.Z,{defaultChecked:!0,onClick:()=>function(e){const i=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(i)}(e),disabled:1===i})]})},e+i)))});return(0,h.jsx)(a.Z,{overlay:g,trigger:["click"],onVisibleChange:e=>{j(e)},visible:f,children:(0,h.jsx)(r.Z,{title:y("change.columns"),children:(0,h.jsx)(u.Z,{style:{...n},size:x,icon:(0,h.jsx)(v.Z,{}),children:p?null:y("Columns")})})})}},73431:(e,l,t)=>{"use strict";t.d(l,{Z:()=>r});var i=t(47313),n=t(39180),d=t(2717),s=t(28830),o=t(60535),a=t(46417);const r=()=>{const e=(0,d.I0)(),{languages:l,defaultLang:t}=(0,d.v9)((e=>e.formLang),d.wU);(0,i.useEffect)((()=>{o.Z.getAllActive().then((l=>{let{data:t}=l;e((0,s.dc)(t)),e((0,s.mh)(t.find((e=>1===e.default)).locale))}))}),[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.ZP.Group,{value:t,onChange:l=>{let{target:{value:t}}=l;e((0,s.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===l||void 0===l?void 0:l.map((e=>(0,a.jsx)(n.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},41481:(e,l,t)=>{"use strict";t.d(l,{Z:()=>a});var i=t(47313),n=t(66672),d=t(16031),s=t(40765),o=t(46417);function a(e){let{handleChange:l,defaultValue:t,resetSearch:a,...r}=e;const[u,v]=(0,i.useState)(t),c=(0,i.useMemo)((()=>(0,d.debounce)((e=>{l(e)}),800)),[]);return(0,i.useEffect)((()=>{v(t)}),[a]),(0,o.jsx)(n.Z,{value:u,onChange:e=>{v(e.target.value),c(e.target.value)},prefix:(0,o.jsx)(s.Z,{}),...r})}},89281:(e,l,t)=>{"use strict";t.d(l,{h:()=>r});var i=t(47313),n=t(12279),d=t.n(n),s=t(74294),o=t(72652),a=t(46417);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:n,refetchOptions:r=!1,...u}=e;const[v,c]=(0,i.useState)(!1),[h,m]=(0,i.useState)([]),x=(0,i.useMemo)((()=>d()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),t)),[l,t]);return(0,a.jsx)(s.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:x,onClear:()=>{x(""),n&&n()},notFoundContent:v?(0,a.jsx)(o.Z,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!r||x("")}})}},13945:(e,l,t)=>{"use strict";function i(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{Z:()=>i})},84017:(e,l,t)=>{"use strict";function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const i=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?`${i} ${l}`:`${l} ${i}`}t.d(l,{Z:()=>i})},33834:(e,l,t)=>{"use strict";t.d(l,{K:()=>s});var i=t(97890),n=t(74776),d=t.n(n);const s=()=>{const e=(0,i.s0)(),l=(0,i.TH)(),t=d().parse(l.search,{ignoreQueryPrefix:!0});return{values:t,set:(l,i)=>e({search:d().stringify({...t,[l]:i})}),reset:l=>{const i={...t};i[l]&&delete i[l],e({search:d().stringify({...i})})},clear:()=>e({search:d().stringify({})}),merge:l=>e({search:d().stringify({...t,...l})})}}},55508:(e,l,t)=>{"use strict";t.d(l,{Z:()=>r});var i=t(39180),n=(t(47313),t(58821)),d=t(54972),s=t(97890),o=t(46417);const a=[{value:"seller/orders-board",title:"Board",icon:(0,o.jsx)(d.Ez2,{size:20})},{value:"seller/orders",title:"List",icon:(0,o.jsx)(n.Ps6,{size:20})}],r=e=>{let{listType:l}=e;const{type:t}=(0,s.UO)(),n=(0,s.s0)();return(0,o.jsx)(i.ZP.Group,{value:l,onChange:e=>{n(`/${e.target.value}${t?`/${t}`:""}`)},className:"float-right",buttonStyle:"solid",children:null===a||void 0===a?void 0:a.map((e=>(0,o.jsx)(i.ZP.Button,{value:e.value,children:(0,o.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},50110:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>V});var i=t(47313),n=t(99096),d=t(73591),s=t(66204),o=t(45705),a=t(59491),r=t(77181),u=t(74294),v=t(78508),c=t(97890),h=t(12019),m=t(31741),x=t(47515),p=t(55768),y=t(15386),f=t(2717),j=t(90954),g=t(24511),Z=t(80314),C=t(41589),b=t(13945),_=t(41481),w=t(73270),k=t(84017),S=t(89281),I=t(58328),$=t(53233),M=t(40197),Y=t(55940),P=t(74580),D=t(23560),z=t(69658),O=t(62412),U=t(88852),A=t(27107),F=t(55508),L=t(33834),B=t(70816),E=t.n(B),N=t(46417);const{RangePicker:T}=n.Z,{TabPane:H}=d.Z;function V(){var e,l,t,n,B,V,K,q,G,R,J;const Q=(0,f.I0)(),W=(0,c.s0)(),{t:X}=(0,g.$)(),ee=(0,c.UO)(),[le,te]=(0,i.useState)(null),[ie,ne]=(0,i.useState)(null),{setIsModalVisible:de}=(0,i.useContext)(P._),[se,oe]=(0,i.useState)(!1),{defaultCurrency:ae}=(0,f.v9)((e=>e.currency),f.wU),{statusList:re}=(0,f.v9)((e=>e.orderStatus),f.wU),ue=null===ee||void 0===ee?void 0:ee.type,ve=[{name:"all",id:0,active:!0,sort:0},...re],[ce,he]=(0,i.useState)(null),[me,xe]=(0,i.useState)(null),[pe,ye]=(0,i.useState)([{title:X("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:X("client"),dataIndex:"user",key:"user",is_show:!0,render:e=>e?(0,N.jsxs)("div",{children:[(null===e||void 0===e?void 0:e.firstname)||""," ",(null===e||void 0===e?void 0:e.lastname)||""]}):(0,N.jsx)(s.Z,{color:"red",children:X("deleted.user")})},{title:X("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,N.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,N.jsx)(s.Z,{color:"blue",children:X(e)}):"canceled"===e?(0,N.jsx)(s.Z,{color:"error",children:X(e)}):(0,N.jsx)(s.Z,{color:"cyan",children:X(e)}),"delivered"!==e&&"canceled"!==e&&1!==l.type?(0,N.jsx)(h.Z,{onClick:e=>{e.stopPropagation(),xe(null===l||void 0===l?void 0:l.id)}}):""]})},{title:X("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:e=>(0,N.jsxs)("div",{children:[(null===e||void 0===e?void 0:e.firstname)||"-"," ",(null===e||void 0===e?void 0:e.lastname)||"-"]})},{title:X("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",is_show:!0,render:e=>(0,N.jsxs)("div",{className:"text-lowercase",children:[e||0," ",X("products")]})},{title:X("amount"),dataIndex:"total_price",key:"total_price",is_show:!0,render:e=>(0,k.Z)(e,null===ae||void 0===ae?void 0:ae.symbol)},{title:X("payment.type"),dataIndex:"transaction",key:"transaction",is_show:!0,render:e=>{var l;return X(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:X("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>E()(e).format("YYYY-MM-DD HH:mm")},{title:X("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date",render:e=>E()(e).format("YYYY-MM-DD HH:mm")},{title:X("options"),key:"options",is_show:!0,render:(e,l)=>(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(a.Z,{icon:(0,N.jsx)(m.Z,{}),onClick:()=>(e=>{Q((0,j.bL)({url:`seller/order/details/${e.id}`,id:"order_details",name:X("order.details")})),W(`/seller/order/details/${e.id}`)})(l)}),(0,N.jsx)(a.Z,{icon:(0,N.jsx)(h.Z,{}),onClick:()=>Pe(l),disabled:2!==(null===l||void 0===l?void 0:l.type)||"canceled"===(null===l||void 0===l?void 0:l.status)||"delivered"===(null===l||void 0===l?void 0:l.status)}),(0,N.jsx)(Y.Z,{icon:(0,N.jsx)(x.Z,{}),onClick:()=>{te([l.id]),de(!0),ne(!0)}})]})}]),{activeMenu:fe}=(0,f.v9)((e=>e.menu),f.wU),je=(0,L.K)(),[ge,Ze]=(0,i.useState)(je.values.status||"all"),Ce=(null===(e=fe.data)||void 0===e?void 0:e.role)||ge,{orders:be,meta:_e,loading:we,params:ke}=(0,f.v9)((e=>e.sellerOrders),f.wU),[Se,Ie]=(0,i.useState)(null),$e=null===fe||void 0===fe?void 0:fe.data,Me={search:null===$e||void 0===$e?void 0:$e.search,sort:null===$e||void 0===$e?void 0:$e.sort,column:null===$e||void 0===$e?void 0:$e.column,perPage:null===$e||void 0===$e?void 0:$e.perPage,page:null===$e||void 0===$e?void 0:$e.page,user_id:null===$e||void 0===$e?void 0:$e.user_id,status:"all"===Ce?void 0:Ce,shop_id:null!==(null===(l=fe.data)||void 0===l?void 0:l.shop_id)?null===(t=fe.data)||void 0===t?void 0:t.shop_id:null,delivery_type:ue||(null!==(null===(n=fe.data)||void 0===n?void 0:n.delivery_type)?null===(B=fe.data)||void 0===B?void 0:B.delivery_type:null),date_from:(null===Se||void 0===Se||null===(V=Se[0])||void 0===V?void 0:V.format("YYYY-MM-DD"))||void 0,date_to:(null===Se||void 0===Se||null===(K=Se[1])||void 0===K?void 0:K.format("YYYY-MM-DD"))||void 0};(0,Z.Z)((()=>{Q((0,C.AU)(Me))}),[null===fe||void 0===fe?void 0:fe.data,Se]),(0,i.useEffect)((()=>{null!==fe&&void 0!==fe&&fe.refetch&&(0,f.dC)((()=>{Q((0,C.AU)(Me)),Q((0,M.ZL)({})),Q((0,j.A_)(fe))}))}),[null===fe||void 0===fe?void 0:fe.refetch]);const Ye=(e,l)=>{Q((0,j.nc)({activeMenu:fe,data:{...$e,[l]:e}}))};const Pe=e=>{(0,f.dC)((()=>{Q((0,w.bn)()),Q((0,j.bL)({url:`seller/order/${e.id}`,id:"seller_order_edit",name:X("edit.order")}))})),W(`/seller/order/${e.id}`)},De={selectedRowKeys:le,onChange:e=>{te(e)}},ze=()=>{he(null),xe(null)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(o.Z,{className:"justify-content-end w-100 mb-3",children:[(0,N.jsx)(F.Z,{listType:"seller/orders"}),(0,N.jsx)(a.Z,{type:"primary",icon:(0,N.jsx)(p.Z,{}),onClick:()=>{Q((0,w.bn)()),Q((0,j.bL)({id:"pos.system",url:"seller/pos-system",name:X("add.order")})),W("/seller/pos-system",{state:{delivery_type:ue}})},style:{width:"100%"},children:X("add.order")})]}),(0,N.jsx)(r.Z,{children:(0,N.jsxs)(o.Z,{wrap:!0,className:"p-0 mb-0",children:[(0,N.jsx)(_.Z,{placeholder:X("search"),handleChange:e=>Ye(e,"search"),defaultValue:null===(q=fe.data)||void 0===q?void 0:q.search}),(0,N.jsx)(S.h,{placeholder:X("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10};return I.Z.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.id,key:e.id})))}))},onSelect:e=>Ye(e.value,"search"),onDeselect:()=>Ye(null,"search"),style:{minWidth:200}}),(0,N.jsx)(T,{value:Se,onChange:e=>{Ye(JSON.stringify(e),"data_time"),Ie(e)},disabledDate:e=>e&&e>E()().endOf("day"),style:{width:"100%"}}),!ue&&(0,N.jsx)(u.Z,{value:null===$e||void 0===$e?void 0:$e.delivery_type,placeholder:X("order.type"),onSelect:e=>Ye(e,"delivery_type"),options:[{label:X("pickup"),value:"pickup"},{label:X("delivery"),value:"delivery"}],allowClear:!0,style:{width:"100%"},onDeselect:()=>Ye(null,"delivery_type")}),(0,N.jsx)(a.Z,{icon:(0,N.jsx)(y.Z,{}),onClick:()=>{(0,f.dC)((()=>{Q((0,C.H5)()),Q((0,j.nc)({activeMenu:fe,data:null}))})),Q((0,C.AU)({status:"all",page:null===$e||void 0===$e?void 0:$e.page,perPage:10}))},children:X("clear")}),(0,N.jsx)(Y.Z,{size:"",onClick:()=>{null===le||0===le.length?D.Am.warning(X("select.the.product")):(de(!0),ne(!1))},children:X("delete.selected")}),(0,N.jsx)($.Z,{columns:pe,setColumns:ye})]})}),(0,N.jsxs)(r.Z,{children:[(0,N.jsx)(d.Z,{onChange:e=>{const l=e;Q((0,j.nc)({activeMenu:fe,data:{role:l,page:1}})),Ze(e),W(`?status=${l}`)},type:"card",activeKey:Ce,children:ve.filter((e=>!0===e.active)).map((e=>(0,N.jsx)(H,{tab:X(e.name)},e.name)))}),(0,N.jsx)(v.Z,{scroll:{x:!0},rowSelection:De,columns:null===pe||void 0===pe?void 0:pe.filter((e=>e.is_show)),dataSource:be,loading:we,pagination:{pageSize:ke.perPage,page:(null===(G=fe.data)||void 0===G?void 0:G.page)||1,total:null===_e||void 0===_e?void 0:_e.total,defaultCurrent:null===(R=fe.data)||void 0===R?void 0:R.page,current:null===(J=fe.data)||void 0===J?void 0:J.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:i,current:n}=e,{field:d,order:s}=t,o=(0,b.Z)(s);Q((0,j.nc)({activeMenu:fe,data:{...$e,perPage:i,page:n,column:d,sort:o}}))}}),(0,N.jsx)(z.Z,{click:()=>{oe(!0);const e={...Object.assign({},...le.map(((e,l)=>({[`ids[${l}]`]:e}))))};O.Z.delete(e).then((()=>{D.Am.success(X("successfully.deleted")),de(!1),Q((0,C.AU)(Me)),ne(null)})).finally((()=>oe(!1)))},text:X(ie?"delete":"all.delete"),loading:se,setText:te})]}),me&&(0,N.jsx)(A.Z,{orderId:me,handleCancel:ze,refetchPage:()=>(0,f.dC)((()=>{Q((0,C.AU)(Me)),Q((0,j.A_)(fe))}))}),ce&&(0,N.jsx)(U.Z,{orderDetails:ce,handleCancel:ze})]})}},88852:(e,l,t)=>{"use strict";t.d(l,{Z:()=>y});var i=t(47313),n=t(10976),d=t(9274),s=t(59491),o=t(68197),a=t(59624),r=t(2717),u=t(62412),v=t(90954),c=t(24511),h=t(94291),m=t(89281),x=t(58328),p=t(46417);function y(e){var l;let{orderDetails:t,handleCancel:y}=e;const{t:f}=(0,c.$)(),{activeMenu:j}=(0,r.v9)((e=>e.menu),r.wU),{deliverymans:g}=(0,r.v9)((e=>e.deliveryman),r.wU),[Z]=n.Z.useForm(),C=(0,r.I0)(),[b,_]=(0,i.useState)(!1);(0,i.useEffect)((()=>{C((0,h.EH)())}),[]);return(0,p.jsx)(d.Z,{visible:!!t,title:t.title,onCancel:y,footer:[(0,p.jsx)(s.Z,{type:"primary",onClick:()=>Z.submit(),loading:b,children:f("save")}),(0,p.jsx)(s.Z,{type:"default",onClick:y,children:f("cancel")})],children:(0,p.jsx)(n.Z,{form:Z,layout:"vertical",onFinish:e=>{const l={deliveryman:e.deliveryman.value};_(!0),u.Z.updateDelivery(t.id,l).then((()=>{y(),C((0,v.xo)(j))})).finally((()=>_(!1)))},initialValues:{deliveryman:null===(l=t.deliveryman)||void 0===l?void 0:l.id},children:(0,p.jsx)(o.Z,{gutter:12,children:(0,p.jsx)(a.Z,{span:24,children:(0,p.jsx)(n.Z.Item,{label:f("deliveryman"),name:"deliveryman",rules:[{required:!0,message:f("required")}],children:(0,p.jsx)(m.h,{fetchOptions:e=>{const l={perPage:10,page:1,search:e};return x.Z.getDeliverymans(l).then((e=>e.data.map((e=>({label:e.firstname,value:e.id})))))}})})})})})})}},27107:(e,l,t)=>{"use strict";t.d(l,{Z:()=>_});var i=t(47313),n=t(35432),d=t(10976),s=t(9274),o=t(59491),a=t(68197),r=t(59624),u=t(66672),v=t(46155),c=t(74294),h=t(2717),m=t(24511),x=t(62412),p=t(51282),y=t(73431),f=t(20052),j=t(12019),g=t(70816),Z=t.n(g),C=t(46417);const{Panel:b}=n.Z;function _(e){var l;let{orderId:t,handleCancel:g,refetchPage:_}=e;const{statusList:w}=(0,h.v9)((e=>e.orderStatus),h.wU),{defaultLang:k,languages:S}=(0,h.v9)((e=>e.formLang),h.wU),[I]=d.Z.useForm(),{t:$}=(0,m.$)(),M=(0,i.useRef)(null),[Y,P]=(0,i.useState)(!1),[D,z]=(0,i.useState)(!1),[O,U]=(0,i.useState)(null!==w&&void 0!==w&&w.length?w.map((e=>({value:null===e||void 0===e?void 0:e.name,label:$(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))):[]),[A,F]=(0,i.useState)(null),[L,B]=(0,i.useState)(null),[E,N]=(0,i.useState)(null),[T,H]=(0,i.useState)(null);(0,i.useEffect)((()=>{P(!0),x.Z.getById(t).then((e=>{var l,t,i,n;F(e.data),B(null===(l=e.data)||void 0===l||null===(t=l.notes)||void 0===t?void 0:t.filter((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)}))),H(null===(i=e.data)||void 0===i?void 0:i.status),I.setFieldsValue({status:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status})})).finally((()=>P(!1)))}),[t]),(0,i.useEffect)((()=>{var e,l;if("pause"===(null===A||void 0===A?void 0:A.status))return void U(null===w||void 0===w?void 0:w.map((e=>({value:null===e||void 0===e?void 0:e.name,label:$(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))));const t=w.findIndex((e=>e.name===(null===A||void 0===A?void 0:A.status))),i=t>=0?[w[t],t<w.length-1?"pause"===(null===(e=w[t+1])||void 0===e?void 0:e.name)?w[t+2]:w[t+1]:null]:[t<w.length-1?w[t+1]:null];var n;("on_a_way"===(null===(l=w[t])||void 0===l?void 0:l.name)&&i.push(w[t+3]),null!==w&&void 0!==w&&w.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))&&(null===i||void 0===i||i.push(null===w||void 0===w||null===(n=w.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))||void 0===n?void 0:n[0]));i.push({name:"canceled",id:8,active:!0,sort:(null===w||void 0===w?void 0:w.length)+1}),U(i.filter(Boolean).map((e=>({value:null===e||void 0===e?void 0:e.name,label:$(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))))}),[A]);const V=e=>{const l=Object.entries(e).filter((e=>{let[l,t]=e;return!!t}));if(0!==(null===l||void 0===l?void 0:l.length))return Object.fromEntries(l)};return(0,i.useEffect)((()=>{var e;I.setFieldsValue({[`title[${k||"en"}]`]:null===E||void 0===E||null===(e=E.title)||void 0===e?void 0:e[k||"en"]})}),[k]),(0,C.jsx)(s.Z,{visible:!!t,title:[$("order.status")],onCancel:g,footer:[(0,C.jsx)(o.Z,{type:"primary",onClick:()=>I.submit(),loading:D,children:$("save")},"save-form"),(0,C.jsx)(o.Z,{type:"default",onClick:g,children:$("cancel")},"cansel-modal")],children:Y?(0,C.jsx)(p.Z,{}):(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(d.Z,{form:I,layout:"vertical",onFinish:e=>{var l;let t=null;z(!0),E&&(null===e||void 0===e?void 0:e.status)===(null===A||void 0===A?void 0:A.status)&&(t={...Object.assign({},...S.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},t=V(t));const i=V({...Object.assign({},...S.map((l=>({[l.locale]:e[`note[${l.locale}]`]}))))}),n=i?{title:i}:null,d=(null===A||void 0===A?void 0:A.status)===(null===e||void 0===e?void 0:e.status)?null===A||void 0===A||null===(l=A.notes)||void 0===l?void 0:l.filter((l=>(null===l||void 0===l?void 0:l.status)===(null===e||void 0===e?void 0:e.status))).flatMap((e=>{var l;return null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((e,l)=>l===(null===E||void 0===E?void 0:E.index)?{...e,title:{...null===e||void 0===e?void 0:e.title,...t}}:e))})).filter(Boolean):[],s={status:null===e||void 0===e?void 0:e.status,notes:[...d,n].filter(Boolean)};x.Z.updateStatus(A.id,s).then((()=>{g(),_()})).finally((()=>z(!1)))},name:"order-status-change-form",children:[(0,C.jsx)(a.Z,{gutter:12,style:{marginBottom:"20px"},children:(0,C.jsx)(r.Z,{span:24,children:(0,C.jsx)(y.Z,{})})}),!(null===A||void 0===A||null===(l=A.notes)||void 0===l||!l.some((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)})))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n.Z,{children:null===L||void 0===L?void 0:L.map((e=>{var l;return(0,C.jsx)(b,{header:$(null===e||void 0===e?void 0:e.status),children:(null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((l,t)=>{var i,n,s;return(0,C.jsxs)(a.Z,{style:{marginBottom:"15px",display:"flex",justifyContent:"space-between"},gutter:12,children:[(0,C.jsxs)(r.Z,{span:(null===e||void 0===e?void 0:e.status)===(null===A||void 0===A?void 0:A.status)&&T===(null===A||void 0===A?void 0:A.status)?22:24,children:[(0,C.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,C.jsxs)("span",{style:{marginTop:"3px"},children:[t+1,"."," "]}),(0,C.jsxs)("div",{style:{width:"100%"},children:[(0,C.jsx)("p",{style:{margin:0,fontSize:"15px",wordBreak:"break-all"},hidden:(null===E||void 0===E?void 0:E.orderId)===(null===e||void 0===e?void 0:e.id)&&(null===E||void 0===E?void 0:E.index)===t&&(null===A||void 0===A?void 0:A.status)===T,children:(null===l||void 0===l||null===(i=l.title)||void 0===i?void 0:i[k||"en"])||"--"}),(0,C.jsx)(d.Z.Item,{name:`title[${k||"en"}]`,hidden:(null===E||void 0===E?void 0:E.orderId)!==(null===e||void 0===e?void 0:e.id)||(null===E||void 0===E?void 0:E.index)!==t||(null===A||void 0===A?void 0:A.status)!==T,children:(0,C.jsx)(u.Z.TextArea,{maxLength:200,style:{width:"100%"},rows:Math.floor((null===l||void 0===l||null===(n=l.title)||void 0===n||null===(s=n[k||"en"])||void 0===s?void 0:s.length)/41||0)+1,ref:M},t)})]})]}),(0,C.jsx)("p",{style:{fontSize:"12px",margin:0,float:"right"},children:Z()(null===l||void 0===l?void 0:l.created_at).format("DD-MM-YYYY HH:mm")})]}),(null===e||void 0===e?void 0:e.status)===(null===A||void 0===A?void 0:A.status)&&(null===A||void 0===A?void 0:A.status)===T&&(0,C.jsx)(r.Z,{span:2,children:(null===E||void 0===E?void 0:E.orderId)===(null===e||void 0===e?void 0:e.id)&&t===(null===E||void 0===E?void 0:E.index)?(0,C.jsx)(o.Z,{type:"primary",icon:(0,C.jsx)(f.Z,{}),size:"small",onClick:()=>I.submit(),loading:D}):(null===e||void 0===e?void 0:e.status)===(null===A||void 0===A?void 0:A.status)&&(0,C.jsx)(o.Z,{icon:(0,C.jsx)(j.Z,{}),size:"small",onClick:()=>{var i;M.current.focus(),N({orderId:null===e||void 0===e?void 0:e.id,index:t,title:null===l||void 0===l?void 0:l.title}),I.setFieldsValue({[`title[${k||"en"}]`]:null===l||void 0===l||null===(i=l.title)||void 0===i?void 0:i[k||"en"]})}})})]},t)})))||"--"},null===e||void 0===e?void 0:e.id)}))}),(0,C.jsx)(v.Z,{})]}),(0,C.jsxs)(a.Z,{gutter:12,children:[(0,C.jsx)(r.Z,{span:24,children:(0,C.jsx)(d.Z.Item,{label:$("status"),name:"status",rules:[{required:!0,message:$("required")}],children:(0,C.jsx)(c.Z,{options:O,onSelect:e=>H(e)})})}),(0,C.jsx)(r.Z,{span:24,children:S.map((e=>(0,C.jsx)(d.Z.Item,{name:`note[${null===e||void 0===e?void 0:e.locale}]`,label:$("note"),hidden:(null===e||void 0===e?void 0:e.locale)!==k,children:(0,C.jsx)(u.Z.TextArea,{maxLength:200})},`note_${null===e||void 0===e?void 0:e.id}`)))})]})]})})})}},24654:()=>{}}]);