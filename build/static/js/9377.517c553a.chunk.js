"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9377],{32380:(e,l,a)=>{a.d(l,{o:()=>s});var t=a(47313),r=a(84762),i=a(72652),n=a(46417);const s=e=>{let{fetchOptions:l,refetch:a=!1,...s}=e;const[d,o]=(0,t.useState)(!1),[u,c]=(0,t.useState)([]);return(0,n.jsx)(r.Z,{treeLine:!0,treeData:d?[]:u,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:()=>{u.length&&!a||(o(!0),l().then((e=>{c(e),o(!1)})))},notFoundContent:d?(0,n.jsx)(i.Z,{size:"small"}):"no results",...s})}},73431:(e,l,a)=>{a.d(l,{Z:()=>o});var t=a(47313),r=a(39180),i=a(2717),n=a(28830),s=a(60535),d=a(46417);const o=()=>{const e=(0,i.I0)(),{languages:l,defaultLang:a}=(0,i.v9)((e=>e.formLang),i.wU);(0,t.useEffect)((()=>{s.Z.getAllActive().then((l=>{let{data:a}=l;e((0,n.dc)(a)),e((0,n.mh)(a.find((e=>1===e.default)).locale))}))}),[]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(r.ZP.Group,{value:a,onChange:l=>{let{target:{value:a}}=l;e((0,n.mh)(a))},className:"float-right",buttonStyle:"solid",children:null===l||void 0===l?void 0:l.map((e=>(0,d.jsx)(r.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},19377:(e,l,a)=>{a.r(l),a.d(l,{default:()=>k});var t=a(47313),r=a(10976),i=a(77181),n=a(68197),s=a(59624),d=a(66672),o=a(74294),u=a(16124),c=a(86345),m=a(59491),v=a(23560),h=a(97890),p=a(73431),g=a(52421),j=a(2717),x=a(90954),Z=a(30763),y=a(24511),b=a(5764),f=a(32380),w=a(46417);const k=()=>{var e,l;const{t:a}=(0,y.$)(),k=(0,h.s0)(),q=(0,j.I0)(),[I,P]=(0,t.useState)("main"),{activeMenu:E}=(0,j.v9)((e=>e.menu),j.wU),[L,S]=(0,t.useState)(null!==(e=E.data)&&void 0!==e&&e.image?[null===(l=E.data)||void 0===l?void 0:l.image]:[]),[_]=r.Z.useForm(),[F,$]=(0,t.useState)(!1),[A,C]=(0,t.useState)(null),{defaultLang:U,languages:z}=(0,j.v9)((e=>e.formLang),j.wU);(0,t.useEffect)((()=>()=>{const e=_.getFieldsValue(!0);q((0,x.nc)({activeMenu:E,data:e}))}),[]);return(0,w.jsx)(i.Z,{title:a("add.category"),extra:(0,w.jsx)(p.Z,{}),children:(0,w.jsxs)(r.Z,{name:"basic",layout:"vertical",onFinish:e=>{var l,t,r;$(!0);const i={...e,type:null!==(l=e.parent_id)&&void 0!==l&&l.value?I:"main",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null===(t=e.parent_id)||void 0===t?void 0:t.value,"images[0]":null===(r=L[0])||void 0===r?void 0:r.name},n="catalog/categories";Z.Z.create(i).then((()=>{v.Am.success(a("successfully.created")),q((0,x.ph)({...E,nextUrl:n})),k(`/${n}`)})).catch((e=>C(e.response.data.params))).finally((()=>$(!1)))},initialValues:{active:!0,...E.data},form:_,children:[(0,w.jsxs)(n.Z,{gutter:12,children:[(0,w.jsx)(s.Z,{span:12,children:z.map(((e,l)=>(0,w.jsx)(r.Z.Item,{label:a("name"),name:`title[${e.locale}]`,help:A&&A[`title.${U}`]?A[`title.${U}`][0]:null,validateStatus:A?"error":"success",rules:[{required:!0,validator:(l,t)=>t||(null===e||void 0===e?void 0:e.locale)!==U?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(a("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],hidden:e.locale!==U,children:(0,w.jsx)(d.Z,{placeholder:a("name"),maxLength:50})},e.title+l)))}),(0,w.jsx)(s.Z,{span:12,children:z.map(((e,l)=>(0,w.jsx)(r.Z.Item,{label:a("description"),name:`description[${e.locale}]`,rules:[{required:!0,validator:(l,t)=>t||(null===e||void 0===e?void 0:e.locale)!==U?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(a("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(a("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(a("required")))}],hidden:e.locale!==U,children:(0,w.jsx)(g.Z,{rows:4,maxLength:150})},e.locale+l)))}),(0,w.jsx)(s.Z,{span:12,children:(0,w.jsx)(r.Z.Item,{label:a("keywords"),name:"keywords",rules:[{required:!0,message:a("required")}],children:(0,w.jsx)(o.Z,{mode:"tags",style:{width:"100%"}})})}),(0,w.jsx)(s.Z,{span:12,children:(0,w.jsx)(r.Z.Item,{label:a("parent.category"),name:"parent_id",rules:[{required:!1,message:a("required")}],children:(0,w.jsx)(f.o,{refetch:!0,fetchOptions:async function(){return Z.Z.getAll({perPage:100,type:"main"}).then((e=>e.data.map((e=>{var l,a;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,key:e.id,type:"main",children:null===(a=e.children)||void 0===a?void 0:a.map((e=>{var l,a;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,key:e.id,type:"sub_main",disabled:"child"===e.type,children:null===(a=e.children)||void 0===a?void 0:a.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,key:e.id,disabled:!0,type:"child"}}))}}))}}))))},onSelect:(e,l)=>{const{type:a}=l||{};P("main"===a?"sub_main":"sub_main"===a?"child":"main")},allowClear:!0})})}),(0,w.jsx)(s.Z,{span:12,children:(0,w.jsx)(r.Z.Item,{name:"input",label:a("input"),rules:[{required:!0,message:a("required")}],children:(0,w.jsx)(u.Z,{min:0,parser:e=>parseInt(e,10),max:9999999,className:"w-100"})})}),(0,w.jsx)(s.Z,{span:4,children:(0,w.jsx)(r.Z.Item,{label:a("image"),name:"images",rules:[{required:!(null!==L&&void 0!==L&&L.length),message:a("required")}],children:(0,w.jsx)(b.Z,{type:"categories",imageList:L,setImageList:S,form:_,multiple:!1})})}),(0,w.jsx)(s.Z,{span:2,children:(0,w.jsx)(r.Z.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(c.Z,{})})})]}),(0,w.jsx)(m.Z,{type:"primary",htmlType:"submit",loading:F,children:a("submit")})]})})}}}]);