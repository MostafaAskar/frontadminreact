"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1064],{32380:(e,a,l)=>{l.d(a,{o:()=>r});var t=l(47313),n=l(84762),i=l(72652),s=l(46417);const r=e=>{let{fetchOptions:a,refetch:l=!1,...r}=e;const[d,u]=(0,t.useState)(!1),[c,o]=(0,t.useState)([]);return(0,s.jsx)(n.Z,{treeLine:!0,treeData:d?[]:c,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:()=>{c.length&&!l||(u(!0),a().then((e=>{o(e),u(!1)})))},notFoundContent:d?(0,s.jsx)(i.Z,{size:"small"}):"no results",...r})}},73431:(e,a,l)=>{l.d(a,{Z:()=>u});var t=l(47313),n=l(39180),i=l(2717),s=l(28830),r=l(60535),d=l(46417);const u=()=>{const e=(0,i.I0)(),{languages:a,defaultLang:l}=(0,i.v9)((e=>e.formLang),i.wU);(0,t.useEffect)((()=>{r.Z.getAllActive().then((a=>{let{data:l}=a;e((0,s.dc)(l)),e((0,s.mh)(l.find((e=>1===e.default)).locale))}))}),[]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(n.ZP.Group,{value:l,onChange:a=>{let{target:{value:l}}=a;e((0,s.mh)(l))},className:"float-right",buttonStyle:"solid",children:null===a||void 0===a?void 0:a.map((e=>(0,d.jsx)(n.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},81064:(e,a,l)=>{l.r(a),l.d(a,{default:()=>I});var t=l(47313),n=l(10976),i=l(77181),s=l(68197),r=l(59624),d=l(66672),u=l(74294),c=l(16124),o=l(86345),m=l(59491),h=l(23560),v=l(97890),p=l(73431),g=l(52421),x=l(2717),Z=l(90954),j=l(47647),y=l(5764),b=l(24511),f=l(32380),w=l(46417);const I=()=>{var e,a;const{t:l}=(0,b.$)(),I=(0,v.s0)(),k=(0,x.I0)(),{activeMenu:q}=(0,x.v9)((e=>e.menu),x.wU),{state:S}=(0,v.TH)(),[L,_]=(0,t.useState)(null!==(e=q.data)&&void 0!==e&&e.image?[null===(a=q.data)||void 0===a?void 0:a.image]:[]),[F,$]=(0,t.useState)("main"),[C]=n.Z.useForm(),[P,A]=(0,t.useState)(!1),[N,U]=(0,t.useState)(null),{defaultLang:z,languages:E}=(0,x.v9)((e=>e.formLang),x.wU);(0,t.useEffect)((()=>()=>{const e=C.getFieldsValue(!0);k((0,Z.nc)({activeMenu:q,data:e}))}),[]);return(0,w.jsx)(i.Z,{title:null!==S&&void 0!==S&&S.parentId?l("add.sub.category"):l("add.category"),extra:(0,w.jsx)(p.Z,{}),children:(0,w.jsxs)(n.Z,{name:"basic",layout:"vertical",onFinish:e=>{var a,t,n;A(!0);const i={...e,type:null!==(a=e.parent_id)&&void 0!==a&&a.value?F:"main",active:Number(e.active),keywords:e.keywords.join(","),parent_id:null===(t=e.parent_id)||void 0===t?void 0:t.value,"images[0]":null===(n=L[0])||void 0===n?void 0:n.name},s="seller/categories";j.Z.create(i).then((()=>{h.Am.success(l("successfully.created")),k((0,Z.ph)({...q,nextUrl:s})),k((0,Z.xo)(q)),I(`/${s}`)})).catch((e=>U(e.response.data.params))).finally((()=>A(!1)))},initialValues:{active:!0,...q.data},form:C,children:[(0,w.jsxs)(s.Z,{gutter:12,children:[(0,w.jsx)(r.Z,{span:12,children:E.map(((e,a)=>(0,w.jsx)(n.Z.Item,{label:l("name"),name:`title[${e.locale}]`,help:N&&N[`title.${z}`]?N[`title.${z}`][0]:null,validateStatus:N?"error":"success",rules:[{required:e.locale===z,message:l("required")}],hidden:e.locale!==z,children:(0,w.jsx)(d.Z,{placeholder:l("name")})},e.title+a)))}),(0,w.jsx)(r.Z,{span:12,children:E.map(((e,a)=>(0,w.jsx)(n.Z.Item,{label:l("description"),name:`description[${e.locale}]`,rules:[{required:e.locale===z,message:l("required")}],hidden:e.locale!==z,children:(0,w.jsx)(g.Z,{rows:4})},e.locale+a)))}),(0,w.jsx)(r.Z,{span:12,children:(0,w.jsx)(n.Z.Item,{label:l("keywords"),name:"keywords",rules:[{required:!0,message:l("required")}],children:(0,w.jsx)(u.Z,{mode:"tags",style:{width:"100%"}})})}),(0,w.jsx)(r.Z,{span:12,children:(0,w.jsx)(n.Z.Item,{label:l("parent.category"),name:"parent_id",rules:[{required:!1,message:l("required")}],children:(0,w.jsx)(f.o,{fetchOptions:async function(){return j.Z.selectPaginate({perPage:100,type:"main"}).then((e=>e.data.map((e=>{var a,l;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,type:"main",children:null===(l=e.children)||void 0===l?void 0:l.map((e=>{var a,l;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,type:"sub_main",children:null===(l=e.children)||void 0===l?void 0:l.map((e=>{var a;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,disabled:!0,type:"child"}}))}}))}}))))},onSelect:(e,a)=>{const{type:l}=a||{};$("main"===l?"sub_main":"sub_main"===l?"child":"main")},allowClear:!0})})}),(0,w.jsx)(r.Z,{span:12,children:(0,w.jsx)(n.Z.Item,{name:"input",label:l("input"),rules:[{required:!0,message:l("required")}],children:(0,w.jsx)(c.Z,{min:0,parser:e=>parseInt(e,10),max:32767,className:"w-100"})})}),(0,w.jsx)(r.Z,{span:4,children:(0,w.jsx)(n.Z.Item,{label:l("image"),children:(0,w.jsx)(y.Z,{type:"categories",imageList:L,setImageList:_,form:C,multiple:!1})})}),(0,w.jsx)(r.Z,{span:2,children:(0,w.jsx)(n.Z.Item,{label:l("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(o.Z,{})})})]}),(0,w.jsx)(m.Z,{type:"primary",htmlType:"submit",loading:P,children:l("submit")})]})})}}}]);