"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8115],{89281:(e,s,t)=>{t.d(s,{h:()=>c});var a=t(47313),l=t(12279),n=t.n(l),i=t(74294),r=t(72652),u=t(46417);const c=e=>{let{fetchOptions:s,debounceTimeout:t=400,onClear:l,refetchOptions:c=!1,...o}=e;const[d,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),f=(0,a.useMemo)((()=>n()((e=>{p([]),m(!0),s(e).then((e=>{p(e),m(!1)}))}),t)),[s,t]);return(0,u.jsx)(i.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),l&&l()},notFoundContent:d?(0,u.jsx)(r.Z,{size:"small"}):"no results",...o,options:h,onFocus:()=>{h.length&&!c||f("")}})}},48115:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var a=t(47313),l=t(97890),n=t(23560),i=t(10976),r=t(77181),u=t(68197),c=t(59624),o=t(59491),d=t(2717),m=t(90954),h=t(18333),p=t(89281),f=t(24511),x=t(4446),v=t(84980),g=t(5764),j=t(46417);const b=()=>{var e,s;const{t:t}=(0,f.$)(),{activeMenu:b}=(0,d.v9)((e=>e.menu),d.wU),Z=(0,d.I0)(),[y]=i.Z.useForm(),S=(0,l.s0)(),{myShop:w}=(0,d.v9)((e=>e.myShop),d.wU),[C,F]=(0,a.useState)(null!==(e=b.data)&&void 0!==e&&e.images?[null===(s=b.data)||void 0===s?void 0:s.images[0]]:[]),[I,O]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=y.getFieldsValue(!0);Z((0,m.nc)({activeMenu:b,data:e}))}),[]);return(0,j.jsx)(r.Z,{title:t("add.story"),className:"h-100",children:(0,j.jsxs)(i.Z,{name:"story-add",layout:"vertical",onFinish:e=>{const s={...Object.assign({},...C.map(((e,s)=>({[`file_urls[${s}]`]:e.name})))),product_id:e.products.value};O(!0);const a="seller/stories";x.Z.create(s).then((()=>{const e={shop_id:w.id};n.Am.success(t("successfully.created")),(0,d.dC)((()=>{Z((0,m.ph)({...b,nextUrl:a})),Z((0,v.U7)(e))})),S(`/${a}`)})).finally((()=>O(!1)))},form:y,initialValues:{active:!0,...b.data},className:"d-flex flex-column h-100",children:[(0,j.jsxs)(u.Z,{gutter:12,children:[(0,j.jsx)(c.Z,{span:12,children:(0,j.jsx)(i.Z.Item,{label:t("products"),name:"products",rules:[{required:!1,message:t("required")}],children:(0,j.jsx)(p.h,{fetchOptions:function(e){const s={search:e,shop_id:w.id,status:"published",active:1,rest:1};return h.Z.getAll(s).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id})))))},debounceTimeout:200})})}),(0,j.jsx)(c.Z,{span:12,children:(0,j.jsx)(i.Z.Item,{label:t("image"),name:"image",rules:[{required:0===C.length,message:t("required")}],children:(0,j.jsx)(g.Z,{type:"banners",imageList:C,setImageList:F,form:y,multiple:!1})})})]}),(0,j.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,j.jsx)("div",{className:"pb-5",children:(0,j.jsx)(o.Z,{type:"primary",htmlType:"submit",loading:I,children:t("submit")})})})]})})}}}]);