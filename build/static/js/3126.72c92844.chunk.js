"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3126],{55940:(e,l,t)=>{t.d(l,{Z:()=>r});t(47313);var n=t(59491),s=t(47515),a=t(23560),d=t(24511),i=t(79492),o=t(46417);function r(e){let{size:l="",onClick:t,type:r="default",...c}=e;const{t:u}=(0,d.$)(),{isDemo:v}=(0,i.Z)();return(0,o.jsx)(n.Z,{size:l,icon:(0,o.jsx)(s.Z,{}),onClick:e=>{v?a.Am.warning(u("cannot.work.demo")):t(e)},type:r,...c})}},50402:(e,l,t)=>{t.d(l,{Z:()=>c});t(47313);var n=t(68197),s=t(59624),a=t(2717),d=t(24511),i=t(14637),o=t(29242),r=t(46417);const c=e=>{let{data:l}=e;const{t:t}=(0,d.$)(),{defaultCurrency:c}=(0,a.v9)((e=>e.currency),a.wU);return(0,r.jsxs)(n.Z,{gutter:16,className:"mt-3",children:[(0,r.jsx)(s.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("all.orders"),value:null===l||void 0===l?void 0:l.orders_count})}),(0,r.jsx)(s.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("ready.orders"),value:null===l||void 0===l?void 0:l.ready_orders_count})}),(0,r.jsx)(s.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("on.a.way.orders"),value:null===l||void 0===l?void 0:l.on_a_way_orders_count})}),(0,r.jsx)(s.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("cancelled.orders"),value:null===l||void 0===l?void 0:l.cancel_orders_count})}),(0,r.jsx)(s.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("delivered.orders"),value:null===l||void 0===l?void 0:l.delivered_orders_count})}),(0,r.jsx)(s.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("total.price"),value:(0,o.p)(null===l||void 0===l?void 0:l.total_price,null===c||void 0===c?void 0:c.symbol)})})]})}},53233:(e,l,t)=>{t.d(l,{Z:()=>m});var n=t(47313),s=t(56140),a=t(67251),d=t(45705),i=t(86345),o=t(78267),r=t(37388),c=t(59491),u=t(99587),v=t(24511),x=t(46417);const{Text:h}=s.Z,m=e=>{let{columns:l=[],setColumns:t,style:s,size:m="",iconOnly:j}=e;const{t:Z}=(0,v.$)(),[p,y]=(0,n.useState)(!1),f=(0,x.jsx)(a.Z,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,x.jsx)(a.Z.Item,{children:(0,x.jsxs)(d.Z,{className:"d-flex justify-content-between",children:[(0,x.jsx)(h,{children:e.title}),(0,x.jsx)(i.Z,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,x.jsx)(o.Z,{overlay:f,trigger:["click"],onVisibleChange:e=>{y(e)},visible:p,children:(0,x.jsx)(r.Z,{title:Z("change.columns"),children:(0,x.jsx)(c.Z,{style:{...s},size:m,icon:(0,x.jsx)(u.Z,{}),children:j?null:Z("Columns")})})})}},41481:(e,l,t)=>{t.d(l,{Z:()=>o});var n=t(47313),s=t(66672),a=t(16031),d=t(40765),i=t(46417);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...r}=e;const[c,u]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,a.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{u(t)}),[o]),(0,i.jsx)(s.Z,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(d.Z,{}),...r})}},13945:(e,l,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{Z:()=>n})},29242:(e,l,t)=>{function n(e,l){var t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return t?"$"+(e/t.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t.symbol:"0"}t.d(l,{p:()=>n})},36311:(e,l,t)=>{t.d(l,{Z:()=>s});var n=t(34344);const s={orderExport:(e,l)=>n.Z.get(`dashboard/user/export/order/${e}/pdf`,{params:l,responseType:"blob"})}},14637:(e,l,t)=>{t.d(l,{Z:()=>a});t(47313);var n=t(77181),s=t(46417);function a(e){let{title:l="Orders",value:t=0,color:a="grey",onClick:d}=e;return(0,s.jsx)(n.Z,{className:"statistics-card",hoverable:!!d,onClick:d,children:(0,s.jsxs)("div",{className:"card-wrapper",children:[(0,s.jsx)("div",{className:"space"}),(0,s.jsx)("div",{className:"content",children:(0,s.jsx)("h1",{className:"number",children:t})}),(0,s.jsx)("span",{className:`highlighter ${a}`}),l&&(0,s.jsx)("h4",{className:"title",children:l})]})})}},83126:(e,l,t)=>{t.r(l),t.d(l,{default:()=>F});var n=t(47313),s=t(99096),a=t(73591),d=t(66204),i=t(59491),o=t(45705),r=t(72652),c=t(77181),u=t(78508),v=t(97890),x=t(12019),h=t(31741),m=t(47515),j=t(6986),Z=t(2717),p=t(90954),y=t(24511),f=t(80314),g=t(22054),_=t(13945),C=t(41481),w=t(84017),k=t(7920),b=t(24077),S=t(53233),Y=t(5958),$=t(80355),M=t(24391),N=t(23560),I=t(55940),D=t(7370),z=t(74580),P=t(69658),U=t(97421),A=t(50402),E=t(70816),T=t.n(E),O=t(46417);const{RangePicker:V}=s.Z,{TabPane:K}=a.Z;function F(){var e,l;const t=(0,Z.I0)(),s=(0,v.s0)(),{t:E}=(0,y.$)(),{defaultCurrency:F}=(0,Z.v9)((e=>e.currency),Z.wU),[H,R]=(0,n.useState)(null),[B,G]=(0,n.useState)(null),[J,L]=(0,n.useState)(null),[q,Q]=(0,n.useState)(null),{id:W}=(0,v.UO)(),X=[{id:7,name:"all"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[ee,le]=(0,n.useState)([{title:E("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:E("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,O.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:E("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,O.jsxs)("div",{className:"text-lowercase",children:[e||0," ",E("products")]})},{title:E("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,O.jsxs)("div",{children:["new"===e?(0,O.jsx)(d.Z,{color:"blue",children:E(e)}):"canceled"===e?(0,O.jsx)(d.Z,{color:"error",children:E(e)}):(0,O.jsx)(d.Z,{color:"cyan",children:E(e)}),"delivered"!==e&&"canceled"!==e?(0,O.jsx)(x.Z,{onClick:()=>R(l)}):""]})},{title:E("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,l)=>(0,O.jsx)("div",{children:"ready"===l.status&&"pickup"!==l.delivery_type?(0,O.jsx)(i.Z,{type:"link",onClick:()=>Q(l),children:(0,O.jsxs)(o.Z,{children:[e?`${e.firstname} ${e.lastname}`:E("add.deliveryman"),(0,O.jsx)(x.Z,{})]})}):(0,O.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:E("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,w.Z)(e,F.symbol)},{title:E("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return E(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:E("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>T()(e).format("YYYY-MM-DD HH:mm")},{title:E("options"),is_show:!0,key:"options",render:(e,l)=>(0,O.jsxs)(o.Z,{children:[(0,O.jsx)(i.Z,{icon:(0,O.jsx)(Y.Y4r,{}),onClick:()=>G(l.id)}),(0,O.jsx)(i.Z,{icon:(0,O.jsx)(h.Z,{}),onClick:()=>(e=>{t((0,p.bL)({url:`order/details/${e.id}`,id:"order_details",name:E("order.details")})),s(`/order/details/${e.id}`)})(l)}),(0,O.jsx)(I.Z,{icon:(0,O.jsx)(m.Z,{}),onClick:()=>{ie([l.id]),te(!0),re(!0)}}),(0,O.jsx)(i.Z,{icon:(0,O.jsx)(j.Z,{}),onClick:()=>L(l.id)})]})}]),{setIsModalVisible:te}=(0,n.useContext)(z._),[ne,se]=(0,n.useState)(!1),{activeMenu:ae}=(0,Z.v9)((e=>e.menu),Z.wU),[de,ie]=(0,n.useState)(null),[oe,re]=(0,n.useState)(null),[ce,ue]=(0,n.useState)(!1),{orders:ve,meta:xe,loading:he,params:me,statistic:je}=(0,Z.v9)((e=>e.orders),Z.wU),Ze=null===ae||void 0===ae?void 0:ae.data;(0,f.Z)((()=>{const e={search:null===Ze||void 0===Ze?void 0:Ze.search,sort:null===Ze||void 0===Ze?void 0:Ze.sort,column:null===Ze||void 0===Ze?void 0:Ze.column,perPage:null===Ze||void 0===Ze?void 0:Ze.perPage,page:null===Ze||void 0===Ze?void 0:Ze.page,deliveryman:W,date_from:null===Ze||void 0===Ze?void 0:Ze.date_from,date_to:null===Ze||void 0===Ze?void 0:Ze.date_to,status:"all"===(null===Ze||void 0===Ze?void 0:Ze.status)||null===Ze||void 0===Ze?void 0:Ze.status};t((0,g.AU)(e))}),[null===ae||void 0===ae?void 0:ae.data]);const pe=()=>{R(null),Q(null),G(null),L(null)};(0,n.useEffect)((()=>{if(null!==ae&&void 0!==ae&&ae.refetch){const e={status:null===Ze||void 0===Ze?void 0:Ze.status,page:null===Ze||void 0===Ze?void 0:Ze.page,perPage:10,type:"delivery",deliveryman:W};t((0,g.AU)(e)),t((0,p.A_)(ae))}}),[null===ae||void 0===ae?void 0:ae.refetch]);const ye={selectedRowKeys:de,onChange:e=>{ie(e)}};return(0,O.jsxs)("div",{children:[(0,O.jsx)(r.Z,{spinning:he,children:(0,O.jsx)(A.Z,{data:je})}),(0,O.jsxs)(c.Z,{title:E("orders"),extra:(0,O.jsxs)(o.Z,{wrap:!0,children:[(0,O.jsx)(V,{format:"YYYY-MM-DD",onChange:e=>{return l=e,void t((0,p.nc)({activeMenu:ae,data:{...Ze,date_from:l?T()(null===l||void 0===l?void 0:l[0]).format("YYYY-MM-DD").toString():void 0,date_to:l?T()(null===l||void 0===l?void 0:l[1]).format("YYYY-MM-DD").toString():void 0}}));var l}}),(0,O.jsx)(I.Z,{type:"danger",onClick:()=>{null===de||0===de.length?N.Am.warning(E("select.the.product")):(te(!0),re(!1))},children:E("delete.all")}),(0,O.jsx)(i.Z,{onClick:()=>{se(!0),D.Z.export({type:"delivery",deliveryman:W,date_from:null===Ze||void 0===Ze?void 0:Ze.date_from,date_to:null===Ze||void 0===Ze?void 0:Ze.date_to,status:"all"===(null===Ze||void 0===Ze?void 0:Ze.status)||null===Ze||void 0===Ze?void 0:Ze.status}).then((e=>{const l=U.S0+e.data.file_name;window.location.href=l})).finally((()=>se(!1)))},loading:ne,children:E("export")}),(0,O.jsx)(S.Z,{setColumns:le,columns:ee})]}),children:[(0,O.jsx)("div",{className:"mt-2 mb-4",children:(0,O.jsx)(C.Z,{placeholder:E("search"),width:480,handleChange:e=>{return l=e,n="search",void t((0,p.nc)({activeMenu:ae,data:{...Ze,[n]:l}}));var l,n},defaultValue:null===(e=ae.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(l=ae.data)&&void 0!==l&&l.search)})}),(0,O.jsx)(a.Z,{onChange:e=>{const l=e;t((0,p.nc)({activeMenu:ae,data:{...Ze,status:l}}))},type:"card",activeKey:null===Ze||void 0===Ze?void 0:Ze.status,children:X.map((e=>(0,O.jsx)(K,{tab:E(e.name)},e.name)))}),(0,O.jsx)(u.Z,{scroll:{x:!0},rowSelection:ye,columns:null===ee||void 0===ee?void 0:ee.filter((e=>e.is_show)),dataSource:ve,loading:he,pagination:{pageSize:me.perPage,page:me.page,total:xe.total,defaultCurrent:me.page},rowKey:e=>e.id,onChange:function(e,l,n){const{pageSize:s,current:a}=e,{field:d,order:i}=n,o=(0,_.Z)(i);t((0,p.nc)({activeMenu:ae,data:{...ae.data,perPage:s,page:a,column:d,sort:o}}))}}),H&&(0,O.jsx)(k.Z,{orderDetails:H,handleCancel:pe,status:X}),q&&(0,O.jsx)(b.Z,{orderDetails:q,handleCancel:pe}),B&&(0,O.jsx)($.Z,{id:B,handleCancel:pe}),J&&(0,O.jsx)(M.Z,{id:J,handleCancel:pe}),(0,O.jsx)(P.Z,{click:()=>{ue(!0);const e={...Object.assign({},...de.map(((e,l)=>({[`ids[${l}]`]:e}))))};D.Z.delete(e).then((()=>{N.Am.success(E("successfully.deleted")),te(!1),t((0,g.AU)()),re(null),ie(null)})).finally((()=>ue(!1)))},text:E(oe?"delete":"all.delete"),loading:ce,setText:ie})]})]})}},24391:(e,l,t)=>{t.d(l,{Z:()=>y});var n=t(47313),s=t(36311),a=t(83334),d=t.n(a),i=t(51282),o=t(77181),r=t(9274),c=t(59491),u=t(68197),v=t(59624),x=t(24511),h=t(58821),m=t(57864),j=t(97890),Z=t(46417);const p=o.Z.Meta,y=e=>{let{id:l,handleCancel:t}=e;const[a,y]=(0,n.useState)(null),{t:f}=(0,x.$)(),g=(0,j.s0)();return(0,Z.jsx)(Z.Fragment,{children:a?(0,Z.jsx)(i.Z,{}):(0,Z.jsx)(r.Z,{visible:!!l,title:f("selected.download"),closable:!1,handleCancel:t,footer:[(0,Z.jsx)(c.Z,{type:"default",onClick:t,children:f("cancel")},"cancelBtn")],children:(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(v.Z,{span:12,children:(0,Z.jsx)(o.Z,{title:f("download.pdf"),onClick:()=>function(e){y(!0),s.Z.orderExport(e).then((l=>{d()(l,`invoice_${e}.pdf`,"application/pdf"),t()})).finally((()=>y(!1)))}(l),className:"text-center cursor-pointer",children:(0,Z.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(h._JY,{size:80})})})}),(0,Z.jsx)(v.Z,{span:12,children:(0,Z.jsx)(o.Z,{title:f("download.check"),onClick:()=>(e=>{g(`/orders/generate-invoice/${e}`)})(l),className:"text-center cursor-pointer",children:(0,Z.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(m.ih9,{size:85})})})})]})})})}}}]);