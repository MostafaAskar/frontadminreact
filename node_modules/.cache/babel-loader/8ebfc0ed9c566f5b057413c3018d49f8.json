{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Card,Col,Form,Input,Row}from'antd';import{useTranslation}from'react-i18next';import settingService from'../../services/settings';import{toast}from'react-toastify';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{disableRefetch,setMenuData}from'../../redux/slices/menu';import{fetchSettings as getSettings}from'../../redux/slices/globalSettings';import Loading from'../../components/loading';import useDemo from'../../helpers/useDemo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FirebaseConfig(){const{t}=useTranslation();const[form]=Form.useForm();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const dispatch=useDispatch();const[loading,setLoading]=useState(false);const[loadingBtn,setLoadingBtn]=useState(false);const{isDemo}=useDemo();useEffect(()=>{return()=>{const data=form.getFieldsValue(true);dispatch(setMenuData({activeMenu,data}));};},[]);const createSettings=list=>{const result=list.map(item=>({[item.key]:item.value}));return Object.assign({},...result);};function fetchSettings(){setLoading(true);settingService.get().then(res=>{const data=createSettings(res.data);form.setFieldsValue(data);}).finally(()=>{setLoading(false);dispatch(disableRefetch(activeMenu));});}useEffect(()=>{if(activeMenu.refetch){fetchSettings();}},[activeMenu.refetch]);function updateSettings(data){setLoadingBtn(true);settingService.update(data).then(()=>{toast.success(t('successfully.updated'));dispatch(getSettings());}).finally(()=>setLoadingBtn(false));}const onFinish=values=>{updateSettings(values);};const handleClick=()=>{if(isDemo){toast.warning(t('cannot.work.demo'));return;}form.submit();};return/*#__PURE__*/_jsx(Form,{layout:\"vertical\",form:form,name:\"global-settings\",onFinish:onFinish,initialValues:{...activeMenu.data},children:!loading?/*#__PURE__*/_jsx(Card,{title:t('firebase.config'),extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>handleClick(),loading:loadingBtn,children:t('save')}),children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('api.key'),name:\"api_key\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'IOS '+t('api.key'),name:\"ios_api_key\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Android '+t('api.key'),name:\"android_api_key\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('server.key'),name:\"server_key\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('vapid.key'),name:\"vapid_key\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('auth.domain'),name:\"auth_domain\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('project.id'),name:\"project_id\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('storage.bucket'),name:\"storage_bucket\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('messaging.sender.id'),name:\"messaging_sender_id\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('app.id'),name:\"app_id\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('measurement.id'),name:\"measurement_id\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})})]})}):/*#__PURE__*/_jsx(Loading,{})});}","map":null,"metadata":{},"sourceType":"module"}