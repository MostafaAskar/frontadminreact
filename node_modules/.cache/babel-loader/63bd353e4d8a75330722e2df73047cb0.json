{"ast":null,"code":"export function sortExtras(object, initialAddons) {\n  var extras = [];\n  var stocks = [];\n  var up = '';\n\n  for (var i = 0; i < ((_object$stocks = object['stocks']) === null || _object$stocks === void 0 ? void 0 : _object$stocks.length); i++) {\n    var _object$stocks;\n\n    up = '';\n    object['stocks'][i]['extras'].sort((a, b) => a.extra_group_id - b.extra_group_id);\n\n    for (var k = 0; k < ((_object$stocks$i$extr = object['stocks'][i]['extras']) === null || _object$stocks$i$extr === void 0 ? void 0 : _object$stocks$i$extr.length); k++) {\n      var _object$stocks$i$extr;\n\n      var extra = Object.assign({}, object['stocks'][i]['extras'][k]);\n      var index = extras.findIndex(item => item['extra_value_id'] == extra['extra_value_id']);\n\n      if (index == -1) {\n        extra['level'] = k;\n        extra['up'] = [up];\n        extras.push(extra);\n        up += extra['extra_value_id'].toString();\n      } else {\n        extras[index]['up'].push(up);\n        up += extra['extra_value_id'].toString();\n      }\n    }\n\n    var mdata = {\n      id: object['stocks'][i]['id'],\n      extras: up,\n      price: object['stocks'][i]['price'],\n      quantity: object['stocks'][i]['quantity'],\n      countable_id: object['stocks'][i]['countable_id'],\n      discount: object['stocks'][i]['discount'],\n      tax: object['stocks'][i]['tax'],\n      total_price: object['stocks'][i]['total_price'],\n      bonus: object['stocks'][i]['bonus']\n    };\n    stocks.push(mdata);\n  }\n\n  return {\n    stock: stocks,\n    extras: extras\n  };\n}\nexport function getExtras(extrasIdsArray, extras, stocks) {\n  var splitted = extrasIdsArray == '' ? [] : extrasIdsArray.split(',');\n  var result = [];\n  var up = [];\n\n  for (var i = 0; i <= splitted.length; i++) {\n    if (i - 1 >= 0) up[up.length] = splitted[i - 1].toString();\n    var filtered = extras.filter(item => {\n      var mySet = new Set(item['up']);\n      if (mySet.has(up.join(''))) return item;\n    });\n    if (filtered.length > 0) result.push(filtered);\n  }\n\n  var i = 0;\n  if (up.length < result.length) while (i < extras.length) {\n    up[up.length] = result[result.length - 1][0]['extra_value_id'].toString();\n    let filtered = extras.filter(item => {\n      var mySet = new Set(item['up']);\n      if (mySet.has(up.join(''))) return true;\n      return false;\n    });\n\n    if (filtered.length == 0) {\n      //up.pop();\n      break;\n    }\n\n    result.push(filtered);\n    i++;\n  }\n  var index = stocks.findIndex(item => item['extras'] == up.join(''));\n  return {\n    stock: stocks[index],\n    extras: result\n  };\n}","map":{"version":3,"names":["sortExtras","object","initialAddons","extras","stocks","up","i","length","sort","a","b","extra_group_id","k","extra","Object","assign","index","findIndex","item","push","toString","mdata","id","price","quantity","countable_id","discount","tax","total_price","bonus","stock","getExtras","extrasIdsArray","splitted","split","result","filtered","filter","mySet","Set","has","join"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/helpers/getExtras.js"],"sourcesContent":["export function sortExtras(object, initialAddons) {\n  var extras = [];\n  var stocks = [];\n  var up = '';\n\n  for (var i = 0; i < object['stocks']?.length; i++) {\n    up = '';\n    object['stocks'][i]['extras'].sort((a, b) => a.extra_group_id - b.extra_group_id);\n    for (var k = 0; k < object['stocks'][i]['extras']?.length; k++) {\n      var extra = Object.assign({}, object['stocks'][i]['extras'][k]);\n       var index = extras.findIndex((item) => item['extra_value_id'] == extra['extra_value_id']);\n      if (index == -1) {\n        extra['level'] = k;\n        extra['up'] = [up];\n        extras.push(extra);\n        up += extra['extra_value_id'].toString();\n      } else {\n        extras[index]['up'].push(up);\n        up += extra['extra_value_id'].toString();\n      }\n    }\n    var mdata = {\n      id: object['stocks'][i]['id'],\n      extras: up,\n      price: object['stocks'][i]['price'],\n      quantity: object['stocks'][i]['quantity'],\n      countable_id: object['stocks'][i]['countable_id'],\n      discount: object['stocks'][i]['discount'],\n      tax: object['stocks'][i]['tax'],\n      total_price: object['stocks'][i]['total_price'],\n      bonus: object['stocks'][i]['bonus'],\n     };\n\n    stocks.push(mdata);\n  }\n\n  return {\n    stock: stocks,\n    extras: extras,\n  };\n}\n\nexport function getExtras(extrasIdsArray, extras, stocks) {\n  var splitted = extrasIdsArray == '' ? [] : extrasIdsArray.split(',');\n  var result = [];\n  var up = [];\n  for (var i = 0; i <= splitted.length; i++) {\n    if (i - 1 >= 0) up[up.length] = splitted[i - 1].toString();\n    var filtered = extras.filter((item) => {\n      var mySet = new Set(item['up']);\n      if (mySet.has(up.join(''))) return item;\n    });\n    if (filtered.length > 0) result.push(filtered);\n  }\n  var i = 0;\n  if (up.length < result.length)\n    while (i < extras.length) {\n      up[up.length] = result[result.length - 1][0]['extra_value_id'].toString();\n      let filtered = extras.filter((item) => {\n        var mySet = new Set(item['up']);\n        if (mySet.has(up.join(''))) return true;\n        return false\n      });\n      if (filtered.length == 0) {\n        //up.pop();\n        break;\n      }\n      result.push(filtered);\n      i++;\n    }\n  var index = stocks.findIndex((item) => item['extras'] == up.join(''));\n  return {\n    stock: stocks[index],\n    extras: result,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}