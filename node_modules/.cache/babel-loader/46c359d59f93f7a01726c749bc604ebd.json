{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/upload/gallery-item.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Card, Col, Image, Row, Pagination } from 'antd';\nimport { ArrowLeftOutlined } from '@ant-design/icons';\nimport { FcOpenedFolder } from 'react-icons/fc';\nimport galleryService from '../../services/gallery';\nimport { useTranslation } from 'react-i18next';\nimport getImage from '../../helpers/getImage';\nimport Loading from '../../components/loading';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst GalleryItem = _ref => {\n  _s();\n\n  let {\n    type,\n    setCurrentType,\n    setImageList,\n    imageList,\n    setIsModalOpen,\n    form,\n    name: item_name\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [languages, setLanguages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [pageSize, setPageSize] = useState(10);\n  const [page, setPage] = useState(1);\n  const [meta, setMeta] = useState({});\n\n  const fetchGallery = () => {\n    const params = {\n      type,\n      perPage: pageSize,\n      page: page\n    };\n    setLoading(true);\n    galleryService.getAll(params).then(res => {\n      setLanguages(res.data.data);\n      setMeta(res.data);\n    }).finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    fetchGallery();\n  }, [page, pageSize]);\n\n  const onChangePagination = (pageNumber, e) => {\n    setPage(pageNumber);\n    setPageSize(e);\n  };\n\n  const createImage = file => {\n    return {\n      uid: file,\n      name: file,\n      status: 'done',\n      // done, uploading, error\n      url: file,\n      created: true\n    };\n  };\n\n  const handleImage = name => {\n    const include = imageList.includes(name);\n    if (include) toast.warn('This image is already uploaded');else {\n      setIsModalOpen(false);\n      setImageList(prev => [...prev, createImage(name)]);\n\n      if (Boolean(item_name)) {\n        form.setFieldsValue({\n          [item_name]: createImage(name)\n        });\n      } else {\n        form.setFieldsValue({\n          images: [...imageList, createImage(name)]\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"gallery-item \",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mr-3\",\n          onClick: () => setCurrentType(null),\n          children: /*#__PURE__*/_jsxDEV(ArrowLeftOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FcOpenedFolder, {\n          style: {\n            fontSize: '25px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2\",\n          children: t('gallery')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this),\n      children: !loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          gutter: [24, 24],\n          children: languages === null || languages === void 0 ? void 0 : languages.map((item, index) => /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: `mb-0 ${item.isset ? 'card-noActive' : 'card-active'} card-image`,\n              children: /*#__PURE__*/_jsxDEV(Image, {\n                preview: false,\n                src: getImage(item.path),\n                className: \"images\",\n                alt: 'images',\n                onClick: () => handleImage(item.path)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 19\n            }, this)\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-end mt-5\",\n          children: /*#__PURE__*/_jsxDEV(Pagination, {\n            total: meta.total,\n            pageSize: pageSize,\n            current: page,\n            onChange: onChangePagination\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(GalleryItem, \"yABNVwFTWTe1/z/LjTqjfaqO7Fg=\", false, function () {\n  return [useTranslation];\n});\n\n_c = GalleryItem;\nexport default GalleryItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"GalleryItem\");","map":{"version":3,"names":["React","useEffect","useState","Card","Col","Image","Row","Pagination","ArrowLeftOutlined","FcOpenedFolder","galleryService","useTranslation","getImage","Loading","toast","GalleryItem","type","setCurrentType","setImageList","imageList","setIsModalOpen","form","name","item_name","t","languages","setLanguages","loading","setLoading","pageSize","setPageSize","page","setPage","meta","setMeta","fetchGallery","params","perPage","getAll","then","res","data","finally","onChangePagination","pageNumber","e","createImage","file","uid","status","url","created","handleImage","include","includes","warn","prev","Boolean","setFieldsValue","images","fontSize","map","item","index","isset","path","id","total"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/upload/gallery-item.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, Col, Image, Row, Pagination } from 'antd';\nimport { ArrowLeftOutlined } from '@ant-design/icons';\nimport { FcOpenedFolder } from 'react-icons/fc';\nimport galleryService from '../../services/gallery';\nimport { useTranslation } from 'react-i18next';\nimport getImage from '../../helpers/getImage';\nimport Loading from '../../components/loading';\nimport { toast } from 'react-toastify';\n\nconst GalleryItem = ({\n  type,\n  setCurrentType,\n  setImageList,\n  imageList,\n  setIsModalOpen,\n  form,\n  name: item_name,\n}) => {\n  const { t } = useTranslation();\n  const [languages, setLanguages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [pageSize, setPageSize] = useState(10);\n  const [page, setPage] = useState(1);\n  const [meta, setMeta] = useState({});\n\n  const fetchGallery = () => {\n    const params = {\n      type,\n      perPage: pageSize,\n      page: page,\n    };\n    setLoading(true);\n    galleryService\n      .getAll(params)\n      .then((res) => {\n        setLanguages(res.data.data);\n        setMeta(res.data);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    fetchGallery();\n  }, [page, pageSize]);\n\n  const onChangePagination = (pageNumber, e) => {\n    setPage(pageNumber);\n    setPageSize(e);\n  };\n\n  const createImage = (file) => {\n    return {\n      uid: file,\n      name: file,\n      status: 'done', // done, uploading, error\n      url: file,\n      created: true,\n    };\n  };\n\n  const handleImage = (name) => {\n    const include = imageList.includes(name);\n    if (include) toast.warn('This image is already uploaded');\n    else {\n      setIsModalOpen(false);\n      setImageList((prev) => [...prev, createImage(name)]);\n      if (Boolean(item_name)) {\n        form.setFieldsValue({\n          [item_name]: createImage(name),\n        });\n      } else {\n        form.setFieldsValue({\n          images: [...imageList, createImage(name)],\n        });\n      }\n    }\n  };\n\n  return (\n    <div className='gallery-item '>\n      <Card\n        title={\n          <div className='d-flex align-items-center'>\n            <span className='mr-3' onClick={() => setCurrentType(null)}>\n              <ArrowLeftOutlined />\n            </span>\n            <FcOpenedFolder style={{ fontSize: '25px' }} />\n            <span className='ml-2'>{t('gallery')}</span>\n          </div>\n        }\n      >\n        {!loading ? (\n          <>\n            <Row gutter={[24, 24]}>\n              {languages?.map((item, index) => (\n                <Col key={item.id}>\n                  <Card\n                    className={`mb-0 ${\n                      item.isset ? 'card-noActive' : 'card-active'\n                    } card-image`}\n                  >\n                    <Image\n                      preview={false}\n                      src={getImage(item.path)}\n                      className='images'\n                      alt={'images'}\n                      onClick={() => handleImage(item.path)}\n                    />\n                  </Card>\n                </Col>\n              ))}\n            </Row>\n            <div className='d-flex justify-content-end mt-5'>\n              <Pagination\n                total={meta.total}\n                pageSize={pageSize}\n                current={page}\n                onChange={onChangePagination}\n              />\n            </div>\n          </>\n        ) : (\n          <Loading />\n        )}\n      </Card>\n    </div>\n  );\n};\n\nexport default GalleryItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}