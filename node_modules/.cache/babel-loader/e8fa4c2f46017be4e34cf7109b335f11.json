{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/products/product-request-edit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { steps } from './steps';\nimport { Card, Spin, Steps } from 'antd';\nimport ProductProperty from './product-property';\nimport ProductFinish from './product-finish';\nimport ProductStock from './product-stock';\nimport ProductExtras from './product-extras';\nimport ProductsIndex from './products-index';\nimport LanguageList from 'components/language-list';\nimport { useParams } from 'react-router-dom';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, disableRefetch, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport { useQueryParams } from 'helpers/useQueryParams';\nimport requestModelsService from 'services/request-models';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Step\n} = Steps;\n\nconst ProductRequestModelEdit = () => {\n  _s();\n\n  var _queryParams$values;\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    id\n  } = useParams();\n  const queryParams = useQueryParams();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const current = Number(((_queryParams$values = queryParams.values) === null || _queryParams$values === void 0 ? void 0 : _queryParams$values.step) || 0);\n  const [loading, setLoading] = useState(activeMenu.refetch);\n\n  const next = () => {\n    const step = current + 1;\n    queryParams.set('step', step);\n  };\n\n  const prev = () => {\n    const step = current - 1;\n    queryParams.set('step', step);\n  };\n\n  function fetchProductRequest(alias) {\n    setLoading(true);\n    requestModelsService.getById(alias).then(res => {\n      var _res$data$model;\n\n      let request = res.data.data;\n      dispatch(setMenuData({\n        activeMenu,\n        data: { ...request,\n          request_id: res.data.id,\n          actualStocks: (_res$data$model = res.data.model) === null || _res$data$model === void 0 ? void 0 : _res$data$model.stocks,\n          model_id: res.data.model_id,\n          model: res.data.model\n        }\n      }));\n    }).finally(() => {\n      setLoading(false);\n      dispatch(disableRefetch(activeMenu));\n    });\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchProductRequest(id);\n    }\n  }, [activeMenu.refetch, id]);\n\n  const onChange = step => {\n    dispatch(setMenuData({\n      activeMenu,\n      data: { ...activeMenu.data,\n        step\n      }\n    }));\n    queryParams.set('step', step);\n  }; // useEffect(() => {\n  //   return () => {\n  //     const nextUrl = 'catalog/products';\n  //     dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n  //   };\n  // }, []);\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      title: t('edit.food'),\n      extra: /*#__PURE__*/_jsxDEV(LanguageList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 43\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Steps, {\n        current: current,\n        onChange: onChange,\n        children: steps.map(item => /*#__PURE__*/_jsxDEV(Step, {\n          title: t(item.title)\n        }, item.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), !loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: [steps[current].content === 'First-content' && /*#__PURE__*/_jsxDEV(ProductsIndex, {\n        isRequest: true,\n        next: next,\n        action_type: 'edit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this), steps[current].content === 'Second-content' && /*#__PURE__*/_jsxDEV(ProductExtras, {\n        isRequest: true,\n        next: next,\n        prev: prev\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), steps[current].content === 'Third-content' && /*#__PURE__*/_jsxDEV(ProductStock, {\n        isRequest: true,\n        next: next,\n        prev: prev\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), steps[current].content === 'Fourth-content' && /*#__PURE__*/_jsxDEV(ProductProperty, {\n        isRequest: true,\n        next: next,\n        prev: prev\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), steps[current].content === 'Finish-content' && /*#__PURE__*/_jsxDEV(ProductFinish, {\n        isRequest: true,\n        prev: prev\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {\n        size: \"large\",\n        className: \"py-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ProductRequestModelEdit, \"s0WS4PsC7gfIz6oRj9dbLxFJOOE=\", false, function () {\n  return [useTranslation, useParams, useQueryParams, useSelector, useDispatch];\n});\n\n_c = ProductRequestModelEdit;\nexport default ProductRequestModelEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductRequestModelEdit\");","map":{"version":3,"names":["React","useEffect","useState","steps","Card","Spin","Steps","ProductProperty","ProductFinish","ProductStock","ProductExtras","ProductsIndex","LanguageList","useParams","shallowEqual","useDispatch","useSelector","removeFromMenu","disableRefetch","setMenuData","useTranslation","useQueryParams","requestModelsService","Step","ProductRequestModelEdit","t","id","queryParams","activeMenu","state","menu","dispatch","current","Number","values","step","loading","setLoading","refetch","next","set","prev","fetchProductRequest","alias","getById","then","res","request","data","request_id","actualStocks","model","stocks","model_id","finally","onChange","map","item","title","content"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/products/product-request-edit.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { steps } from './steps';\nimport { Card, Spin, Steps } from 'antd';\nimport ProductProperty from './product-property';\nimport ProductFinish from './product-finish';\nimport ProductStock from './product-stock';\nimport ProductExtras from './product-extras';\nimport ProductsIndex from './products-index';\nimport LanguageList from 'components/language-list';\nimport { useParams } from 'react-router-dom';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport {\n  removeFromMenu,\n  disableRefetch,\n  setMenuData,\n} from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport { useQueryParams } from 'helpers/useQueryParams';\nimport requestModelsService from 'services/request-models';\n\nconst { Step } = Steps;\n\nconst ProductRequestModelEdit = () => {\n  const { t } = useTranslation();\n  const { id } = useParams();\n  const queryParams = useQueryParams();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n\n  const current = Number(queryParams.values?.step || 0);\n  const [loading, setLoading] = useState(activeMenu.refetch);\n  const next = () => {\n    const step = current + 1;\n    queryParams.set('step', step);\n  };\n  const prev = () => {\n    const step = current - 1;\n    queryParams.set('step', step);\n  };\n\n  function fetchProductRequest(alias) {\n    setLoading(true);\n    requestModelsService\n      .getById(alias)\n      .then((res) => {\n        let request = res.data.data;\n\n        dispatch(\n          setMenuData({\n            activeMenu,\n            data: {\n              ...request,\n              request_id: res.data.id,\n              actualStocks: res.data.model?.stocks,\n              model_id: res.data.model_id,\n              model: res.data.model\n            },\n          })\n        );\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchProductRequest(id);\n    }\n  }, [activeMenu.refetch, id]);\n\n  const onChange = (step) => {\n    dispatch(setMenuData({ activeMenu, data: { ...activeMenu.data, step } }));\n    queryParams.set('step', step);\n  };\n\n  // useEffect(() => {\n  //   return () => {\n  //     const nextUrl = 'catalog/products';\n  //     dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n  //   };\n  // }, []);\n\n  return (\n    <>\n      <Card title={t('edit.food')} extra={<LanguageList />}>\n        <Steps current={current} onChange={onChange}>\n          {steps.map((item) => (\n            <Step title={t(item.title)} key={item.title} />\n          ))}\n        </Steps>\n      </Card>\n      {!loading ? (\n        <div className=''>\n          {steps[current].content === 'First-content' && (\n            <ProductsIndex isRequest next={next} action_type={'edit'} />\n          )}\n\n          {steps[current].content === 'Second-content' && (\n            <ProductExtras isRequest next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Third-content' && (\n            <ProductStock isRequest next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Fourth-content' && (\n            <ProductProperty isRequest next={next} prev={prev} />\n          )}\n\n          {steps[current].content === 'Finish-content' && (\n            <ProductFinish isRequest prev={prev} />\n          )}\n        </div>\n      ) : (\n        <div className='d-flex justify-content-center align-items-center'>\n          <Spin size='large' className='py-5' />\n        </div>\n      )}\n    </>\n  );\n};\nexport default ProductRequestModelEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}