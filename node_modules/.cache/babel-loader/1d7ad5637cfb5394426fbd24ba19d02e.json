{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import{steps}from'./steps';import{Card,Steps}from'antd';import ProductProperty from'./product-property';import ProductFinish from'./product-finish';import ProductStock from'./product-stock';import ProductExtras from'./product-extras';import ProductsIndex from'./products-index';import LanguageList from'../../components/language-list';import{shallowEqual,useSelector}from'react-redux';import{useTranslation}from'react-i18next';import ProductGallery from'./product-gallery';import ProductDigital from'./product-digital';import Wholesale from'./wholesale';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const{Step}=Steps;const ProductsAdd=()=>{var _activeMenu$data,_activeMenu$data2,_filteredExtras$value,_activeMenu$data3,_activeMenu$data4;const{t}=useTranslation();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const[current,setCurrent]=useState(((_activeMenu$data=activeMenu.data)===null||_activeMenu$data===void 0?void 0:_activeMenu$data.step)||0);const[newSteps,setNewSteps]=useState(steps);const{extras}=(activeMenu===null||activeMenu===void 0?void 0:activeMenu.data)||{};const isDigital=activeMenu===null||activeMenu===void 0?void 0:(_activeMenu$data2=activeMenu.data)===null||_activeMenu$data2===void 0?void 0:_activeMenu$data2.digital;const isTypeColorExists=extras===null||extras===void 0?void 0:extras.some(extra=>{var _extra$group;return(extra===null||extra===void 0?void 0:(_extra$group=extra.group)===null||_extra$group===void 0?void 0:_extra$group.type)==='color';});const filteredExtras=useMemo(()=>extras===null||extras===void 0?void 0:extras.find(item=>{var _item$group;return(item===null||item===void 0?void 0:(_item$group=item.group)===null||_item$group===void 0?void 0:_item$group.type)==='color';}),[extras]);const uniqueData=Array.from(new Set(filteredExtras===null||filteredExtras===void 0?void 0:(_filteredExtras$value=filteredExtras.values)===null||_filteredExtras$value===void 0?void 0:_filteredExtras$value.map(item=>item.value))).map(value=>{var _filteredExtras$value2;return filteredExtras===null||filteredExtras===void 0?void 0:(_filteredExtras$value2=filteredExtras.values)===null||_filteredExtras$value2===void 0?void 0:_filteredExtras$value2.find(item=>item.value===value);});const colorItems=uniqueData.filter(item=>item.group_type==='color');const next=()=>{const step=current+1;setCurrent(step);};const prev=()=>{const step=current-1;setCurrent(step);};useEffect(()=>{if(isDigital){setNewSteps(steps.filter(item=>item.title!=='product.extras'));}else if(isDigital===false){setNewSteps(steps.filter(item=>item.title!=='product.digital'));}if(isTypeColorExists){setNewSteps(prev=>prev);}else{setNewSteps(prev=>prev.filter(item=>item.title!=='Gallery'));}},[isTypeColorExists,isDigital]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Card,{title:t('add.product'),extra:/*#__PURE__*/_jsx(LanguageList,{}),children:/*#__PURE__*/_jsx(Steps,{current:current,children:newSteps.map(item=>/*#__PURE__*/_jsx(Step,{title:t(item.title)},item.title))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"steps-content\",children:[newSteps[current].content==='First-content'&&/*#__PURE__*/_jsx(ProductsIndex,{next:next}),((_activeMenu$data3=activeMenu.data)===null||_activeMenu$data3===void 0?void 0:_activeMenu$data3.digital)&&newSteps[current].content==='Product-digital'&&/*#__PURE__*/_jsx(ProductDigital,{next:next,prev:prev}),!((_activeMenu$data4=activeMenu.data)!==null&&_activeMenu$data4!==void 0&&_activeMenu$data4.digital)&&newSteps[current].content==='Second-content'&&/*#__PURE__*/_jsx(ProductExtras,{next:next,prev:prev}),newSteps[current].content==='Third-content'&&/*#__PURE__*/_jsx(ProductStock,{next:next,prev:prev}),newSteps[current].content==='wholesale-content'&&/*#__PURE__*/_jsx(Wholesale,{next:next,prev:prev}),(colorItems===null||colorItems===void 0?void 0:colorItems.length)>0&&newSteps[current].content==='Gallery-content'&&/*#__PURE__*/_jsx(ProductGallery,{next:next,prev:prev}),newSteps[current].content==='Fourth-content'&&/*#__PURE__*/_jsx(ProductProperty,{next:next,prev:prev}),newSteps[current].content==='Finish-content'&&/*#__PURE__*/_jsx(ProductFinish,{prev:prev})]})]});};export default ProductsAdd;","map":null,"metadata":{},"sourceType":"module"}