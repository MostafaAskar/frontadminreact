{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/recepts/recept-add.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form, Steps } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from '../../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from '../../../components/language-list';\nimport sellerReceptService from '../../../services/seller/reciept';\nimport { steps } from './steps';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Step\n} = Steps;\n\nconst ReceptAdd = () => {\n  _s();\n\n  var _activeMenu$data, _activeMenu$data2, _activeMenu$data3;\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const [image, setImage] = useState((_activeMenu$data = activeMenu.data) !== null && _activeMenu$data !== void 0 && _activeMenu$data.image ? [(_activeMenu$data2 = activeMenu.data) === null || _activeMenu$data2 === void 0 ? void 0 : _activeMenu$data2.image] : []);\n  const [current, setCurrent] = useState(((_activeMenu$data3 = activeMenu.data) === null || _activeMenu$data3 === void 0 ? void 0 : _activeMenu$data3.step) || 0);\n\n  const next = () => {\n    const step = current + 1;\n    setCurrent(step);\n  };\n\n  const prev = () => {\n    const step = current - 1;\n    setCurrent(step);\n  };\n\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({\n        activeMenu,\n        data\n      }));\n    };\n  }, []);\n\n  const onFinish = values => {\n    var _values$stocks, _values$nutrition;\n\n    form.validateFields();\n    const body = { ...values,\n      total_time: values.total_time.toString(),\n      active_time: values.active_time.toString(),\n      images: image === null || image === void 0 ? void 0 : image.map(img => img.name),\n      category_id: values.category_id.value,\n      stocks: (_values$stocks = values.stocks) === null || _values$stocks === void 0 ? void 0 : _values$stocks.map(stock => ({\n        min_quantity: stock.min_quantity,\n        stock_id: stock.stock_id.value\n      })),\n      nutrition: (_values$nutrition = values.nutrition) === null || _values$nutrition === void 0 ? void 0 : _values$nutrition.map(nutrition => ({ ...nutrition,\n        percentage: nutrition.percentage.toString(),\n        weight: nutrition.weight.toString()\n      }))\n    };\n    setLoadingBtn(true);\n    const nextUrl = 'seller/recept';\n    sellerReceptService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      navigate(`/${nextUrl}`);\n      dispatch(removeFromMenu({ ...activeMenu,\n        nextUrl\n      }));\n    }).finally(() => setLoadingBtn(false));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('add.recepe'),\n    extra: /*#__PURE__*/_jsxDEV(LanguageList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 42\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      onFinish: onFinish,\n      form: form,\n      initialValues: {\n        active: true,\n        ...activeMenu.data\n      },\n      children: [/*#__PURE__*/_jsxDEV(Steps, {\n        current: current,\n        children: steps.map(item => /*#__PURE__*/_jsxDEV(Step, {\n          title: t(item.title)\n        }, item.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), steps.map(item => {\n        const Component = item.content;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `steps-content ${item.step !== current + 1 && 'hidden'}`,\n          children: /*#__PURE__*/_jsxDEV(Component, {\n            next: next,\n            prev: prev,\n            loading: loadingBtn,\n            image: image,\n            setImage: setImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)\n        }, item.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ReceptAdd, \"8c0XmtodBq93eOl2Xv93VPhXh28=\", false, function () {\n  return [useTranslation, useSelector, useDispatch, Form.useForm, useNavigate];\n});\n\n_c = ReceptAdd;\nexport default ReceptAdd;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReceptAdd\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","toast","Card","Form","Steps","shallowEqual","useDispatch","useSelector","removeFromMenu","setMenuData","useTranslation","LanguageList","sellerReceptService","steps","Step","ReceptAdd","t","activeMenu","state","menu","dispatch","form","useForm","navigate","image","setImage","data","current","setCurrent","step","next","prev","loadingBtn","setLoadingBtn","getFieldsValue","onFinish","values","validateFields","body","total_time","toString","active_time","images","map","img","name","category_id","value","stocks","stock","min_quantity","stock_id","nutrition","percentage","weight","nextUrl","create","then","success","finally","active","item","title","Component","content"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/recepts/recept-add.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form, Steps } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from '../../../redux/slices/menu';\n\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from '../../../components/language-list';\nimport sellerReceptService from '../../../services/seller/reciept';\nimport { steps } from './steps';\n\nconst { Step } = Steps;\n\nconst ReceptAdd = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const [image, setImage] = useState(\n    activeMenu.data?.image ? [activeMenu.data?.image] : []\n  );\n\n  const [current, setCurrent] = useState(activeMenu.data?.step || 0);\n\n  const next = () => {\n    const step = current + 1;\n    setCurrent(step);\n  };\n\n  const prev = () => {\n    const step = current - 1;\n    setCurrent(step);\n  };\n  const [loadingBtn, setLoadingBtn] = useState(false);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n  }, []);\n\n  const onFinish = (values) => {\n    form.validateFields();\n    const body = {\n      ...values,\n      total_time: values.total_time.toString(),\n      active_time: values.active_time.toString(),\n      images: image?.map((img) => img.name),\n      category_id: values.category_id.value,\n      stocks: values.stocks?.map((stock) => ({\n        min_quantity: stock.min_quantity,\n        stock_id: stock.stock_id.value,\n      })),\n      nutrition: values.nutrition?.map((nutrition) => ({\n        ...nutrition,\n        percentage: nutrition.percentage.toString(),\n        weight: nutrition.weight.toString(),\n      })),\n    };\n    setLoadingBtn(true);\n    const nextUrl = 'seller/recept';\n    sellerReceptService\n      .create(body)\n      .then(() => {\n        toast.success(t('successfully.created'));\n        navigate(`/${nextUrl}`);\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  return (\n    <Card title={t('add.recepe')} extra={<LanguageList />}>\n      <Form\n        layout='vertical'\n        onFinish={onFinish}\n        form={form}\n        initialValues={{ active: true, ...activeMenu.data }}\n      >\n        <Steps current={current}>\n          {steps.map((item) => (\n            <Step title={t(item.title)} key={item.title} />\n          ))}\n        </Steps>\n        {steps.map((item) => {\n          const Component = item.content;\n          return (\n            <div\n              key={item.title}\n              className={`steps-content ${\n                item.step !== current + 1 && 'hidden'\n              }`}\n            >\n              <Component\n                next={next}\n                prev={prev}\n                loading={loadingBtn}\n                image={image}\n                setImage={setImage}\n              />\n            </div>\n          );\n        })}\n      </Form>\n    </Card>\n  );\n};\n\nexport default ReceptAdd;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}