{"ast":null,"code":"import React,{useMemo}from'react';import{Badge,Card,Select,Spin}from'antd';import ChartWidget from'../../components/chart-widget';import numberToPrice from'../../helpers/numberToPrice';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{COLORS}from'../../constants/ChartConstant';import moment from'moment';import{fetchOrderSales,fetchSellerOrderSales,filterOrderSales}from'../../redux/slices/statistics/orderSales';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SalesChart(){const{t}=useTranslation();const dispatch=useDispatch();const{defaultCurrency}=useSelector(state=>state.currency,shallowEqual);const{sales,params,loading}=useSelector(state=>state.orderSales,shallowEqual);const{role}=useSelector(state=>state.auth.user,shallowEqual);const{direction}=useSelector(state=>state.theme.theme,shallowEqual);const categories=useMemo(()=>sales.map(item=>moment(item.time).format('D MMM')),[sales]);const chartData=useMemo(()=>{return[{name:t('sales'),data:(sales===null||sales===void 0?void 0:sales.map(item=>item.total_price.toFixed(2)))||[]}];},[sales]);const handleChange=value=>{const payload={time:value};dispatch(filterOrderSales(payload));switch(role){case'admin':dispatch(fetchOrderSales(payload));break;case'seller':dispatch(fetchSellerOrderSales(payload));break;default:break;}};return/*#__PURE__*/_jsxs(Card,{className:\"h-100\",title:t('sales'),extra:/*#__PURE__*/_jsxs(Select,{value:params.time,size:\"small\",style:{minWidth:110},onSelect:handleChange,defaultValue:\"subMonth\",children:[/*#__PURE__*/_jsx(Select.Option,{value:\"subWeek\",children:t('this.week')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subMonth\",children:t('this.month')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subYear\",children:t('this.year')})]}),children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mr-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-weight-bold mb-1\",children:numberToPrice(sales.reduce((total,item)=>total+=item.total_price,0),defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.symbol,defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.position)}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Badge,{color:COLORS[0]}),t('total.sales.amount')]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ChartWidget,{card:false,type:\"area\",series:chartData,xAxis:categories,height:280,customOptions:{colors:COLORS,legend:{show:false},stroke:{width:2.5,curve:'smooth'}},direction:direction})})]});}","map":null,"metadata":{},"sourceType":"module"}