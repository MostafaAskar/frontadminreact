{"ast":null,"code":"import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import{Card,Form}from'antd';import{batch,shallowEqual,useDispatch,useSelector}from'react-redux';import{removeFromMenu,setMenuData}from'../../redux/slices/menu';import{fetchBanners}from'../../redux/slices/banner';import bannerService from'../../services/banner';import{useTranslation}from'react-i18next';import getTranslationFields from'../../helpers/getTranslationFields';import LanguageList from'../../components/language-list';import BannerForm from'./banner-form';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BannerAdd=()=>{const{t}=useTranslation();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const dispatch=useDispatch();const[form]=Form.useForm();const navigate=useNavigate();const{languages}=useSelector(state=>state.formLang,shallowEqual);useEffect(()=>{return()=>{const data=form.getFieldsValue(true);dispatch(setMenuData({activeMenu,data}));};},[]);const onFinish=(values,image,mediaList)=>{var _values$products;const videos=mediaList.images.map(item=>item.name);const previews=mediaList.previews.map(item=>item.name);const body={products:(_values$products=values.products)===null||_values$products===void 0?void 0:_values$products.map(i=>i.value),images:[...videos,...image.map(image=>image.name)],previews,clickable:true,title:getTranslationFields(languages,values,'title'),description:getTranslationFields(languages,values,'description')};const nextUrl='banners';return bannerService.create(body).then(()=>{toast.success(t('successfully.created'));batch(()=>{dispatch(removeFromMenu({...activeMenu,nextUrl}));dispatch(fetchBanners({}));});navigate(`/${nextUrl}`);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Card,{title:t('add.banner'),extra:/*#__PURE__*/_jsx(LanguageList,{})}),/*#__PURE__*/_jsx(BannerForm,{form:form,handleSubmit:onFinish})]});};export default BannerAdd;","map":null,"metadata":{},"sourceType":"module"}