{"ast":null,"code":"import React,{Fragment,useEffect,useState}from'react';import{Form,Row,Col,Card,Select,Input,Button,Space}from'antd';import{DeleteOutlined}from'@ant-design/icons';import{useTranslation}from'react-i18next';import sellerShopSocialService from'services/seller/shop-social';import{shallowEqual,useSelector}from'react-redux';import Loading from'components/loading';import useDidUpdate from'helpers/useDidUpdate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const defaultSocialMediaOptions=[{label:'Facebook',value:'facebook'},{label:'Instagram',value:'instagram'},{label:'Telegram',value:'telegram'},{label:'Youtube',value:'youtube'},{label:'LinkedIn',value:'linkedin'},{label:'Snapchat',value:'snapchat'},{label:'WeChat',value:'wechat'},{label:'WhatsApp',value:'whatsapp'},{label:'Twitch',value:'twitch'},{label:'Discord',value:'discord'},{label:'Pinterest',value:'pinterest'},{label:'Steam',value:'steam'},{label:'Spotify',value:'spotify'},{label:'Reddit',value:'reddit'},{label:'Skype',value:'skype'},{label:'Twitter',value:'twitter'}];export default function ShopSocial(_ref){let{prev,next}=_ref;const{t}=useTranslation();const{myShop}=useSelector(state=>state.myShop,shallowEqual);const[socialMediaOptions,setSocialMediaOptions]=useState(defaultSocialMediaOptions);const[socialList,setSocialList]=useState([{type:'',content:'',id:generateShortUUID()}]);const[loading,setLoading]=useState(false);const[loadingBtn,setLoadingBtn]=useState(false);function generateShortUUID(){let length=arguments.length>0&&arguments[0]!==undefined?arguments[0]:8;const chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';let result='';for(let i=0;i<length;i++){const randomIndex=Math.floor(Math.random()*chars.length);result+=chars[randomIndex];}return result;}const addSocialMedia=()=>{setSocialList([...socialList,{type:'',content:'',id:generateShortUUID()}]);};const removeSocialMedia=remove=>{setSocialList(socialList.filter(item=>item.id!==remove.id));};const handleChange=(type,changeId,value)=>{setSocialList(socialList.flatMap(item=>item.id===changeId?{...item,[type]:value}:item));};useEffect(()=>{setLoading(true);const paramsData={shop_id:myShop.id};sellerShopSocialService.getAll(paramsData).then(res=>{var _res$data;if((_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.length){setSocialList(res.data.map(item=>({type:item.type,content:item.content,id:generateShortUUID()})));}}).finally(()=>setLoading(false));},[myShop.id]);useDidUpdate(()=>{});const onFinish=()=>{setLoadingBtn(true);const body={data:socialList.map(item=>{if(!item.type||!item.content)return null;return{type:item.type,content:item.content};}).filter(item=>!!item)};return sellerShopSocialService.create(body).then(()=>next()).finally(()=>setLoadingBtn(false));};return/*#__PURE__*/_jsx(Fragment,{children:!loading?/*#__PURE__*/_jsxs(Form,{onFinish:onFinish,layout:\"vertical\",children:[/*#__PURE__*/_jsxs(Card,{children:[socialList.map((socialItem,index)=>/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:9,children:/*#__PURE__*/_jsx(Form.Item,{label:t('type'),children:/*#__PURE__*/_jsx(Select,{showSearch:true,options:socialMediaOptions,value:socialItem.type,onChange:value=>handleChange('type',socialItem.id,value)})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('url'),children:/*#__PURE__*/_jsx(Input,{value:socialItem.content,onChange:value=>handleChange('content',socialItem.id,value.target.value)})})}),socialList.length>1&&/*#__PURE__*/_jsx(Col,{span:3,style:{display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),onClick:()=>removeSocialMedia(socialItem)})})]},index)),/*#__PURE__*/_jsx(Button,{className:\"w-100 my-3\",type:\"dashed\",onClick:addSocialMedia,children:t('add.social')})]}),/*#__PURE__*/_jsxs(Space,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Button,{onClick:prev,children:t('prev')}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:!!loadingBtn,children:t('next')})]})]}):/*#__PURE__*/_jsx(Loading,{})});}","map":null,"metadata":{},"sourceType":"module"}