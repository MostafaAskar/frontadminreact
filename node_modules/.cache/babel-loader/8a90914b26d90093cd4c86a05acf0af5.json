{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/banners/banner-add.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from '../../redux/slices/menu';\nimport { fetchBanners } from '../../redux/slices/banner';\nimport bannerService from '../../services/banner';\nimport { useTranslation } from 'react-i18next';\nimport getTranslationFields from '../../helpers/getTranslationFields';\nimport LanguageList from '../../components/language-list';\nimport BannerForm from './banner-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst BannerAdd = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const {\n    languages\n  } = useSelector(state => state.formLang, shallowEqual);\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({\n        activeMenu,\n        data\n      }));\n    };\n  }, []);\n\n  const onFinish = (values, image, mediaList) => {\n    var _values$products;\n\n    const videos = mediaList.images.map(item => item.name);\n    const previews = mediaList.previews.map(item => item.name);\n    const body = {\n      products: (_values$products = values.products) === null || _values$products === void 0 ? void 0 : _values$products.map(i => i.value),\n      images: [...videos, ...image.map(image => image.name)],\n      previews,\n      clickable: true,\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description')\n    };\n    const nextUrl = 'banners';\n    return bannerService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu,\n          nextUrl\n        }));\n        dispatch(fetchBanners({}));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      title: t('add.banner'),\n      extra: /*#__PURE__*/_jsxDEV(LanguageList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BannerForm, {\n      form: form,\n      handleSubmit: onFinish\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(BannerAdd, \"/2qflJBdFTgOt7CLbNTaPvT8Ctg=\", false, function () {\n  return [useTranslation, useSelector, useDispatch, Form.useForm, useNavigate, useSelector];\n});\n\n_c = BannerAdd;\nexport default BannerAdd;\n\nvar _c;\n\n$RefreshReg$(_c, \"BannerAdd\");","map":{"version":3,"names":["React","useEffect","useNavigate","toast","Card","Form","batch","shallowEqual","useDispatch","useSelector","removeFromMenu","setMenuData","fetchBanners","bannerService","useTranslation","getTranslationFields","LanguageList","BannerForm","BannerAdd","t","activeMenu","state","menu","dispatch","form","useForm","navigate","languages","formLang","data","getFieldsValue","onFinish","values","image","mediaList","videos","images","map","item","name","previews","body","products","i","value","clickable","title","description","nextUrl","create","then","success"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/banners/banner-add.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from '../../redux/slices/menu';\nimport { fetchBanners } from '../../redux/slices/banner';\nimport bannerService from '../../services/banner';\nimport { useTranslation } from 'react-i18next';\nimport getTranslationFields from '../../helpers/getTranslationFields';\nimport LanguageList from '../../components/language-list';\nimport BannerForm from './banner-form';\n\nconst BannerAdd = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n  }, []);\n\n  const onFinish = (values, image, mediaList) => {\n    const videos = mediaList.images.map((item) => item.name);\n    const previews = mediaList.previews.map((item) => item.name);\n    const body = {\n      products: values.products?.map((i) => i.value),\n      images: [...videos, ...image.map((image) => image.name)],\n      previews,\n      clickable: true,\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description'),\n    };\n    const nextUrl = 'banners';\n\n    return bannerService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n        dispatch(fetchBanners({}));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  return (\n    <>\n      <Card title={t('add.banner')} extra={<LanguageList />} />\n      <BannerForm form={form} handleSubmit={onFinish} />\n    </>\n  );\n};\n\nexport default BannerAdd;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}