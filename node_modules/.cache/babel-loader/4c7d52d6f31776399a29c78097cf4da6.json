{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/booking-time/time-add.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport bookingWorkingDays from 'services/seller/bookingWorkingDays';\nimport bookingClosedDays from 'services/seller/bookingClosedDays';\nimport { weeks } from 'components/shop/weeks';\nimport BookingTimeForm from 'components/forms/booking-time-form';\nimport { Form } from 'antd';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport sellerBookingTime from 'services/seller/booking-time';\nimport { toast } from 'react-toastify';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { removeFromMenu } from 'redux/slices/menu';\nimport { fetchBookingTime } from 'redux/slices/booking-time';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BookingTimeAdd = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const [form] = Form.useForm();\n  const [days, setDays] = useState([]);\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const [lines, setLines] = useState(new Array(7).fill(false));\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const {\n    myShop\n  } = useSelector(state => state.myShop, shallowEqual);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const onFinish = values => {\n    setLoadingBtn(true);\n    const closeDatesBody = {\n      dates: days ? days.map(item => moment(item).format('YYYY-MM-DD')) : undefined\n    };\n    const workingDaysBody = {\n      dates: values.working_days.map(item => ({\n        day: item.title,\n        from: moment(item.from ? item.from : '00').format('HH-mm'),\n        to: moment(item.to ? item.to : '00').format('HH-mm'),\n        disabled: item.disabled\n      }))\n    };\n    const workingMaxTime = {\n      max_time: values.max_time\n    };\n    const nextUrl = 'seller/booking/time';\n    Promise.all([sellerBookingTime.create(workingMaxTime), bookingClosedDays.update(myShop.uuid, closeDatesBody), values.working_days.length !== 0 ? bookingWorkingDays.update(myShop.uuid, workingDaysBody) : undefined]).then(() => {\n      toast.success(t('successfully.updated'));\n      dispatch(fetchBookingTime());\n      dispatch(removeFromMenu({ ...activeMenu,\n        nextUrl\n      }));\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      working_days: weeks\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(BookingTimeForm, {\n    onFinish: onFinish,\n    form: form,\n    lines: lines,\n    loadingBtn: loadingBtn,\n    days: days,\n    setDays: setDays,\n    setLines: setLines,\n    weeks: weeks\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BookingTimeAdd, \"Kx41MZFiozCts5rga0TRrefCtd0=\", false, function () {\n  return [useTranslation, Form.useForm, useSelector, useSelector, useDispatch, useNavigate];\n});\n\n_c = BookingTimeAdd;\nexport default BookingTimeAdd;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookingTimeAdd\");","map":{"version":3,"names":["React","useState","useEffect","moment","bookingWorkingDays","bookingClosedDays","weeks","BookingTimeForm","Form","shallowEqual","useSelector","sellerBookingTime","toast","useTranslation","useDispatch","useNavigate","removeFromMenu","fetchBookingTime","BookingTimeAdd","t","form","useForm","days","setDays","activeMenu","state","menu","lines","setLines","Array","fill","loadingBtn","setLoadingBtn","myShop","dispatch","navigate","onFinish","values","closeDatesBody","dates","map","item","format","undefined","workingDaysBody","working_days","day","title","from","to","disabled","workingMaxTime","max_time","nextUrl","Promise","all","create","update","uuid","length","then","success","setFieldsValue"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/booking-time/time-add.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport bookingWorkingDays from 'services/seller/bookingWorkingDays';\nimport bookingClosedDays from 'services/seller/bookingClosedDays';\nimport { weeks } from 'components/shop/weeks';\nimport BookingTimeForm from 'components/forms/booking-time-form';\nimport { Form } from 'antd';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport sellerBookingTime from 'services/seller/booking-time';\nimport { toast } from 'react-toastify';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { removeFromMenu } from 'redux/slices/menu';\nimport { fetchBookingTime } from 'redux/slices/booking-time';\n\nconst BookingTimeAdd = () => {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const [days, setDays] = useState([]);\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const [lines, setLines] = useState(new Array(7).fill(false));\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const { myShop } = useSelector((state) => state.myShop, shallowEqual);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const onFinish = (values) => {\n    setLoadingBtn(true);\n    const closeDatesBody = {\n      dates: days\n        ? days.map((item) => moment(item).format('YYYY-MM-DD'))\n        : undefined,\n    };\n\n    const workingDaysBody = {\n      dates: values.working_days.map((item) => ({\n        day: item.title,\n        from: moment(item.from ? item.from : '00').format('HH-mm'),\n        to: moment(item.to ? item.to : '00').format('HH-mm'),\n        disabled: item.disabled,\n      })),\n    };\n\n    const workingMaxTime = {\n      max_time: values.max_time,\n    };\n    const nextUrl = 'seller/booking/time';\n    Promise.all([\n      sellerBookingTime.create(workingMaxTime),\n      bookingClosedDays.update(myShop.uuid, closeDatesBody),\n      values.working_days.length !== 0\n        ? bookingWorkingDays.update(myShop.uuid, workingDaysBody)\n        : undefined,\n    ]).then(() => {\n      toast.success(t('successfully.updated'));\n      dispatch(fetchBookingTime());\n      dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      working_days: weeks,\n    });\n  }, []);\n\n  return (\n    <BookingTimeForm\n      onFinish={onFinish}\n      form={form}\n      lines={lines}\n      loadingBtn={loadingBtn}\n      days={days}\n      setDays={setDays}\n      setLines={setLines}\n      weeks={weeks}\n    />\n  );\n};\n\nexport default BookingTimeAdd;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}