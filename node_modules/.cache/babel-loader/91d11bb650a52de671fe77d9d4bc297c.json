{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/user/user-clone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Card, Form, Tabs } from 'antd';\nimport { useParams } from 'react-router-dom';\nimport * as moment from 'moment';\nimport userService from '../../services/user';\nimport Loading from '../../components/loading';\nimport UserEditForm from './userEditForm';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport UserOrders from './userOrders';\nimport WalletHistory from './walletHistory';\nimport createImage from '../../helpers/createImage';\nimport UserPassword from './userPassword';\nimport DelivertSettingCreate from './add-deliveryman-settings';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  TabPane\n} = Tabs;\n\nconst UserClone = () => {\n  _s();\n\n  var _activeMenu$data;\n\n  const {\n    t\n  } = useTranslation();\n  const [form] = Form.useForm();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const {\n    uuid\n  } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [tab, setTab] = useState('edit');\n  const [image, setImage] = useState([]);\n  const [id, setId] = useState(null);\n  const role = activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data = activeMenu.data) === null || _activeMenu$data === void 0 ? void 0 : _activeMenu$data.role;\n\n  const showUserData = uuid => {\n    setLoading(true);\n    userService.getById(uuid).then(res => {\n      var _res$data, _res$data$delivery_ma;\n\n      const data = res.data;\n      const payload = { ...data,\n        image: createImage(data.img)\n      };\n      dispatch(setMenuData({\n        activeMenu,\n        data: payload\n      }));\n      form.setFieldsValue({\n        firstname: data.firstname,\n        lastname: data.lastname,\n        email: data.email,\n        phone: data.phone,\n        birthday: moment(data.birthday),\n        gender: data.gender,\n        password_confirmation: data.password_confirmation,\n        password: data.password,\n        image: [createImage(data.img)],\n        shop_id: data.invitations.length !== 0 ? data.invitations.map(i => {\n          var _i$shop, _i$shop$translation, _i$shop2;\n\n          return {\n            label: (_i$shop = i.shop) === null || _i$shop === void 0 ? void 0 : (_i$shop$translation = _i$shop.translation) === null || _i$shop$translation === void 0 ? void 0 : _i$shop$translation.title,\n            value: (_i$shop2 = i.shop) === null || _i$shop2 === void 0 ? void 0 : _i$shop2.id\n          };\n        }) : undefined\n      });\n      setId((_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$delivery_ma = _res$data.delivery_man_setting) === null || _res$data$delivery_ma === void 0 ? void 0 : _res$data$delivery_ma.id);\n      setImage([createImage(data.img)]);\n    }).finally(() => {\n      setLoading(false);\n      dispatch(disableRefetch(activeMenu));\n    });\n  };\n\n  useEffect(() => {\n    if (activeMenu !== null && activeMenu !== void 0 && activeMenu.refetch) {\n      showUserData(uuid);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.refetch]);\n\n  const onChange = key => {\n    setTab(key);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('user.settings'),\n    children: !loading ? /*#__PURE__*/_jsxDEV(Tabs, {\n      activeKey: tab,\n      onChange: onChange,\n      tabPosition: \"left\",\n      size: \"small\",\n      children: [/*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('edit.user'),\n        children: /*#__PURE__*/_jsxDEV(UserEditForm, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data,\n          form: form,\n          image: image,\n          setImage: setImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)\n      }, 'edit', false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('orders'),\n        children: /*#__PURE__*/_jsxDEV(UserOrders, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)\n      }, 'order', false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), role === 'deliveryman' && /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('deliveryman'),\n        children: /*#__PURE__*/_jsxDEV(DelivertSettingCreate, {\n          id: id,\n          data: activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this)\n      }, 'delivery', false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('wallet'),\n        children: /*#__PURE__*/_jsxDEV(WalletHistory, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, 'wallet', false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('password'),\n        children: /*#__PURE__*/_jsxDEV(UserPassword, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)\n      }, 'password', false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserClone, \"G5mnxkOgEzbCYfYX//4qiXtGanQ=\", false, function () {\n  return [useTranslation, Form.useForm, useSelector, useDispatch, useParams];\n});\n\n_c = UserClone;\nexport default UserClone;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserClone\");","map":{"version":3,"names":["React","useEffect","useState","Card","Form","Tabs","useParams","moment","userService","Loading","UserEditForm","shallowEqual","useDispatch","useSelector","disableRefetch","setMenuData","useTranslation","UserOrders","WalletHistory","createImage","UserPassword","DelivertSettingCreate","TabPane","UserClone","t","form","useForm","activeMenu","state","menu","dispatch","uuid","loading","setLoading","tab","setTab","image","setImage","id","setId","role","data","showUserData","getById","then","res","payload","img","setFieldsValue","firstname","lastname","email","phone","birthday","gender","password_confirmation","password","shop_id","invitations","length","map","i","label","shop","translation","title","value","undefined","delivery_man_setting","finally","refetch","onChange","key"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/user/user-clone.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, Form, Tabs } from 'antd';\nimport { useParams } from 'react-router-dom';\nimport * as moment from 'moment';\nimport userService from '../../services/user';\nimport Loading from '../../components/loading';\nimport UserEditForm from './userEditForm';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport UserOrders from './userOrders';\nimport WalletHistory from './walletHistory';\nimport createImage from '../../helpers/createImage';\nimport UserPassword from './userPassword';\nimport DelivertSettingCreate from './add-deliveryman-settings';\nconst { TabPane } = Tabs;\n\nconst UserClone = () => {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const { uuid } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [tab, setTab] = useState('edit');\n  const [image, setImage] = useState([]);\n  const [id, setId] = useState(null);\n  const role = activeMenu?.data?.role;\n\n  const showUserData = (uuid) => {\n    setLoading(true);\n    userService\n      .getById(uuid)\n      .then((res) => {\n        const data = res.data;\n        const payload = {\n          ...data,\n          image: createImage(data.img),\n        };\n        dispatch(setMenuData({ activeMenu, data: payload }));\n        form.setFieldsValue({\n          firstname: data.firstname,\n          lastname: data.lastname,\n          email: data.email,\n          phone: data.phone,\n          birthday: moment(data.birthday),\n          gender: data.gender,\n          password_confirmation: data.password_confirmation,\n          password: data.password,\n          image: [createImage(data.img)],\n          shop_id:\n            data.invitations.length !== 0\n              ? data.invitations.map((i) => ({\n                  label: i.shop?.translation?.title,\n                  value: i.shop?.id,\n                }))\n              : undefined,\n        });\n        setId(res.data?.delivery_man_setting?.id);\n        setImage([createImage(data.img)]);\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  useEffect(() => {\n    if (activeMenu?.refetch) {\n      showUserData(uuid);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeMenu?.refetch]);\n\n  const onChange = (key) => {\n    setTab(key);\n  };\n\n  return (\n    <Card title={t('user.settings')}>\n      {!loading ? (\n        <Tabs\n          activeKey={tab}\n          onChange={onChange}\n          tabPosition='left'\n          size='small'\n        >\n          <TabPane key='edit' tab={t('edit.user')}>\n            <UserEditForm\n              data={activeMenu?.data}\n              form={form}\n              image={image}\n              setImage={setImage}\n            />\n          </TabPane>\n\n          <TabPane key='order' tab={t('orders')}>\n            <UserOrders data={activeMenu?.data} />\n          </TabPane>\n          {role === 'deliveryman' && (\n            <TabPane key='delivery' tab={t('deliveryman')}>\n              <DelivertSettingCreate id={id} data={activeMenu.data} />\n            </TabPane>\n          )}\n          <TabPane key='wallet' tab={t('wallet')}>\n            <WalletHistory data={activeMenu?.data} />\n          </TabPane>\n          <TabPane key='password' tab={t('password')}>\n            <UserPassword data={activeMenu?.data} />\n          </TabPane>\n        </Tabs>\n      ) : (\n        <Loading />\n      )}\n    </Card>\n  );\n};\n\nexport default UserClone;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,IAArB,QAAiC,MAAjC;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,WAApC,QAAuD,aAAvD;AACA,SAASC,cAAT,EAAyBC,WAAzB,QAA4C,yBAA5C;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,qBAAP,MAAkC,4BAAlC;;AACA,MAAM;EAAEC;AAAF,IAAcjB,IAApB;;AAEA,MAAMkB,SAAS,GAAG,MAAM;EAAA;;EAAA;;EACtB,MAAM;IAAEC;EAAF,IAAQR,cAAc,EAA5B;EACA,MAAM,CAACS,IAAD,IAASrB,IAAI,CAACsB,OAAL,EAAf;EACA,MAAM;IAAEC;EAAF,IAAiBd,WAAW,CAAEe,KAAD,IAAWA,KAAK,CAACC,IAAlB,EAAwBlB,YAAxB,CAAlC;EACA,MAAMmB,QAAQ,GAAGlB,WAAW,EAA5B;EACA,MAAM;IAAEmB;EAAF,IAAWzB,SAAS,EAA1B;EACA,MAAM,CAAC0B,OAAD,EAAUC,UAAV,IAAwB/B,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM,CAACgC,GAAD,EAAMC,MAAN,IAAgBjC,QAAQ,CAAC,MAAD,CAA9B;EACA,MAAM,CAACkC,KAAD,EAAQC,QAAR,IAAoBnC,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACoC,EAAD,EAAKC,KAAL,IAAcrC,QAAQ,CAAC,IAAD,CAA5B;EACA,MAAMsC,IAAI,GAAGb,UAAH,aAAGA,UAAH,2CAAGA,UAAU,CAAEc,IAAf,qDAAG,iBAAkBD,IAA/B;;EAEA,MAAME,YAAY,GAAIX,IAAD,IAAU;IAC7BE,UAAU,CAAC,IAAD,CAAV;IACAzB,WAAW,CACRmC,OADH,CACWZ,IADX,EAEGa,IAFH,CAESC,GAAD,IAAS;MAAA;;MACb,MAAMJ,IAAI,GAAGI,GAAG,CAACJ,IAAjB;MACA,MAAMK,OAAO,GAAG,EACd,GAAGL,IADW;QAEdL,KAAK,EAAEjB,WAAW,CAACsB,IAAI,CAACM,GAAN;MAFJ,CAAhB;MAIAjB,QAAQ,CAACf,WAAW,CAAC;QAAEY,UAAF;QAAcc,IAAI,EAAEK;MAApB,CAAD,CAAZ,CAAR;MACArB,IAAI,CAACuB,cAAL,CAAoB;QAClBC,SAAS,EAAER,IAAI,CAACQ,SADE;QAElBC,QAAQ,EAAET,IAAI,CAACS,QAFG;QAGlBC,KAAK,EAAEV,IAAI,CAACU,KAHM;QAIlBC,KAAK,EAAEX,IAAI,CAACW,KAJM;QAKlBC,QAAQ,EAAE9C,MAAM,CAACkC,IAAI,CAACY,QAAN,CALE;QAMlBC,MAAM,EAAEb,IAAI,CAACa,MANK;QAOlBC,qBAAqB,EAAEd,IAAI,CAACc,qBAPV;QAQlBC,QAAQ,EAAEf,IAAI,CAACe,QARG;QASlBpB,KAAK,EAAE,CAACjB,WAAW,CAACsB,IAAI,CAACM,GAAN,CAAZ,CATW;QAUlBU,OAAO,EACLhB,IAAI,CAACiB,WAAL,CAAiBC,MAAjB,KAA4B,CAA5B,GACIlB,IAAI,CAACiB,WAAL,CAAiBE,GAAjB,CAAsBC,CAAD;UAAA;;UAAA,OAAQ;YAC3BC,KAAK,aAAED,CAAC,CAACE,IAAJ,mEAAE,QAAQC,WAAV,wDAAE,oBAAqBC,KADD;YAE3BC,KAAK,cAAEL,CAAC,CAACE,IAAJ,6CAAE,SAAQzB;UAFY,CAAR;QAAA,CAArB,CADJ,GAKI6B;MAhBY,CAApB;MAkBA5B,KAAK,cAACM,GAAG,CAACJ,IAAL,uEAAC,UAAU2B,oBAAX,0DAAC,sBAAgC9B,EAAjC,CAAL;MACAD,QAAQ,CAAC,CAAClB,WAAW,CAACsB,IAAI,CAACM,GAAN,CAAZ,CAAD,CAAR;IACD,CA7BH,EA8BGsB,OA9BH,CA8BW,MAAM;MACbpC,UAAU,CAAC,KAAD,CAAV;MACAH,QAAQ,CAAChB,cAAc,CAACa,UAAD,CAAf,CAAR;IACD,CAjCH;EAkCD,CApCD;;EAsCA1B,SAAS,CAAC,MAAM;IACd,IAAI0B,UAAJ,aAAIA,UAAJ,eAAIA,UAAU,CAAE2C,OAAhB,EAAyB;MACvB5B,YAAY,CAACX,IAAD,CAAZ;IACD,CAHa,CAId;;EACD,CALQ,EAKN,CAACJ,UAAD,aAACA,UAAD,uBAACA,UAAU,CAAE2C,OAAb,CALM,CAAT;;EAOA,MAAMC,QAAQ,GAAIC,GAAD,IAAS;IACxBrC,MAAM,CAACqC,GAAD,CAAN;EACD,CAFD;;EAIA,oBACE,QAAC,IAAD;IAAM,KAAK,EAAEhD,CAAC,CAAC,eAAD,CAAd;IAAA,UACG,CAACQ,OAAD,gBACC,QAAC,IAAD;MACE,SAAS,EAAEE,GADb;MAEE,QAAQ,EAAEqC,QAFZ;MAGE,WAAW,EAAC,MAHd;MAIE,IAAI,EAAC,OAJP;MAAA,wBAME,QAAC,OAAD;QAAoB,GAAG,EAAE/C,CAAC,CAAC,WAAD,CAA1B;QAAA,uBACE,QAAC,YAAD;UACE,IAAI,EAAEG,UAAF,aAAEA,UAAF,uBAAEA,UAAU,CAAEc,IADpB;UAEE,IAAI,EAAEhB,IAFR;UAGE,KAAK,EAAEW,KAHT;UAIE,QAAQ,EAAEC;QAJZ;UAAA;UAAA;UAAA;QAAA;MADF,GAAa,MAAb;QAAA;QAAA;QAAA;MAAA,QANF,eAeE,QAAC,OAAD;QAAqB,GAAG,EAAEb,CAAC,CAAC,QAAD,CAA3B;QAAA,uBACE,QAAC,UAAD;UAAY,IAAI,EAAEG,UAAF,aAAEA,UAAF,uBAAEA,UAAU,CAAEc;QAA9B;UAAA;UAAA;UAAA;QAAA;MADF,GAAa,OAAb;QAAA;QAAA;QAAA;MAAA,QAfF,EAkBGD,IAAI,KAAK,aAAT,iBACC,QAAC,OAAD;QAAwB,GAAG,EAAEhB,CAAC,CAAC,aAAD,CAA9B;QAAA,uBACE,QAAC,qBAAD;UAAuB,EAAE,EAAEc,EAA3B;UAA+B,IAAI,EAAEX,UAAU,CAACc;QAAhD;UAAA;UAAA;UAAA;QAAA;MADF,GAAa,UAAb;QAAA;QAAA;QAAA;MAAA,QAnBJ,eAuBE,QAAC,OAAD;QAAsB,GAAG,EAAEjB,CAAC,CAAC,QAAD,CAA5B;QAAA,uBACE,QAAC,aAAD;UAAe,IAAI,EAAEG,UAAF,aAAEA,UAAF,uBAAEA,UAAU,CAAEc;QAAjC;UAAA;UAAA;UAAA;QAAA;MADF,GAAa,QAAb;QAAA;QAAA;QAAA;MAAA,QAvBF,eA0BE,QAAC,OAAD;QAAwB,GAAG,EAAEjB,CAAC,CAAC,UAAD,CAA9B;QAAA,uBACE,QAAC,YAAD;UAAc,IAAI,EAAEG,UAAF,aAAEA,UAAF,uBAAEA,UAAU,CAAEc;QAAhC;UAAA;UAAA;UAAA;QAAA;MADF,GAAa,UAAb;QAAA;QAAA;QAAA;MAAA,QA1BF;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,gBAgCC,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA;EAjCJ;IAAA;IAAA;IAAA;EAAA,QADF;AAsCD,CAnGD;;GAAMlB,S;UACUP,c,EACCZ,IAAI,CAACsB,O,EACGb,W,EACND,W,EACAN,S;;;KALbiB,S;AAqGN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}