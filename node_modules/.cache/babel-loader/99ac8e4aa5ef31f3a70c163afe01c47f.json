{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Card,Col,Descriptions,Image,Row,Spin,Switch}from'antd';import shopService from'services/seller/shop';import getImage from'helpers/getImage';import{EditOutlined}from'@ant-design/icons';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{addMenu,disableRefetch,setRefetch}from'redux/slices/menu';import{useTranslation}from'react-i18next';import{fetchMyShop}from'redux/slices/myShop';import numberToPrice from'helpers/numberToPrice';import useDemo from'helpers/useDemo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyShop(){var _data$translation,_data$translation2,_data$seller,_data$seller$wallet,_data$subscription,_data$subscription2,_data$subscription3;const{t}=useTranslation();const[statusLoading,setStatusLoading]=useState(false);const dispatch=useDispatch();const navigate=useNavigate();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const{myShop:data,loading}=useSelector(state=>state.myShop,shallowEqual);const{defaultCurrency}=useSelector(state=>state.currency,shallowEqual);const{user}=useSelector(state=>state.auth,shallowEqual);const{isDemo,demoShop}=useDemo();const goToEdit=()=>{dispatch(addMenu({data:data.uuid,id:'edit-shop',url:`my-shop/edit`,name:t('edit.shop')}));navigate(`/my-shop/edit`);};useEffect(()=>{if(activeMenu.refetch){dispatch(fetchMyShop());dispatch(disableRefetch(activeMenu));}},[activeMenu.refetch]);function workingStatusChange(){setStatusLoading(true);shopService.setWorkingStatus().then(()=>dispatch(setRefetch(activeMenu))).finally(()=>setStatusLoading(false));}return/*#__PURE__*/_jsx(Card,{title:t('my.shop'),extra:(user===null||user===void 0?void 0:user.role)!=='seller'?null:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:goToEdit,children:t('shop.edit')}),children:!loading?/*#__PURE__*/_jsx(Row,{gutter:12,children:/*#__PURE__*/_jsx(Col,{span:20,children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsxs(Descriptions,{bordered:true,children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:t('shop.name'),span:2,children:(_data$translation=data.translation)===null||_data$translation===void 0?void 0:_data$translation.title}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('shop.address'),span:2,children:(_data$translation2=data.translation)===null||_data$translation2===void 0?void 0:_data$translation2.address}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('phone'),span:2,children:data.phone}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('tax'),span:2,children:data.tax}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('background.image'),span:2,children:data.background_img?/*#__PURE__*/_jsx(Image,{width:200,src:getImage(data.background_img),alt:'shop'}):''}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('logo.image'),span:2,children:data.logo_img?/*#__PURE__*/_jsx(Image,{width:200,src:getImage(data.logo_img),alt:'shop'}):''}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('open'),span:2,children:/*#__PURE__*/_jsx(Switch,{name:\"open\",defaultChecked:data.open,onChange:workingStatusChange,disabled:isDemo&&data.id==demoShop})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('wallet'),span:2,children:numberToPrice((_data$seller=data.seller)===null||_data$seller===void 0?void 0:(_data$seller$wallet=_data$seller.wallet)===null||_data$seller$wallet===void 0?void 0:_data$seller$wallet.price,defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.symbol)})]}),data.subscription?/*#__PURE__*/_jsxs(Descriptions,{title:t('subscription'),bordered:true,className:\"mt-5\",children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:t('type'),span:3,children:(_data$subscription=data.subscription)===null||_data$subscription===void 0?void 0:_data$subscription.type}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('price'),span:3,children:numberToPrice((_data$subscription2=data.subscription)===null||_data$subscription2===void 0?void 0:_data$subscription2.price,defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.symbol)}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('expired.at'),span:3,children:(_data$subscription3=data.subscription)===null||_data$subscription3===void 0?void 0:_data$subscription3.expired_at})]}):'',statusLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})})]})})}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(Spin,{size:\"large\",className:\"py-5\"})})});}","map":null,"metadata":{},"sourceType":"module"}