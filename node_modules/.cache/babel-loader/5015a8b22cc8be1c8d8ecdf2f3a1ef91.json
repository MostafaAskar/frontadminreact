{"ast":null,"code":"import React,{useState}from'react';import{Card,Col,Form,Input,InputNumber,Row,Select}from'antd';import{DebounceSelect}from'components/search';import TextArea from'antd/es/input/TextArea';import{shallowEqual,useSelector}from'react-redux';import Map from'components/map';import{useTranslation}from'react-i18next';import MediaUpload from'components/upload';import shopTagService from'services/shopTag';import{MAP_API_KEY}from'configs/app-global';import useGoogle from'react-google-autocomplete/lib/usePlacesAutocompleteService';import getAddress from'helpers/getAddress';import{ShopTypes}from'constants/shop-types';import{deliveryTimeTypes}from'./delivery-time-types';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ShopAddData=_ref=>{let{logoImage,setLogoImage,backImage,setBackImage,form,location,setLocation}=_ref;const{t}=useTranslation();const{defaultLang,languages}=useSelector(state=>state.formLang,shallowEqual);const[value,setValue]=useState('');const{placePredictions,getPlacePredictions,isPlacePredictionsLoading}=useGoogle({apiKey:MAP_API_KEY,libraries:['places','geocode']});async function fetchShopTag(search){const params={search};return shopTagService.getAllSeller(params).then(_ref2=>{let{data}=_ref2;return data.map(item=>{var _item$translation;return{label:(item===null||item===void 0?void 0:(_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title)||'no name',value:item===null||item===void 0?void 0:item.id,key:item===null||item===void 0?void 0:item.id};});});}return/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Form.Item,{label:t('logo.image'),children:/*#__PURE__*/_jsx(MediaUpload,{type:\"shops/logo\",imageList:logoImage,setImageList:setLogoImage,form:form,multiple:false,name:\"logo_img\"})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Form.Item,{label:t('background.image'),children:/*#__PURE__*/_jsx(MediaUpload,{type:\"shops/background\",imageList:backImage,setImageList:setBackImage,form:form,multiple:false,name:\"background_img\"})})}),/*#__PURE__*/_jsx(Col,{span:10,children:/*#__PURE__*/_jsx(Form.Item,{label:t('status.note'),name:\"status_note\",children:/*#__PURE__*/_jsx(TextArea,{rows:4})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Form.Item,{name:\"status\",label:t('status'),children:/*#__PURE__*/_jsx(Input,{disabled:true})})})]})})}),/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{title:t('general'),children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:24,children:languages.map((item,idx)=>/*#__PURE__*/_jsx(Form.Item,{label:t('title'),name:`title[${item.locale}]`,rules:[{required:item.locale===defaultLang,message:t('required')},{min:2,message:t('title.required')}],hidden:item.locale!==defaultLang,children:/*#__PURE__*/_jsx(Input,{})},'title'+idx))}),/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Form.Item,{label:t('phone'),name:\"phone\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,className:\"w-100\"})})})]})}),/*#__PURE__*/_jsx(Col,{span:12,children:languages.map((item,idx)=>/*#__PURE__*/_jsx(Form.Item,{label:t('description'),name:`description[${item.locale}]`,rules:[{required:item.locale===defaultLang,message:t('required')},{min:3,message:t('required')}],hidden:item.locale!==defaultLang,children:/*#__PURE__*/_jsx(TextArea,{rows:4})},'desc'+idx))}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('shop.tags'),name:\"tags\",rules:[{required:false,message:t('required')}],children:/*#__PURE__*/_jsx(DebounceSelect,{mode:\"multiple\",fetchOptions:fetchShopTag,style:{minWidth:150}})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('shop.type'),name:\"delivery_type\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Select,{options:ShopTypes})})}),/*#__PURE__*/_jsx(Col,{span:12,hidden:true,children:/*#__PURE__*/_jsx(Form.Item,{label:t('seller'),name:\"user\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})})]})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{title:t('delivery.time'),children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"delivery_time_type\",label:t('delivery_time_type'),rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Select,{className:\"w-100\",children:deliveryTimeTypes.map(item=>/*#__PURE__*/_jsx(Select.Option,{value:item.value,label:t(item.label)},item.value))})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"delivery_time_from\",label:t('delivery_time_from'),rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{className:\"w-100\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"delivery_time_to\",label:t('delivery_time_to'),rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{className:\"w-100\"})})})]})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Card,{title:t('order.info'),children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('tax'),name:\"tax\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,addonAfter:'%',className:\"w-100\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('admin.comission'),name:\"percentage\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,className:\"w-100\",addonAfter:'%'})})})]})})}),/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{title:t('address'),children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:languages.map((item,idx)=>/*#__PURE__*/_jsx(Form.Item,{label:t('address'),name:`address[${item.locale}]`,rules:[{required:item.locale===defaultLang,message:t('required')}],hidden:item.locale!==defaultLang,children:/*#__PURE__*/_jsx(Select,{allowClear:true,searchValue:value,showSearch:true,autoClearSearchValue:true,loading:isPlacePredictionsLoading,options:placePredictions===null||placePredictions===void 0?void 0:placePredictions.map(prediction=>({label:prediction.description,value:prediction.description})),onSearch:searchValue=>{setValue(searchValue);if(searchValue.length>0){getPlacePredictions({input:searchValue});}},onSelect:async value=>{const address=await getAddress(value);setLocation({lat:address===null||address===void 0?void 0:address.geometry.location.lat,lng:address===null||address===void 0?void 0:address.geometry.location.lng});}})},'address'+idx))}),/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Map,{location:location,setLocation:setLocation,setAddress:value=>form.setFieldsValue({[`address[${defaultLang}]`]:value})})})]})})})]});};export default ShopAddData;","map":null,"metadata":{},"sourceType":"module"}