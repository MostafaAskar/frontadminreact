{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/qr-code.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { QRCodeCanvas } from 'qrcode.react';\nimport { toast } from 'react-toastify';\nimport { Tag, Button } from 'antd';\nimport axios from 'axios';\nimport { API_KEY, DYNAMIC_LINK_DOMAIN, WEBSITE_URL, ANDROID_PACKAGE_NAME, IOS_BUNDLE_ID } from 'configs/app-global';\nimport Loading from 'components/loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseUrl = `https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=${API_KEY}`;\nexport default function QrCode(_ref) {\n  _s();\n\n  let {\n    orderId,\n    showLink = true,\n    size = 2\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [qrCodeUrl, setQrCodeUrl] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchQrCodeUrl = async () => {\n    setLoading(true);\n    const requestData = {\n      dynamicLinkInfo: {\n        domainUriPrefix: DYNAMIC_LINK_DOMAIN,\n        link: `${WEBSITE_URL}/orders/${orderId}`,\n        androidInfo: {\n          androidPackageName: ANDROID_PACKAGE_NAME\n        },\n        iosInfo: {\n          iosBundleId: IOS_BUNDLE_ID\n        }\n      }\n    };\n\n    try {\n      const {\n        data\n      } = await axios.post(firebaseUrl, requestData);\n      setError(null);\n      setQrCodeUrl(data === null || data === void 0 ? void 0 : data.shortLink);\n    } catch (error) {\n      setError(error);\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchQrCodeUrl();\n  }, [orderId]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [t('qr_code'), \":\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: !loading && !error ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: `${size * 100}px`,\n            height: `${size * 100}px`,\n            borderRadius: '10px',\n            overflow: !error ? 'hidden' : 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(QRCodeCanvas, {\n            size: 500,\n            id: \"qrCode\",\n            includeMargin: true,\n            value: qrCodeUrl,\n            style: {\n              width: '100%',\n              aspectRatio: '1/1',\n              height: '100%'\n            },\n            bgColor: '#fff',\n            level: 'H'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), showLink && /*#__PURE__*/_jsxDEV(Button, {\n          type: 'primary',\n          href: qrCodeUrl,\n          target: '_blank',\n          rel: 'noreferrer',\n          style: {\n            width: `${size * 100}px`\n          },\n          children: t('link.to.order')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : !!error ? /*#__PURE__*/_jsxDEV(Tag, {\n        color: \"red\",\n        children: t('smth.went.wrong')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(QrCode, \"yH0JxhAhPr7YJJZSnpnpkoDufYQ=\", false, function () {\n  return [useTranslation];\n});\n\n_c = QrCode;\n\nvar _c;\n\n$RefreshReg$(_c, \"QrCode\");","map":{"version":3,"names":["React","useEffect","useState","useTranslation","QRCodeCanvas","toast","Tag","Button","axios","API_KEY","DYNAMIC_LINK_DOMAIN","WEBSITE_URL","ANDROID_PACKAGE_NAME","IOS_BUNDLE_ID","Loading","firebaseUrl","QrCode","orderId","showLink","size","t","qrCodeUrl","setQrCodeUrl","loading","setLoading","error","setError","fetchQrCodeUrl","requestData","dynamicLinkInfo","domainUriPrefix","link","androidInfo","androidPackageName","iosInfo","iosBundleId","data","post","shortLink","message","width","height","borderRadius","overflow","aspectRatio"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/qr-code.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { QRCodeCanvas } from 'qrcode.react';\nimport { toast } from 'react-toastify';\nimport { Tag, Button } from 'antd';\nimport axios from 'axios';\nimport {\n  API_KEY,\n  DYNAMIC_LINK_DOMAIN,\n  WEBSITE_URL,\n  ANDROID_PACKAGE_NAME,\n  IOS_BUNDLE_ID,\n} from 'configs/app-global';\nimport Loading from 'components/loading';\n\nconst firebaseUrl = `https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=${API_KEY}`;\n\nexport default function QrCode({ orderId, showLink = true, size = 2 }) {\n  const { t } = useTranslation();\n\n  const [qrCodeUrl, setQrCodeUrl] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchQrCodeUrl = async () => {\n    setLoading(true);\n\n    const requestData = {\n      dynamicLinkInfo: {\n        domainUriPrefix: DYNAMIC_LINK_DOMAIN,\n        link: `${WEBSITE_URL}/orders/${orderId}`,\n        androidInfo: {\n          androidPackageName: ANDROID_PACKAGE_NAME,\n        },\n        iosInfo: {\n          iosBundleId: IOS_BUNDLE_ID,\n        },\n      },\n    };\n\n    try {\n      const { data } = await axios.post(firebaseUrl, requestData);\n      setError(null);\n      setQrCodeUrl(data?.shortLink);\n    } catch (error) {\n      setError(error);\n      toast.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchQrCodeUrl();\n  }, [orderId]);\n\n  return (\n    <>\n      <h3>{t('qr_code')}:</h3>\n      <div>\n        {!loading && !error ? (\n          <>\n            <div\n              style={{\n                width: `${size * 100}px`,\n                height: `${size * 100}px`,\n                borderRadius: '10px',\n                overflow: !error ? 'hidden' : 'none',\n              }}\n            >\n              <QRCodeCanvas\n                size={500}\n                id='qrCode'\n                includeMargin\n                value={qrCodeUrl}\n                style={{\n                  width: '100%',\n                  aspectRatio: '1/1',\n                  height: '100%',\n                }}\n                bgColor={'#fff'}\n                level={'H'}\n              />\n            </div>\n            <br />\n            {showLink && (\n              <Button\n                type={'primary'}\n                href={qrCodeUrl}\n                target={'_blank'}\n                rel={'noreferrer'}\n                style={{ width: `${size * 100}px` }}\n              >\n                {t('link.to.order')}\n              </Button>\n            )}\n          </>\n        ) : !!error ? (\n          <Tag color='red'>{t('smth.went.wrong')}</Tag>\n        ) : (\n          <Loading />\n        )}\n      </div>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}