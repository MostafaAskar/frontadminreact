{"ast":null,"code":"import{Button,Input,List,Modal,Tag}from'antd';import React,{useEffect,useState}from'react';import extraService from'services/extra';import ExtraGroupModal from'./Extras/extra-group-modal';import{useTranslation}from'react-i18next';import{PlusOutlined}from'@ant-design/icons';import useDebounce from'helpers/useDebounce';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ExtraSelectModal=_ref=>{let{open,onClose,selectedExtras,onSelect}=_ref;const{t}=useTranslation();const[extrasGroup,setExtrasGroup]=useState([]);const[loading,setLoading]=useState(false);const[isAddModalOpen,setIsAddModalOpen]=useState(false);const[search,setSearch]=useState('');const debouncedSearch=useDebounce(search,500);const getExtraGroup=query=>{setLoading(true);const params={valid:1,perPage:100,search:query};extraService.getAllGroups(params).then(res=>{const data=res.data.map(item=>{var _item$translation;return{id:item.id,label:(_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title,value:item.id,shop_id:item.shop_id,group:{...item}};});setExtrasGroup(data);}).finally(()=>setLoading(false));};useEffect(()=>{if(open){getExtraGroup(debouncedSearch);}},[open,debouncedSearch]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Modal,{visible:open,onCancel:()=>{onClose();setSearch('');},footer:null,children:[/*#__PURE__*/_jsx(Input,{className:\"mt-3\",value:search,onChange:e=>setSearch(e.target.value)}),/*#__PURE__*/_jsx(List,{loading:loading,dataSource:extrasGroup.filter(extraItem=>!(selectedExtras!==null&&selectedExtras!==void 0&&selectedExtras.some(selectedExtra=>selectedExtra.id===extraItem.id))),renderItem:item=>/*#__PURE__*/_jsx(List.Item,{extra:!(item!==null&&item!==void 0&&item.shop_id)?/*#__PURE__*/_jsx(Tag,{children:t('admin')}):null,style:{cursor:'pointer'},onClick:()=>{onSelect(item);},children:item.label}),footer:!loading?/*#__PURE__*/_jsx(Button,{type:\"link\",onClick:()=>setIsAddModalOpen(true),style:{paddingLeft:0},icon:/*#__PURE__*/_jsx(PlusOutlined,{}),children:t('add.new.extra')}):null})]}),/*#__PURE__*/_jsx(ExtraGroupModal,{modal:isAddModalOpen,handleCancel:()=>setIsAddModalOpen(false),onSuccess:()=>getExtraGroup()})]});};export default ExtraSelectModal;","map":null,"metadata":{},"sourceType":"module"}