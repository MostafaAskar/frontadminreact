{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/tab-menu.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { CloseOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux/es/hooks/useSelector';\nimport { setActiveMenu, removeFromMenu, setRefetch } from '../redux/slices/menu';\nimport { shallowEqual, useDispatch } from 'react-redux';\nimport { Tabs } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  TabPane\n} = Tabs;\n\nconst TabMenu = () => {\n  _s();\n\n  var _menu$activeMenu2;\n\n  const {\n    t\n  } = useTranslation();\n  const navigate = useNavigate();\n  const {\n    pathname\n  } = useLocation();\n  const dispatch = useDispatch();\n  const menu = useSelector(state => state.menu, shallowEqual);\n\n  const selectTab = item => {\n    dispatch(setActiveMenu(item));\n    navigate(`/${item.url}`);\n  };\n\n  const deleteTab = (event, item) => {\n    var _menu$activeMenu;\n\n    event.preventDefault();\n    event.stopPropagation();\n    const index = menu.menuItems.indexOf(item);\n\n    if (!index) {\n      toast.warning('The menu tab does not close');\n      return;\n    }\n\n    if (((_menu$activeMenu = menu.activeMenu) === null || _menu$activeMenu === void 0 ? void 0 : _menu$activeMenu.id) !== item.id) {\n      dispatch(removeFromMenu({ ...item,\n        nextUrl: menu.activeMenu.url\n      }));\n      return;\n    }\n\n    const newPath = menu.menuItems.filter(el => el.url !== item.url);\n    const isHaveOtherTabs = newPath.length - 1 > index;\n    let currentPath;\n\n    if (isHaveOtherTabs) {\n      currentPath = newPath[index];\n    } else {\n      currentPath = newPath[newPath.length - 1];\n    }\n\n    dispatch(removeFromMenu({ ...item,\n      nextUrl: currentPath.url\n    }));\n    navigate(`/${currentPath.url}`);\n  };\n\n  const reloadPage = (event, item) => {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch(setRefetch(item));\n\n    if (item.id !== menu.activeMenu.id) {\n      navigate(`/${item.url}`);\n    }\n  };\n\n  useEffect(() => {\n    console.log('menu mounting...');\n\n    if (!pathname.includes(menu.activeMenu.url)) {\n      window.location.replace(`/${menu.activeMenu.url}`);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"navbar-default\",\n    children: /*#__PURE__*/_jsxDEV(Tabs, {\n      onChange: (key, item) => console.log('tab => ', key, item),\n      activeKey: (_menu$activeMenu2 = menu.activeMenu) === null || _menu$activeMenu2 === void 0 ? void 0 : _menu$activeMenu2.url,\n      type: \"card\",\n      children: menu.menuItems.map(item => /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => selectTab(item),\n          className: \"nav-link\",\n          children: [/*#__PURE__*/_jsxDEV(ReloadOutlined, {\n            onClick: event => reloadPage(event, item),\n            className: \"reload-button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"nav-text\",\n            children: [\" \", t(item.name)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(CloseOutlined, {\n            onClick: event => deleteTab(event, item),\n            className: \"close-button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this)\n      }, item.url, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TabMenu, \"QE8tVxkTSV0HNfabiCDXGQ6zrKs=\", false, function () {\n  return [useTranslation, useNavigate, useLocation, useDispatch, useSelector];\n});\n\n_c = TabMenu;\nexport default TabMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"TabMenu\");","map":{"version":3,"names":["React","useEffect","useLocation","useNavigate","CloseOutlined","ReloadOutlined","toast","useSelector","setActiveMenu","removeFromMenu","setRefetch","shallowEqual","useDispatch","Tabs","useTranslation","TabPane","TabMenu","t","navigate","pathname","dispatch","menu","state","selectTab","item","url","deleteTab","event","preventDefault","stopPropagation","index","menuItems","indexOf","warning","activeMenu","id","nextUrl","newPath","filter","el","isHaveOtherTabs","length","currentPath","reloadPage","console","log","includes","window","location","replace","key","map","name"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/tab-menu.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { CloseOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux/es/hooks/useSelector';\nimport {\n  setActiveMenu,\n  removeFromMenu,\n  setRefetch,\n} from '../redux/slices/menu';\nimport { shallowEqual, useDispatch } from 'react-redux';\nimport { Tabs } from 'antd';\nimport { useTranslation } from 'react-i18next';\nconst { TabPane } = Tabs;\n\nconst TabMenu = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n  const dispatch = useDispatch();\n  const menu = useSelector((state) => state.menu, shallowEqual);\n\n  const selectTab = (item) => {\n    dispatch(setActiveMenu(item));\n    navigate(`/${item.url}`);\n  };\n\n  const deleteTab = (event, item) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const index = menu.menuItems.indexOf(item);\n    if (!index) {\n      toast.warning('The menu tab does not close');\n      return;\n    }\n\n    if (menu.activeMenu?.id !== item.id) {\n      dispatch(removeFromMenu({ ...item, nextUrl: menu.activeMenu.url }));\n      return;\n    }\n    const newPath = menu.menuItems.filter((el) => el.url !== item.url);\n    const isHaveOtherTabs = newPath.length - 1 > index;\n    let currentPath;\n    if (isHaveOtherTabs) {\n      currentPath = newPath[index];\n    } else {\n      currentPath = newPath[newPath.length - 1];\n    }\n    dispatch(removeFromMenu({ ...item, nextUrl: currentPath.url }));\n    navigate(`/${currentPath.url}`);\n  };\n\n  const reloadPage = (event, item) => {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch(setRefetch(item));\n    if (item.id !== menu.activeMenu.id) {\n      navigate(`/${item.url}`);\n    }\n  };\n\n  useEffect(() => {\n    console.log('menu mounting...');\n    if (!pathname.includes(menu.activeMenu.url)) {\n      window.location.replace(`/${menu.activeMenu.url}`);\n    }\n  }, []);\n\n  return (\n    <div className='navbar-default'>\n      <Tabs\n        onChange={(key, item) => console.log('tab => ', key, item)}\n        activeKey={menu.activeMenu?.url}\n        type='card'\n      >\n        {menu.menuItems.map((item) => (\n          <TabPane\n            tab={\n              <div onClick={() => selectTab(item)} className='nav-link'>\n                <ReloadOutlined\n                  onClick={(event) => reloadPage(event, item)}\n                  className='reload-button'\n                />\n                <span className='nav-text'> {t(item.name)}</span>\n                <CloseOutlined\n                  onClick={(event) => deleteTab(event, item)}\n                  className='close-button'\n                />\n              </div>\n            }\n            key={item.url}\n          />\n        ))}\n      </Tabs>\n    </div>\n  );\n};\n\nexport default TabMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}