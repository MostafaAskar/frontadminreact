{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{Card,Col,Image,Row,Pagination,Checkbox,Space,Button}from'antd';import{ArrowLeftOutlined}from'@ant-design/icons';import{toast}from'react-toastify';import{BsFolder2Open}from'react-icons/bs';import{Context}from'../../context/context';import CustomModal from'../../components/modal';import galleryService from'../../services/gallery';import{useTranslation}from'react-i18next';import{useNavigate,useParams}from'react-router-dom';import getImage from'../../helpers/getImage';import Loading from'../../components/loading';import DeleteButton from'../../components/delete-button';import RiveResult from'../../components/rive-result';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const GalleryLanguages=()=>{const{t}=useTranslation();const navigate=useNavigate();const{type}=useParams();const[gallaryList,setGallaryList]=useState([]);const[loading,setLoading]=useState(false);const[loadingBtn,setLoadingBtn]=useState(false);const{setIsModalVisible}=useContext(Context);const[gallary,setGallary]=useState([]);const[pageSize,setPageSize]=useState(15);const[page,setPage]=useState(1);const[meta,setMeta]=useState({});const imageDelete=()=>{setLoadingBtn(true);const params={...Object.assign({},...gallary.map((item,index)=>({[`ids[${index}]`]:item})))};galleryService.delete(params).then(()=>{toast.success(t('successfully.deleted'));fetchGallery();setIsModalVisible(false);setGallary([]);}).finally(()=>setLoadingBtn(false));};const fetchGallery=()=>{const params={type,perPage:pageSize,page:page};setLoading(true);galleryService.getAll(params).then(res=>{setGallaryList(res.data.data);setMeta(res.data);}).finally(()=>setLoading(false));};useEffect(()=>{fetchGallery();},[page,pageSize]);const onChangePagination=(pageNumber,e)=>{setPage(pageNumber);setPageSize(e);};const allDelete=()=>{if(gallary===null||gallary.length===0){toast.warning(t('select.the.product'));}else{setIsModalVisible(true);}};const handleSelect=e=>setGallary(gallaryList.map(gallary=>gallary.id));const handleClear=e=>setGallary([]);const handleCheck=(e,data)=>{if(e.target.checked){setGallary([...gallary,parseInt(data)]);}else{setGallary(gallary.filter(item=>item!==data));}};return/*#__PURE__*/_jsx(\"div\",{className:\"gallery-item\",children:/*#__PURE__*/_jsxs(Card,{title:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3\",onClick:()=>navigate(-1),children:/*#__PURE__*/_jsx(ArrowLeftOutlined,{})}),/*#__PURE__*/_jsx(BsFolder2Open,{style:{fontSize:'25px'}}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:t(type)})]}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(DeleteButton,{onClick:allDelete,type:\"danger\",children:t('delete.all')}),/*#__PURE__*/_jsx(Button,{onClick:()=>gallary.length===gallaryList.length?handleClear():handleSelect(),children:gallary.length===gallaryList.length?t('clear.all'):t('select.all')})]})]}),children:[!loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{gutter:[24,24],className:\"mt-2\",children:gallaryList.length===0?/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(RiveResult,{id:\"nosell\"})}):gallaryList===null||gallaryList===void 0?void 0:gallaryList.map((item,index)=>/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{className:`mb-0 ${item.isset?'card-noActive':'card-active'} card-image`,children:[/*#__PURE__*/_jsx(Image,{src:getImage(item.path),className:\"images\",alt:'images'}),!item.isset&&/*#__PURE__*/_jsx(Checkbox,{checked:gallary===null||gallary===void 0?void 0:gallary.includes(item.id),className:\"icon-center-delete\",onChange:e=>handleCheck(e,item.id)})]})},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end mt-5\",children:/*#__PURE__*/_jsx(Pagination,{total:meta.total,pageSize:pageSize,current:page,onChange:onChangePagination})})]}):/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsx(CustomModal,{click:imageDelete,text:t('all.delete'),loading:loadingBtn,setText:setGallary})]})});};export default GalleryLanguages;","map":null,"metadata":{},"sourceType":"module"}