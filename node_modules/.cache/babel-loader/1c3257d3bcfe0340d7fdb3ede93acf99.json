{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Card,Col,Divider,Form,Input,InputNumber,Row,Space}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import extraService from'services/seller/extras';import productService from'services/seller/product';import{AsyncSelect}from'components/async-select';import{useTranslation}from'react-i18next';import{useLocation,useParams}from'react-router-dom';import Loading from'components/loading';import cartesian from'helpers/cartesian';import{DeleteOutlined,DeploymentUnitOutlined}from'@ant-design/icons';import{setMenuData}from'redux/slices/menu';import generateRandomNumbers from'helpers/generateRandomNumbers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductStock=_ref=>{var _location$state2;let{prev,next,isRequest}=_ref;const{t}=useTranslation();const[form]=Form.useForm();const dispatch=useDispatch();const{uuid}=useParams();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const{myShop}=useSelector(state=>state.myShop,shallowEqual);const[loading,setLoading]=useState(null);const location=useLocation();const{defaultLang}=useSelector(state=>state.formLang,shallowEqual);const{defaultCurrency}=useSelector(state=>state.currency,shallowEqual);const randomNumbersLength=6;const[loadingBtn,setLoadingBtn]=useState(null);const[stockIds,setStockIds]=useState([]);const onFinish=values=>{var _activeMenu$data,_activeMenu$data$extr;const{stocks}=values;const delete_ids=stockIds.filter((stockId,index)=>{var _stocks$index;return!!((_stocks$index=stocks[index])!==null&&_stocks$index!==void 0&&_stocks$index.stock_id)&&!stocks.some(stock=>(stock===null||stock===void 0?void 0:stock.stock_id)===stockId);});let extras;const isProductWithExtras=!!((_activeMenu$data=activeMenu.data)!==null&&_activeMenu$data!==void 0&&(_activeMenu$data$extr=_activeMenu$data.extras)!==null&&_activeMenu$data$extr!==void 0&&_activeMenu$data$extr.length);if(isProductWithExtras){extras=stocks.map(item=>{var _activeMenu$data2,_activeMenu$data3,_item$addons,_item$addons2;return{galleries:item.galleries,price:item.price,quantity:item.quantity,sku:item.sku,ids:isRequest?(_activeMenu$data2=activeMenu.data)===null||_activeMenu$data2===void 0?void 0:_activeMenu$data2.extras.map((_,idx)=>item[`extras[${idx}]`]):(_activeMenu$data3=activeMenu.data)===null||_activeMenu$data3===void 0?void 0:_activeMenu$data3.extras.map((_,idx)=>item[`extras[${idx}]`].value),addons:item.addons?isRequest?(_item$addons=item.addons)===null||_item$addons===void 0?void 0:_item$addons.map(i=>i):(_item$addons2=item.addons)===null||_item$addons2===void 0?void 0:_item$addons2.map(i=>i.value):[],stock_id:item.stock_id};});}else{extras=[{price:stocks[0].price,quantity:stocks[0].quantity,addons:stocks[0].addons?isRequest?stocks[0].addons.map(i=>i):stocks[0].addons.map(i=>i.value):[],stock_id:stocks[0].stock_id,sku:stocks[0].sku,ids:[]}];}if(isRequest){dispatch(setMenuData({activeMenu,data:{...activeMenu.data,stocks:extras,delete_ids}}));next();return;}setLoadingBtn(true);productService.stocks(uuid,{extras,delete_ids}).then(_ref2=>{let{data:{stocks}}=_ref2;const newExtras=stocks===null||stocks===void 0?void 0:stocks.flatMap(item=>item.extras);const extraValues=newExtras.map(item=>({...item.value,stock_id:item.stock_id,group_type:item.group.type}));const extraGroup=newExtras===null||newExtras===void 0?void 0:newExtras.find(item=>item.group.type==='color');const extrasCustom={};stocks.forEach(stock=>{stock.extras.forEach(extra=>{if(extra.extra_group_id in extrasCustom){var _extrasCustom$extra$e;if(!((_extrasCustom$extra$e=extrasCustom[extra.extra_group_id].values)!==null&&_extrasCustom$extra$e!==void 0&&_extrasCustom$extra$e.some(item=>{var _extra$value;return item.value===((_extra$value=extra.value)===null||_extra$value===void 0?void 0:_extra$value.id);}))){var _extrasCustom$extra$e2,_extra$value2;(_extrasCustom$extra$e2=extrasCustom[extra.extra_group_id].values)===null||_extrasCustom$extra$e2===void 0?void 0:_extrasCustom$extra$e2.push({value:extra.value.id,label:(_extra$value2=extra.value)===null||_extra$value2===void 0?void 0:_extra$value2.value,stock_id:stock.id});}}else{var _extra$group$translat,_extra$value3;extrasCustom[extra.extra_group_id]={group:extra.group,label:(_extra$group$translat=extra.group.translation)===null||_extra$group$translat===void 0?void 0:_extra$group$translat.title,value:extra.extra_group_id,id:extra.extra_group_id,stock_id:stock.id,values:[{value:extra.value.id,label:(_extra$value3=extra.value)===null||_extra$value3===void 0?void 0:_extra$value3.value,stock_id:stock.id}]};}});});dispatch(setMenuData({activeMenu,data:{...activeMenu.data,newExtras:[{group:extraGroup===null||extraGroup===void 0?void 0:extraGroup.group,values:extraValues}],delete_ids,stocks,stocksData:stocks,extras:Object.values(extrasCustom)}}));next();}).finally(()=>setLoadingBtn(false));};function fetchProduct(uuid){setLoading(true);productService.getById(uuid).then(res=>{var _activeMenu$data$extr2,_res$data$stocks,_res$data$stocks3;const additionalStocks=cartesian(activeMenu===null||activeMenu===void 0?void 0:(_activeMenu$data$extr2=activeMenu.data.extras)===null||_activeMenu$data$extr2===void 0?void 0:_activeMenu$data$extr2.map(extra=>extra.values||[]));const parsedAdditionalStocks=additionalStocks.map((additionalStock,i)=>{var _activeMenu$data5,_activeMenu$data6;if(additionalStock.every(itemValue=>typeof itemValue.stock_id!=='undefined')){var _activeMenu$data$sku,_activeMenu$data4,_selectedStock$addons;const selectedStock=res.data.stocks.find(stock=>{return stock.extras.every(extra=>{return additionalStock.some(addStock=>{var _extra$value4;return addStock.value===(extra===null||extra===void 0?void 0:(_extra$value4=extra.value)===null||_extra$value4===void 0?void 0:_extra$value4.id);});});});return{galleries:(selectedStock===null||selectedStock===void 0?void 0:selectedStock.galleries)||[],price:(selectedStock===null||selectedStock===void 0?void 0:selectedStock.price)||0,quantity:(selectedStock===null||selectedStock===void 0?void 0:selectedStock.quantity)||0,sku:(_activeMenu$data$sku=(_activeMenu$data4=activeMenu.data)===null||_activeMenu$data4===void 0?void 0:_activeMenu$data4.sku)!==null&&_activeMenu$data$sku!==void 0?_activeMenu$data$sku:selectedStock===null||selectedStock===void 0?void 0:selectedStock.sku,stock_id:selectedStock===null||selectedStock===void 0?void 0:selectedStock.id,tax:(activeMenu===null||activeMenu===void 0?void 0:activeMenu.data.tax)||0,addons:(selectedStock===null||selectedStock===void 0?void 0:(_selectedStock$addons=selectedStock.addons)===null||_selectedStock$addons===void 0?void 0:_selectedStock$addons.map(item=>{var _item$product,_item$product$transla,_item$product2;return{label:(item===null||item===void 0?void 0:(_item$product=item.product)===null||_item$product===void 0?void 0:(_item$product$transla=_item$product.translation)===null||_item$product$transla===void 0?void 0:_item$product$transla.title)||(item===null||item===void 0?void 0:item.label),value:(item===null||item===void 0?void 0:(_item$product2=item.product)===null||_item$product2===void 0?void 0:_item$product2.id)||(item===null||item===void 0?void 0:item.value)};}))||[],...Object.assign({},...additionalStock.map((extra,idx)=>({[`extras[${idx}]`]:{label:extra.label,value:extra.value}})))};}return{price:0,quantity:0,sku:(_activeMenu$data5=activeMenu.data)===null||_activeMenu$data5===void 0?void 0:_activeMenu$data5.sku,tax:((_activeMenu$data6=activeMenu.data)===null||_activeMenu$data6===void 0?void 0:_activeMenu$data6.tax)||0,addons:[],...Object.assign({},...additionalStock.map((extra,idx)=>({[`extras[${idx}]`]:{label:extra.label,value:extra.value}})))};});let defaultStock=[];if(additionalStocks.length===0&&((_res$data$stocks=res.data.stocks)===null||_res$data$stocks===void 0?void 0:_res$data$stocks.length)!==0){var _res$data$stocks2,_activeMenu$data$sku2,_activeMenu$data7,_activeMenu$data8,_stockWithoutExtras$a;const stockWithoutExtras=(_res$data$stocks2=res.data.stocks)===null||_res$data$stocks2===void 0?void 0:_res$data$stocks2.at(0);defaultStock=[{price:(stockWithoutExtras===null||stockWithoutExtras===void 0?void 0:stockWithoutExtras.price)||0,quantity:(stockWithoutExtras===null||stockWithoutExtras===void 0?void 0:stockWithoutExtras.quantity)||0,sku:(_activeMenu$data$sku2=(_activeMenu$data7=activeMenu.data)===null||_activeMenu$data7===void 0?void 0:_activeMenu$data7.sku)!==null&&_activeMenu$data$sku2!==void 0?_activeMenu$data$sku2:stockWithoutExtras===null||stockWithoutExtras===void 0?void 0:stockWithoutExtras.sku,tax:((_activeMenu$data8=activeMenu.data)===null||_activeMenu$data8===void 0?void 0:_activeMenu$data8.tax)||0,addons:stockWithoutExtras?(_stockWithoutExtras$a=stockWithoutExtras.addons)===null||_stockWithoutExtras$a===void 0?void 0:_stockWithoutExtras$a.map(item=>{var _item$product3,_item$product3$transl,_item$product4;return{label:(item===null||item===void 0?void 0:(_item$product3=item.product)===null||_item$product3===void 0?void 0:(_item$product3$transl=_item$product3.translation)===null||_item$product3$transl===void 0?void 0:_item$product3$transl.title)||(item===null||item===void 0?void 0:item.label),value:(item===null||item===void 0?void 0:(_item$product4=item.product)===null||_item$product4===void 0?void 0:_item$product4.id)||(item===null||item===void 0?void 0:item.value)};}):[]}];}if(additionalStocks.length===0&&((_res$data$stocks3=res.data.stocks)===null||_res$data$stocks3===void 0?void 0:_res$data$stocks3.length)===0){var _activeMenu$data9,_activeMenu$data10;defaultStock=[{price:undefined,quantity:0,sku:(_activeMenu$data9=activeMenu.data)===null||_activeMenu$data9===void 0?void 0:_activeMenu$data9.sku,tax:((_activeMenu$data10=activeMenu.data)===null||_activeMenu$data10===void 0?void 0:_activeMenu$data10.tax)||0,addons:[]}];}const stocks=defaultStock.concat(parsedAdditionalStocks);setStockIds(res.data.stocks.map(item=>item.id));form.setFieldsValue({stocks});}).finally(()=>{setLoading(false);});}function fetchExtra(id){return extraService.getGroupById(id).then(res=>res.data.extra_values.map(item=>({label:item.value,value:item.id})));}const fetchAddons=search=>{const params={search,addon:1,shop_id:myShop.id};return productService.getAll(params).then(res=>res.data.map(item=>{var _item$translation;return{label:item===null||item===void 0?void 0:(_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title,value:item===null||item===void 0?void 0:item.id};}));};useEffect(()=>{if(isRequest){var _location$state;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.generate){var _activeMenu$data$extr3,_activeMenu$data14,_activeMenu$data14$ac,_activeMenu$data16,_activeMenu$data16$ac;const additionalStocks=cartesian(activeMenu===null||activeMenu===void 0?void 0:(_activeMenu$data$extr3=activeMenu.data.extras)===null||_activeMenu$data$extr3===void 0?void 0:_activeMenu$data$extr3.map(extra=>extra.values||[]));const parsedAdditionalStocks=additionalStocks.map(item=>{var _activeMenu$data12,_activeMenu$data13;if(item.every(itemValue=>typeof itemValue.stock_id!=='undefined')){var _activeMenu$data11,_activeMenu$data11$ac,_selectedStock$addons2;const selectedStock=(_activeMenu$data11=activeMenu.data)===null||_activeMenu$data11===void 0?void 0:(_activeMenu$data11$ac=_activeMenu$data11.actualStocks)===null||_activeMenu$data11$ac===void 0?void 0:_activeMenu$data11$ac.find(stock=>{return stock.extras.every(extra=>{return item.some(addStock=>{var _extra$value5;return addStock.value===(extra===null||extra===void 0?void 0:(_extra$value5=extra.value)===null||_extra$value5===void 0?void 0:_extra$value5.id);});});});return{galleries:(selectedStock===null||selectedStock===void 0?void 0:selectedStock.galleries)||[],price:(selectedStock===null||selectedStock===void 0?void 0:selectedStock.price)||0,quantity:(selectedStock===null||selectedStock===void 0?void 0:selectedStock.quantity)||0,stock_id:selectedStock===null||selectedStock===void 0?void 0:selectedStock.id,tax:(activeMenu===null||activeMenu===void 0?void 0:activeMenu.data.tax)||0,addons:(selectedStock===null||selectedStock===void 0?void 0:(_selectedStock$addons2=selectedStock.addons)===null||_selectedStock$addons2===void 0?void 0:_selectedStock$addons2.map(item=>{var _item$product5,_item$product5$transl,_item$product6;return{label:(item===null||item===void 0?void 0:(_item$product5=item.product)===null||_item$product5===void 0?void 0:(_item$product5$transl=_item$product5.translation)===null||_item$product5$transl===void 0?void 0:_item$product5$transl.title)||(item===null||item===void 0?void 0:item.label),value:(item===null||item===void 0?void 0:(_item$product6=item.product)===null||_item$product6===void 0?void 0:_item$product6.id)||(item===null||item===void 0?void 0:item.value)};}))||[],...Object.assign({},...item.map((extra,idx)=>({[`extras[${idx}]`]:{label:extra.label,value:extra.value,group:activeMenu.data.extras[idx].label}})))};}return{price:0,quantity:0,tax:((_activeMenu$data12=activeMenu.data)===null||_activeMenu$data12===void 0?void 0:_activeMenu$data12.tax)||0,sku:activeMenu===null||activeMenu===void 0?void 0:(_activeMenu$data13=activeMenu.data)===null||_activeMenu$data13===void 0?void 0:_activeMenu$data13.sku,addons:[],...Object.assign({},...item.map((extra,idx)=>({[`extras[${idx}]`]:{label:extra.label,value:extra.value}})))};});let defaultStock=[];if(additionalStocks.length===0&&((_activeMenu$data14=activeMenu.data)===null||_activeMenu$data14===void 0?void 0:(_activeMenu$data14$ac=_activeMenu$data14.actualStocks)===null||_activeMenu$data14$ac===void 0?void 0:_activeMenu$data14$ac.length)!==0){var _activeMenu$data$actu,_activeMenu$data15,_stockWithoutExtras$a2;const stockWithoutExtras=(_activeMenu$data$actu=activeMenu.data.actualStocks)===null||_activeMenu$data$actu===void 0?void 0:_activeMenu$data$actu.at(0);defaultStock=[{price:(stockWithoutExtras===null||stockWithoutExtras===void 0?void 0:stockWithoutExtras.price)||0,quantity:(stockWithoutExtras===null||stockWithoutExtras===void 0?void 0:stockWithoutExtras.quantity)||0,sku:stockWithoutExtras===null||stockWithoutExtras===void 0?void 0:stockWithoutExtras.sku,tax:((_activeMenu$data15=activeMenu.data)===null||_activeMenu$data15===void 0?void 0:_activeMenu$data15.tax)||0,addons:stockWithoutExtras?(_stockWithoutExtras$a2=stockWithoutExtras.addons)===null||_stockWithoutExtras$a2===void 0?void 0:_stockWithoutExtras$a2.map(item=>{var _item$product7,_item$product7$transl,_item$product8;return{label:(item===null||item===void 0?void 0:(_item$product7=item.product)===null||_item$product7===void 0?void 0:(_item$product7$transl=_item$product7.translation)===null||_item$product7$transl===void 0?void 0:_item$product7$transl.title)||(item===null||item===void 0?void 0:item.label),value:(item===null||item===void 0?void 0:(_item$product8=item.product)===null||_item$product8===void 0?void 0:_item$product8.id)||(item===null||item===void 0?void 0:item.value)};}):[]}];}if(additionalStocks.length===0&&(activeMenu===null||activeMenu===void 0?void 0:(_activeMenu$data16=activeMenu.data)===null||_activeMenu$data16===void 0?void 0:(_activeMenu$data16$ac=_activeMenu$data16.actualStocks)===null||_activeMenu$data16$ac===void 0?void 0:_activeMenu$data16$ac.length)===0){var _activeMenu$data17;defaultStock=[{price:undefined,quantity:0,sku:activeMenu===null||activeMenu===void 0?void 0:activeMenu.data.sku,tax:((_activeMenu$data17=activeMenu.data)===null||_activeMenu$data17===void 0?void 0:_activeMenu$data17.tax)||0,addons:[]}];}const stocks=defaultStock.concat(parsedAdditionalStocks);setStockIds(activeMenu.data.actualStocks.map(item=>item.id));form.setFieldsValue({stocks});}else{var _activeMenu$data$stoc,_activeMenu$data18;const stocks=(_activeMenu$data$stoc=activeMenu.data.stocks)===null||_activeMenu$data$stoc===void 0?void 0:_activeMenu$data$stoc.map(stock=>({galleries:(stock===null||stock===void 0?void 0:stock.galleries)||[],price:stock.price,quantity:stock.quantity,tax:activeMenu.data.tax,stock_id:stock.stock_id,sku:stock.sku,...Object.assign({},...stock.ids.map((extra,idx)=>({[`extras[${idx}]`]:{label:extra.label,value:extra.value,group:extra.group}}))),addons:stock.addons}));setStockIds(((_activeMenu$data18=activeMenu.data)===null||_activeMenu$data18===void 0?void 0:_activeMenu$data18.delete_ids)||[]);form.setFieldsValue({stocks});}}else{fetchProduct(uuid);}},[isRequest,(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.generate]);function handleSetAllPrice(value){const{stocks}=form.getFieldsValue();form.setFieldsValue({stocks:assignObject(stocks,'price',value)});}function handleSetAllQuantity(value){const{stocks}=form.getFieldsValue();form.setFieldsValue({stocks:assignObject(stocks,'quantity',value)});}const assignObject=(obj,key,value)=>obj.map(item=>Object.assign(item,{[key]:value}));const handleSetAllSku=(generateRandom,value)=>{const skuValue=generateRandom?generateRandomNumbers(randomNumbersLength):value;const{stocks}=form.getFieldsValue();form.setFieldsValue({'set.all.sku':skuValue,stock:assignObject(stocks,'sku',skuValue)});};return/*#__PURE__*/_jsx(Card,{title:activeMenu.data[`title[${defaultLang}]`]?`${activeMenu.data[`title[${defaultLang}]`]}`:'',children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",form:form,onFinish:onFinish,children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"h2\",{children:t('set.all.values')}),/*#__PURE__*/_jsxs(Row,{gutter:12,align:\"middle\",children:[/*#__PURE__*/_jsx(Col,{span:5,style:{marginRight:'10px'},children:/*#__PURE__*/_jsx(Form.Item,{label:t('sku'),name:\"set.all.sku\",children:/*#__PURE__*/_jsx(Input,{className:\"w-100\",onChange:e=>handleSetAllSku(false,e.target.value)})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{label:' ',name:\"sku\",children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(DeploymentUnitOutlined,{}),onClick:()=>handleSetAllSku(true)})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Form.Item,{label:t('price'),name:'set.all.price',rules:[{type:'number',min:0,message:t('must.be.positive.number')}],children:/*#__PURE__*/_jsx(InputNumber,{className:\"w-100\",onChange:handleSetAllPrice})})}),/*#__PURE__*/_jsx(Col,{span:4,children:/*#__PURE__*/_jsx(Form.Item,{label:t('quantity'),name:'set.all.quantity',rules:[{type:'number',min:0,message:t('must.be.positive.number')}],children:/*#__PURE__*/_jsx(InputNumber,{className:\"w-100\",onChange:handleSetAllQuantity})})})]}),/*#__PURE__*/_jsx(Form.List,{name:\"stocks\",children:(fields,_ref3)=>{let{add,remove}=_ref3;return/*#__PURE__*/_jsx(\"div\",{children:fields.map((field,index)=>{var _activeMenu$data19,_activeMenu$data19$ex,_activeMenu$data20,_activeMenu$data20$ex;return/*#__PURE__*/_jsxs(Row,{gutter:12,align:\"middle\",style:{flexWrap:'nowrap',overflowX:'auto'},hidden:!((_activeMenu$data19=activeMenu.data)!==null&&_activeMenu$data19!==void 0&&(_activeMenu$data19$ex=_activeMenu$data19.extras)!==null&&_activeMenu$data19$ex!==void 0&&_activeMenu$data19$ex.length)&&field.key,children:[(_activeMenu$data20=activeMenu.data)===null||_activeMenu$data20===void 0?void 0:(_activeMenu$data20$ex=_activeMenu$data20.extras)===null||_activeMenu$data20$ex===void 0?void 0:_activeMenu$data20$ex.map((item,idx)=>/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{label:item===null||item===void 0?void 0:item.label,name:[index,`extras[${idx}]`],rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(AsyncSelect,{fetchOptions:()=>fetchExtra(item.value),className:\"w-100\",disabled:true,style:{minWidth:200}})})},'extra'+item.value)),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{label:t('sku'),name:[index,'sku'],children:/*#__PURE__*/_jsx(Input,{className:\"w-100\",style:{minWidth:200}})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{label:t('quantity'),name:[index,'quantity'],rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,className:\"w-100\",style:{minWidth:200}})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{label:`${t('price')} (${defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.symbol})`,name:[index,'price'],rules:[{required:true,message:t('requried')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,className:\"w-100\",style:{minWidth:200}})})}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Form.Item,{label:t('tax'),name:[index,'tax'],children:/*#__PURE__*/_jsx(InputNumber,{className:\"w-100\",disabled:true,style:{minWidth:200},addonAfter:\"%\"})}),/*#__PURE__*/_jsx(Form.Item,{hidden:true,label:t('id'),name:[index,'stock_id'],children:/*#__PURE__*/_jsx(InputNumber,{className:\"w-100\",disabled:true,style:{minWidth:200},addonAfter:\"%\"})})]}),' ',/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{noStyle:true,shouldUpdate:(prevValues,nextValues)=>prevValues.stocks[field.name].price!==nextValues.stocks[field.name].price,children:_ref4=>{let{getFieldValue}=_ref4;const tax=getFieldValue(['stocks',field.name,'tax'])||0;const price=getFieldValue(['stocks',field.name,'price']);const totalPrice=tax===0?price:(price*tax/100+price).toFixed(2);return/*#__PURE__*/_jsx(Form.Item,{label:`${t('total.price')} (${defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.symbol})`,children:/*#__PURE__*/_jsx(InputNumber,{min:1,disabled:true,value:totalPrice,className:\"w-100\",style:{minWidth:200}})});}})}),/*#__PURE__*/_jsx(Col,{children:(fields===null||fields===void 0?void 0:fields.length)>1?/*#__PURE__*/_jsx(Button,{type:\"primary\",className:\"mt-2\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),onClick:()=>{remove(field.name);}}):''})]},field.key);})});}}),/*#__PURE__*/_jsxs(Space,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Button,{onClick:prev,children:t('prev')}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:!!loadingBtn,children:t('next')})]})]})});};export default ProductStock;","map":null,"metadata":{},"sourceType":"module"}