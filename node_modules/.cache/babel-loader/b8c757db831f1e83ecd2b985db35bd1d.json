{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Form,Input,Modal}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{useTranslation}from'react-i18next';import Map from'../../../../components/map';import getDefaultLocation from'../../../../helpers/getDefaultLocation';import{getCartData}from'../../../../redux/selectors/cartSelector';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PosUserAddress(_ref){var _parentFormValues$loc,_parentFormValues$loc2,_parentFormValues$loc3;let{uuid,handleCancel,parentForm}=_ref;const{t}=useTranslation();const[form]=Form.useForm();const{defaultLang}=useSelector(state=>state.formLang,shallowEqual);const{currentBag}=useSelector(state=>state.cart,shallowEqual);const{settings}=useSelector(state=>state.globalSettings,shallowEqual);const parentFormValues=parentForm.getFieldsValue();const[location,setLocation]=useState((_parentFormValues$loc=parentFormValues.location)!==null&&_parentFormValues$loc!==void 0&&_parentFormValues$loc.latitude?{lat:(_parentFormValues$loc2=parentFormValues.location)===null||_parentFormValues$loc2===void 0?void 0:_parentFormValues$loc2.latitude,lng:(_parentFormValues$loc3=parentFormValues.location)===null||_parentFormValues$loc3===void 0?void 0:_parentFormValues$loc3.longitude}:getDefaultLocation(settings));const onFinish=values=>{const body={address:{address:values===null||values===void 0?void 0:values[`address[${defaultLang}]`]},location:{latitude:location.lat,longitude:location.lng}};parentForm.setFieldsValue(body);handleCancel();};useEffect(()=>{form.setFieldsValue({address:parentFormValues.address.address||null});},[currentBag]);return/*#__PURE__*/_jsx(Modal,{visible:!!uuid,title:t('create.address'),onCancel:handleCancel,footer:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>form.submit(),children:t('save')},'saveBtn'),/*#__PURE__*/_jsx(Button,{type:\"default\",onClick:handleCancel,children:t('cancel')},'cancelBtn')],children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",name:\"user-address\",form:form,onFinish:onFinish,initialValues:{[`address[${defaultLang}]`]:parentFormValues.address.address},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"address\",label:t('address'),rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:t('map'),children:/*#__PURE__*/_jsx(Map,{location:location,setLocation:setLocation,setAddress:value=>form.setFieldsValue({address:value})})})]})});}","map":null,"metadata":{},"sourceType":"module"}