{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/recepts/recept-stocks.js\",\n    _s = $RefreshSig$();\n\nimport { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Button, Col, Form, InputNumber, Row, Space } from 'antd';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { AsyncSelect } from '../../../components/async-select';\nimport productService from '../../../services/seller/product';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ReceptStocks = _ref => {\n  _s();\n\n  let {\n    next,\n    prev\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const form = Form.useFormInstance();\n  const stocks = Form.useWatch('stocks', form);\n\n  function fetchProductsStock(search) {\n    const params = {\n      perPage: 10,\n      page: 1,\n      search,\n      active: 1\n    };\n    return productService.getStock(params).then(res => res.data.filter(stock => !stocks.map(item => {\n      var _item$stock_id;\n\n      return item === null || item === void 0 ? void 0 : (_item$stock_id = item.stock_id) === null || _item$stock_id === void 0 ? void 0 : _item$stock_id.value;\n    }).includes(stock.id)).map(stock => ({\n      label: stock.product.translation.title + ' ' + stock.extras.map(ext => ext.value).join(', '),\n      value: stock.id\n    })));\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      gutter: 12,\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Form.List, {\n          name: \"stocks\",\n          initialValue: [{\n            stock_id: undefined,\n            min_quantity: undefined\n          }],\n          children: (fields, _ref2) => {\n            let {\n              add,\n              remove\n            } = _ref2;\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [fields.map((_ref3, i) => {\n                let {\n                  key,\n                  name,\n                  ...restField\n                } = _ref3;\n                return /*#__PURE__*/_jsxDEV(Row, {\n                  gutter: 12,\n                  align: \"middle\",\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    span: 11,\n                    children: /*#__PURE__*/_jsxDEV(Form.Item, { ...restField,\n                      label: t('stock'),\n                      name: [name, 'stock_id'],\n                      rules: [{\n                        required: true,\n                        message: t('required')\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(AsyncSelect, {\n                        fetchOptions: fetchProductsStock,\n                        debounceTimeout: 200\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 58,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 47,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 46,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    span: 11,\n                    children: /*#__PURE__*/_jsxDEV(Form.Item, { ...restField,\n                      label: t('min.quantity'),\n                      name: [name, 'min_quantity'],\n                      rules: [{\n                        required: true,\n                        message: t('required')\n                      }, {\n                        type: 'number',\n                        min: 1,\n                        message: t('must.be.at.least.1')\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                        className: \"w-100\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 81,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 65,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 21\n                  }, this), i !== 0 && /*#__PURE__*/_jsxDEV(Col, {\n                    span: 2,\n                    className: \"d-flex justify-content-end\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => remove(name),\n                      danger: true,\n                      className: \"w-100\",\n                      type: \"primary\",\n                      icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 91,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 86,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 85,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 45,\n                  columnNumber: 19\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(Form.Item, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: () => add(),\n                  block: true,\n                  icon: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 61\n                  }, this),\n                  children: t('add.stock')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"button\",\n        onClick: () => prev(),\n        children: t('prev')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"button\",\n        onClick: () => {\n          form.validateFields(stocks.flatMap((stock, i) => [['stocks', i, 'stock_id'], ['stocks', i, 'min_quantity']])).then(() => {\n            next();\n          });\n        },\n        children: t('next')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ReceptStocks, \"Wxyq2rOUgotQTmXcav1hdPFpz/w=\", false, function () {\n  return [useTranslation, Form.useFormInstance, Form.useWatch];\n});\n\n_c = ReceptStocks;\nexport default ReceptStocks;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReceptStocks\");","map":{"version":3,"names":["DeleteOutlined","PlusOutlined","Button","Col","Form","InputNumber","Row","Space","React","useTranslation","AsyncSelect","productService","ReceptStocks","next","prev","t","form","useFormInstance","stocks","useWatch","fetchProductsStock","search","params","perPage","page","active","getStock","then","res","data","filter","stock","map","item","stock_id","value","includes","id","label","product","translation","title","extras","ext","join","undefined","min_quantity","fields","add","remove","i","key","name","restField","required","message","type","min","validateFields","flatMap"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/recepts/recept-stocks.js"],"sourcesContent":["import { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Button, Col, Form, InputNumber, Row, Space } from 'antd';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { AsyncSelect } from '../../../components/async-select';\nimport productService from '../../../services/seller/product';\n\nconst ReceptStocks = ({ next, prev }) => {\n  const { t } = useTranslation();\n  const form = Form.useFormInstance();\n  const stocks = Form.useWatch('stocks', form);\n  function fetchProductsStock(search) {\n    const params = {\n      perPage: 10,\n      page: 1,\n      search,\n      active: 1,\n    };\n    return productService.getStock(params).then((res) =>\n      res.data\n        .filter(\n          (stock) =>\n            !stocks.map((item) => item?.stock_id?.value).includes(stock.id)\n        )\n        .map((stock) => ({\n          label:\n            stock.product.translation.title +\n            ' ' +\n            stock.extras.map((ext) => ext.value).join(', '),\n          value: stock.id,\n        }))\n    );\n  }\n  return (\n    <>\n      <Row gutter={12}>\n        <Col span={24}>\n          <Form.List\n            name='stocks'\n            initialValue={[{ stock_id: undefined, min_quantity: undefined }]}\n          >\n            {(fields, { add, remove }) => (\n              <>\n                {fields.map(({ key, name, ...restField }, i) => (\n                  <Row gutter={12} align='middle'>\n                    <Col span={11}>\n                      <Form.Item\n                        {...restField}\n                        label={t('stock')}\n                        name={[name, 'stock_id']}\n                        rules={[\n                          {\n                            required: true,\n                            message: t('required'),\n                          },\n                        ]}\n                      >\n                        <AsyncSelect\n                          fetchOptions={fetchProductsStock}\n                          debounceTimeout={200}\n                        />\n                      </Form.Item>\n                    </Col>\n                    <Col span={11}>\n                      <Form.Item\n                        {...restField}\n                        label={t('min.quantity')}\n                        name={[name, 'min_quantity']}\n                        rules={[\n                          {\n                            required: true,\n                            message: t('required'),\n                          },\n                          {\n                            type: 'number',\n                            min: 1,\n                            message: t('must.be.at.least.1'),\n                          },\n                        ]}\n                      >\n                        <InputNumber className='w-100' />\n                      </Form.Item>\n                    </Col>\n                    {i !== 0 && (\n                      <Col span={2} className='d-flex justify-content-end'>\n                        <Button\n                          onClick={() => remove(name)}\n                          danger\n                          className='w-100'\n                          type='primary'\n                          icon={<DeleteOutlined />}\n                        />\n                      </Col>\n                    )}\n                  </Row>\n                ))}\n\n                <Form.Item>\n                  <Button onClick={() => add()} block icon={<PlusOutlined />}>\n                    {t('add.stock')}\n                  </Button>\n                </Form.Item>\n              </>\n            )}\n          </Form.List>\n        </Col>\n      </Row>\n      <Space>\n        <Button type='primary' htmlType='button' onClick={() => prev()}>\n          {t('prev')}\n        </Button>\n        <Button\n          type='primary'\n          htmlType='button'\n          onClick={() => {\n            form\n              .validateFields(\n                stocks.flatMap((stock, i) => [\n                  ['stocks', i, 'stock_id'],\n                  ['stocks', i, 'min_quantity'],\n                ])\n              )\n              .then(() => {\n                next();\n              });\n          }}\n        >\n          {t('next')}\n        </Button>\n      </Space>\n    </>\n  );\n};\n\nexport default ReceptStocks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}