{"ast":null,"code":"import React,{useState}from'react';import{Button,Form,Modal}from'antd';import{useTranslation}from'react-i18next';import{DebounceSelect}from'../../../components/search';import{addMenu,setRefetch}from'../../../redux/slices/menu';import{shallowEqual,useDispatch,useSelector}from'react-redux';import sellerCategory from'../../../services/seller/category';import{useNavigate}from'react-router-dom';import{PlusCircleOutlined}from'@ant-design/icons';import{jsx as _jsx}from\"react/jsx-runtime\";export default function CreateCategory(_ref){let{isModalOpen,handleCancel}=_ref;const{t}=useTranslation();const[form]=Form.useForm();const[loading,setLoading]=useState(false);const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const dispatch=useDispatch();const navigate=useNavigate();const onFinish=values=>{const body={...Object.assign({},...values.title.map((item,index)=>({[`categories[${index}]`]:item.value}))),type:'main'};setLoading(true);sellerCategory.create(body).then(()=>{handleCancel();dispatch(setRefetch(activeMenu));}).catch(err=>console.error(err)).finally(()=>setLoading(false));};async function fetchCategories(search){const params={search:search.length!==0?search:null,perPage:10,type:'main'};return sellerCategory.search(params).then(_ref2=>{let{data}=_ref2;return data.map(item=>{var _item$translation;return{label:(_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title,value:item.id};});});}const goToAddCategory=()=>{dispatch(addMenu({url:`seller/category/add`,id:'seller/category/add',name:t('edit.category')}));navigate(`/seller/category/add`);};return/*#__PURE__*/_jsx(Modal,{visible:isModalOpen,title:t('add.category'),onCancel:handleCancel,footer:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>goToAddCategory(),loading:loading,icon:/*#__PURE__*/_jsx(PlusCircleOutlined,{}),children:t('add.new.category')},'add.new'),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>form.submit(),loading:loading,children:t('save')},'save.from'),/*#__PURE__*/_jsx(Button,{type:\"default\",onClick:handleCancel,children:t('cancel')},'cancel.form')],children:/*#__PURE__*/_jsx(Form,{layout:\"vertical\",name:\"user-address\",form:form,onFinish:onFinish,children:/*#__PURE__*/_jsx(Form.Item,{name:\"title\",label:t('title'),rules:[{required:true,message:'required'}],children:/*#__PURE__*/_jsx(DebounceSelect,{mode:\"multiple\",placeholder:\"Select category\",fetchOptions:fetchCategories,style:{minWidth:150}})})})});}","map":null,"metadata":{},"sourceType":"module"}