{"ast":null,"code":"import React,{useEffect,Suspense}from'react';import{Outlet}from'react-router-dom';import{shallowEqual,useDispatch,useSelector,batch}from'react-redux';import{Layout}from'antd';import Sidebar from'../components/sidebar';import TabMenu from'../components/tab-menu';import ChatIcons from'../views/chat/chat-icons';import Footer from'../components/footer';import languagesService from'../services/languages';import{setLangugages,setDefaultLanguage}from'../redux/slices/formLang';import{fetchAllShops}from'../redux/slices/allShops';import{fetchCurrencies,fetchRestCurrencies}from'../redux/slices/currency';import{data}from'../configs/menu-config';import{setUserData}from'../redux/slices/auth';import Loading from'../components/loading';import{fetchMyShop}from'../redux/slices/myShop';import SubscriptionsDate from'../components/subscriptions-date';import ParcelFloat from'views/parcel-order/parcel-float';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{Content}=Layout;const AppLayout=()=>{const dispatch=useDispatch();const{languages}=useSelector(state=>state.formLang,shallowEqual);const{user}=useSelector(state=>state.auth,shallowEqual);const{direction,navCollapsed}=useSelector(state=>state.theme.theme,shallowEqual);const fetchLanguages=()=>{languagesService.getAllActive().then(_ref=>{let{data}=_ref;batch(()=>{var _data$find;dispatch(setLangugages(data));dispatch(setDefaultLanguage((data===null||data===void 0?void 0:(_data$find=data.find(item=>item===null||item===void 0?void 0:item.default))===null||_data$find===void 0?void 0:_data$find.locale)||'en'));});});};useEffect(()=>{const body={page:1,perPage:1,status:'approved'};if(!languages.length){fetchLanguages();}if((user===null||user===void 0?void 0:user.role)==='seller'||(user===null||user===void 0?void 0:user.role)==='moderator'){dispatch(fetchMyShop());}if((user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='manager'){dispatch(fetchAllShops(body));dispatch(fetchCurrencies());}else{dispatch(fetchRestCurrencies());}},[]);useEffect(()=>{// for development purpose only\nconst userObj={...user,urls:data[user.role]};dispatch(setUserData(userObj));},[]);const getLayoutGutter=()=>{// return navCollapsed ? SIDE_NAV_COLLAPSED_WIDTH : SIDE_NAV_WIDTH\nreturn navCollapsed?80:250;};const getLayoutDirectionGutter=()=>{if(direction==='ltr'){return{paddingLeft:getLayoutGutter(),minHeight:'100vh'};}if(direction==='rtl'){return{paddingRight:getLayoutGutter(),minHeight:'100vh'};}return{paddingLeft:getLayoutGutter()};};return/*#__PURE__*/_jsxs(Layout,{className:\"app-container\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(Layout,{className:\"app-layout\",style:getLayoutDirectionGutter(),children:[/*#__PURE__*/_jsx(TabMenu,{}),/*#__PURE__*/_jsx(Content,{className:\"p-3\",style:{flex:'1 0 70%'},children:/*#__PURE__*/_jsxs(Suspense,{fallback:/*#__PURE__*/_jsx(Loading,{}),children:[/*#__PURE__*/_jsx(SubscriptionsDate,{}),/*#__PURE__*/_jsx(Outlet,{})]})}),/*#__PURE__*/_jsx(Footer,{})]}),(user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='seller'||(user===null||user===void 0?void 0:user.role)==='deliveryman'?/*#__PURE__*/_jsx(ChatIcons,{}):'',(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(ParcelFloat,{})]});};export default AppLayout;","map":null,"metadata":{},"sourceType":"module"}