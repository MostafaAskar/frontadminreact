{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/recepts/recept-stocks.js\",\n    _s = $RefreshSig$();\n\nimport { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Button, Col, Form, InputNumber, Row, Space } from 'antd';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport productService from '../../services/product';\nimport { InfiniteSelect } from 'components/infinite-select';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ReceptStocks = _ref => {\n  _s();\n\n  let {\n    next,\n    prev\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const form = Form.useFormInstance();\n  const stocks = Form.useWatch('stocks', form);\n  const shop = Form.useWatch('shop_id', form);\n  const [links, setLinks] = useState(null);\n\n  function fetchProductsStock(_ref2) {\n    let {\n      search,\n      page\n    } = _ref2;\n    const params = {\n      search: (search === null || search === void 0 ? void 0 : search.length) === 0 ? undefined : search,\n      shop_id: shop.value,\n      page: page,\n      status: 'published'\n    };\n    return productService.getStock(params).then(res => {\n      setLinks(res.links);\n      return res.data.filter(stock => !stocks.map(item => {\n        var _item$stock_id;\n\n        return item === null || item === void 0 ? void 0 : (_item$stock_id = item.stock_id) === null || _item$stock_id === void 0 ? void 0 : _item$stock_id.value;\n      }).includes(stock.id)).map(stock => ({\n        label: stock.product.translation.title + ' ' + stock.extras.map(ext => ext.value).join(', '),\n        value: stock.id\n      }));\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      gutter: 12,\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Form.List, {\n          name: \"stocks\",\n          initialValue: [{\n            stock_id: undefined,\n            min_quantity: undefined\n          }],\n          children: (fields, _ref3) => {\n            let {\n              add,\n              remove\n            } = _ref3;\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [fields.map((_ref4, i) => {\n                let {\n                  key,\n                  name,\n                  ...restField\n                } = _ref4;\n                return /*#__PURE__*/_jsxDEV(Row, {\n                  gutter: 12,\n                  align: \"middle\",\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    span: 11,\n                    children: /*#__PURE__*/_jsxDEV(Form.Item, { ...restField,\n                      label: t('stock'),\n                      name: [name, 'stock_id'],\n                      rules: [{\n                        required: true,\n                        message: t('required')\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(InfiniteSelect, {\n                        fetchOptions: fetchProductsStock,\n                        debounceTimeout: 200,\n                        hasMore: links === null || links === void 0 ? void 0 : links.next\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 63,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 52,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 51,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    span: 11,\n                    children: /*#__PURE__*/_jsxDEV(Form.Item, { ...restField,\n                      label: t('min.quantity'),\n                      name: [name, 'min_quantity'],\n                      rules: [{\n                        required: true,\n                        message: t('required')\n                      }],\n                      children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                        min: 1,\n                        className: \"w-100\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 82,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 71,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 21\n                  }, this), i !== 0 && /*#__PURE__*/_jsxDEV(Col, {\n                    span: 2,\n                    className: \"d-flex justify-content-end\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => remove(name),\n                      danger: true,\n                      className: \"w-100\",\n                      type: \"primary\",\n                      icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 92,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 87,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 50,\n                  columnNumber: 19\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(Form.Item, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: () => add(),\n                  block: true,\n                  icon: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 61\n                  }, this),\n                  children: t('add.stock')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"button\",\n        onClick: () => prev(),\n        children: t('prev')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"button\",\n        onClick: () => {\n          form.validateFields(stocks.flatMap((stock, i) => [['stocks', i, 'stock_id'], ['stocks', i, 'min_quantity']])).then(() => {\n            next();\n          });\n        },\n        children: t('next')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ReceptStocks, \"Gzvyyk2wxEJMspf87W00oZ8c7AM=\", false, function () {\n  return [useTranslation, Form.useFormInstance, Form.useWatch, Form.useWatch];\n});\n\n_c = ReceptStocks;\nexport default ReceptStocks;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReceptStocks\");","map":{"version":3,"names":["DeleteOutlined","PlusOutlined","Button","Col","Form","InputNumber","Row","Space","React","useState","useTranslation","productService","InfiniteSelect","ReceptStocks","next","prev","t","form","useFormInstance","stocks","useWatch","shop","links","setLinks","fetchProductsStock","search","page","params","length","undefined","shop_id","value","status","getStock","then","res","data","filter","stock","map","item","stock_id","includes","id","label","product","translation","title","extras","ext","join","min_quantity","fields","add","remove","i","key","name","restField","required","message","validateFields","flatMap"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/recepts/recept-stocks.js"],"sourcesContent":["import { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Button, Col, Form, InputNumber, Row, Space } from 'antd';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport productService from '../../services/product';\nimport { InfiniteSelect } from 'components/infinite-select';\n\nconst ReceptStocks = ({ next, prev }) => {\n  const { t } = useTranslation();\n  const form = Form.useFormInstance();\n  const stocks = Form.useWatch('stocks', form);\n  const shop = Form.useWatch('shop_id', form);\n  const [links, setLinks] = useState(null);\n\n  function fetchProductsStock({ search, page }) {\n    const params = {\n      search: search?.length === 0 ? undefined : search,\n      shop_id: shop.value,\n      page: page,\n      status: 'published',\n    };\n    return productService.getStock(params).then((res) => {\n      setLinks(res.links);\n      return res.data\n        .filter(\n          (stock) =>\n            !stocks.map((item) => item?.stock_id?.value).includes(stock.id)\n        )\n        .map((stock) => ({\n          label:\n            stock.product.translation.title +\n            ' ' +\n            stock.extras.map((ext) => ext.value).join(', '),\n          value: stock.id,\n        }));\n    });\n  }\n\n  return (\n    <>\n      <Row gutter={12}>\n        <Col span={24}>\n          <Form.List\n            name='stocks'\n            initialValue={[{ stock_id: undefined, min_quantity: undefined }]}\n          >\n            {(fields, { add, remove }) => (\n              <>\n                {fields.map(({ key, name, ...restField }, i) => (\n                  <Row gutter={12} align='middle'>\n                    <Col span={11}>\n                      <Form.Item\n                        {...restField}\n                        label={t('stock')}\n                        name={[name, 'stock_id']}\n                        rules={[\n                          {\n                            required: true,\n                            message: t('required'),\n                          },\n                        ]}\n                      >\n                        <InfiniteSelect\n                          fetchOptions={fetchProductsStock}\n                          debounceTimeout={200}\n                          hasMore={links?.next}\n                        />\n                      </Form.Item>\n                    </Col>\n                    <Col span={11}>\n                      <Form.Item\n                        {...restField}\n                        label={t('min.quantity')}\n                        name={[name, 'min_quantity']}\n                        rules={[\n                          {\n                            required: true,\n                            message: t('required'),\n                          },\n                        ]}\n                      >\n                        <InputNumber min={1} className='w-100' />\n                      </Form.Item>\n                    </Col>\n                    {i !== 0 && (\n                      <Col span={2} className='d-flex justify-content-end'>\n                        <Button\n                          onClick={() => remove(name)}\n                          danger\n                          className='w-100'\n                          type='primary'\n                          icon={<DeleteOutlined />}\n                        />\n                      </Col>\n                    )}\n                  </Row>\n                ))}\n\n                <Form.Item>\n                  <Button onClick={() => add()} block icon={<PlusOutlined />}>\n                    {t('add.stock')}\n                  </Button>\n                </Form.Item>\n              </>\n            )}\n          </Form.List>\n        </Col>\n      </Row>\n      <Space>\n        <Button type='primary' htmlType='button' onClick={() => prev()}>\n          {t('prev')}\n        </Button>\n        <Button\n          type='primary'\n          htmlType='button'\n          onClick={() => {\n            form\n              .validateFields(\n                stocks.flatMap((stock, i) => [\n                  ['stocks', i, 'stock_id'],\n                  ['stocks', i, 'min_quantity'],\n                ])\n              )\n              .then(() => {\n                next();\n              });\n          }}\n        >\n          {t('next')}\n        </Button>\n      </Space>\n    </>\n  );\n};\n\nexport default ReceptStocks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}