{"ast":null,"code":"import{Button,Col,Form,Input,InputNumber,Row,Select,Space}from'antd';import React,{useState}from'react';import{useTranslation}from'react-i18next';import{useDispatch}from'react-redux';import{shallowEqual,useSelector}from'react-redux';import{toast}from'react-toastify';import ImageUploadSingle from'components/image-upload-single';import settingService from'services/settings';import{Time}from'./deliveryman_time';import{fetchSettings as getSettings}from'redux/slices/globalSettings';import useDemo from'helpers/useDemo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Setting=_ref=>{let{setFavicon,favicon,setLogo,logo}=_ref;const{t}=useTranslation();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const dispatch=useDispatch();const[loadingBtn,setLoadingBtn]=useState(false);const[form]=Form.useForm();const{isDemo}=useDemo();function updateSettings(data){setLoadingBtn(true);settingService.update(data).then(()=>{toast.success(t('successfully.updated'));dispatch(getSettings());}).finally(()=>setLoadingBtn(false));}const onFinish=values=>{const body={...values,favicon:favicon.name,logo:logo.name};updateSettings(body);};return/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",form:form,name:\"global-settings\",onFinish:onFinish,initialValues:{delivery:'1',// payment_type: 'admin',\ndeliveryman_order_acceptance_time:30,...activeMenu.data},children:[/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('title'),name:\"title\",rules:[{validator(_,value){if(!value){return Promise.reject(new Error(t('required')));}else if(value&&(value===null||value===void 0?void 0:value.trim())===''){return Promise.reject(new Error(t('no.empty.space')));}else if(value&&(value===null||value===void 0?void 0:value.trim().length)<2){return Promise.reject(new Error(t('must.be.at.least.2')));}return Promise.resolve();}}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('deliveryman.order.acceptance.time'),name:\"deliveryman_order_acceptance_time\",children:/*#__PURE__*/_jsx(Select,{options:Time})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('service.fee'),name:\"service_fee\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,className:\"w-100\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('min.amount'),name:\"min_amount\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,className:\"w-100\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Form.Item,{label:t('favicon'),name:\"favicon\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(ImageUploadSingle,{type:\"languages\",image:favicon,setImage:setFavicon,form:form,name:\"favicon\"})}),/*#__PURE__*/_jsx(Form.Item,{label:t('logo'),name:\"logo\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(ImageUploadSingle,{type:\"languages\",image:logo,setImage:setLogo,form:form,name:\"logo\"})})]})})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>form.submit(),type:\"primary\",disabled:isDemo,loading:loadingBtn,children:t('save')})]});};export default Setting;","map":null,"metadata":{},"sourceType":"module"}