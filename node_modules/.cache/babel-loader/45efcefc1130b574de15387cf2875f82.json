{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/dashboard/topCustomers.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Card, Col, Image, Row, Select, Space, Spin } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport { fetchTopCustomers, filterTopCustomers, fetchSellerTopCustomers } from '../../redux/slices/statistics/topCustomers';\nimport { useTranslation } from 'react-i18next';\nimport getAvatar from '../../helpers/getAvatar';\nimport RiveResult from '../../components/rive-result';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TopCustomers() {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const {\n    topCustomers,\n    loading,\n    params\n  } = useSelector(state => state.topCustomers, shallowEqual);\n  const {\n    defaultCurrency\n  } = useSelector(state => state.currency, shallowEqual);\n  const {\n    role\n  } = useSelector(state => state.auth.user, shallowEqual);\n\n  const handleChange = (item, value) => {\n    const payload = { ...params,\n      [item]: value\n    };\n    dispatch(filterTopCustomers(payload));\n\n    switch (role) {\n      case 'admin':\n        dispatch(fetchTopCustomers(payload));\n        break;\n\n      case 'seller':\n        dispatch(fetchSellerTopCustomers(payload));\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('top.customers'),\n    extra: /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(Select, {\n        value: params.perPage,\n        size: \"small\",\n        style: {\n          minWidth: 110\n        },\n        onSelect: value => handleChange('perPage', value),\n        children: [/*#__PURE__*/_jsxDEV(Select.Option, {\n          value: 5,\n          children: `5 / ${t('page')}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n          value: 10,\n          children: `10 / ${t('page')}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n          value: 50,\n          children: `50 / ${t('page')}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n          value: 100,\n          children: `100 / ${t('page')}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        value: params.time,\n        size: \"small\",\n        style: {\n          minWidth: 110\n        },\n        onSelect: value => handleChange('time', value),\n        defaultValue: \"subMonth\",\n        children: [/*#__PURE__*/_jsxDEV(Select.Option, {\n          value: \"subWeek\",\n          children: t('this.week')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n          value: \"subMonth\",\n          children: t('this.month')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n          value: \"subYear\",\n          children: t('this.year')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this),\n    className: \"h-100\",\n    children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        overflowY: 'auto',\n        maxHeight: 370\n      },\n      children: topCustomers.length ? topCustomers.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-100 py-3 flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex avatar\",\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            src: getAvatar(item.img),\n            width: 40,\n            height: 40,\n            preview: false,\n            className: \"rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-2 avatar-text\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"title\",\n              children: item.firstname + ' ' + item.lastname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-muted\",\n              children: item.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mr-3 text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-muted\",\n              children: [item.count, \" \", t('orders')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-0 h5 font-weight-bold\",\n              children: numberToPrice(item.total_price, defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.symbol, defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.position)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(RiveResult, {\n            id: \"nosell\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TopCustomers, \"mF0xA8tTfeU26HfG8jEDOa6mbg4=\", false, function () {\n  return [useTranslation, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = TopCustomers;\n\nvar _c;\n\n$RefreshReg$(_c, \"TopCustomers\");","map":{"version":3,"names":["React","Card","Col","Image","Row","Select","Space","Spin","shallowEqual","useDispatch","useSelector","numberToPrice","fetchTopCustomers","filterTopCustomers","fetchSellerTopCustomers","useTranslation","getAvatar","RiveResult","TopCustomers","t","dispatch","topCustomers","loading","params","state","defaultCurrency","currency","role","auth","user","handleChange","item","value","payload","perPage","minWidth","time","overflowY","maxHeight","length","map","idx","img","firstname","lastname","phone","count","total_price","symbol","position"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/dashboard/topCustomers.js"],"sourcesContent":["import React from 'react';\nimport { Card, Col, Image, Row, Select, Space, Spin } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport {\n  fetchTopCustomers,\n  filterTopCustomers,\n  fetchSellerTopCustomers,\n} from '../../redux/slices/statistics/topCustomers';\nimport { useTranslation } from 'react-i18next';\nimport getAvatar from '../../helpers/getAvatar';\nimport RiveResult from '../../components/rive-result';\n\nexport default function TopCustomers() {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { topCustomers, loading, params } = useSelector(\n    (state) => state.topCustomers,\n    shallowEqual,\n  );\n  const { defaultCurrency } = useSelector(\n    (state) => state.currency,\n    shallowEqual,\n  );\n  const { role } = useSelector((state) => state.auth.user, shallowEqual);\n\n  const handleChange = (item, value) => {\n    const payload = { ...params, [item]: value };\n    dispatch(filterTopCustomers(payload));\n    switch (role) {\n      case 'admin':\n        dispatch(fetchTopCustomers(payload));\n        break;\n      case 'seller':\n        dispatch(fetchSellerTopCustomers(payload));\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return (\n    <Card\n      title={t('top.customers')}\n      extra={\n        <Space>\n          <Select\n            value={params.perPage}\n            size='small'\n            style={{ minWidth: 110 }}\n            onSelect={(value) => handleChange('perPage', value)}\n          >\n            <Select.Option value={5}>{`5 / ${t('page')}`}</Select.Option>\n            <Select.Option value={10}>{`10 / ${t('page')}`}</Select.Option>\n            <Select.Option value={50}>{`50 / ${t('page')}`}</Select.Option>\n            <Select.Option value={100}>{`100 / ${t('page')}`}</Select.Option>\n          </Select>\n          <Select\n            value={params.time}\n            size='small'\n            style={{ minWidth: 110 }}\n            onSelect={(value) => handleChange('time', value)}\n            defaultValue='subMonth'\n          >\n            <Select.Option value='subWeek'>{t('this.week')}</Select.Option>\n            <Select.Option value='subMonth'>{t('this.month')}</Select.Option>\n            <Select.Option value='subYear'>{t('this.year')}</Select.Option>\n          </Select>\n        </Space>\n      }\n      className='h-100'\n    >\n      {loading && (\n        <div className='loader'>\n          <Spin />\n        </div>\n      )}\n      <div style={{ overflowY: 'auto', maxHeight: 370 }}>\n        {topCustomers.length ? (\n          topCustomers.map((item, idx) => (\n            <div className='w-100 py-3 flex' key={idx}>\n              <div className='d-flex avatar'>\n                <Image\n                  src={getAvatar(item.img)}\n                  width={40}\n                  height={40}\n                  preview={false}\n                  className='rounded'\n                />\n                <div className='ml-2 avatar-text'>\n                  <h5 className='title'>\n                    {item.firstname + ' ' + item.lastname}\n                  </h5>\n                  <div className='text-muted'>{item.phone}</div>\n                </div>\n              </div>\n              <div className='d-flex'>\n                <div className='mr-3 text-right'>\n                  <span className='text-muted'>\n                    {item.count} {t('orders')}\n                  </span>\n                  <div className='mb-0 h5 font-weight-bold'>\n                    {numberToPrice(\n                      item.total_price,\n                      defaultCurrency?.symbol,\n                      defaultCurrency?.position,\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))\n        ) : (\n          <Row>\n            <Col span={24}>\n              <RiveResult id='nosell' />\n            </Col>\n          </Row>\n        )}\n      </div>\n    </Card>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}