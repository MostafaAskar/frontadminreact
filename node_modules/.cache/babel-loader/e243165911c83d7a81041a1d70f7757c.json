{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/notification-drawer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Button, Drawer, List } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { addMenu } from 'redux/slices/menu';\nimport { useNavigate } from 'react-router-dom';\nimport notificationService from 'services/notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NotificationDrawer(_ref) {\n  _s();\n\n  let {\n    handleClose,\n    visible,\n    list,\n    readAll,\n    loading,\n    paginate,\n    setPaginate\n  } = _ref;\n  const {\n    user\n  } = useSelector(state => state.auth, shallowEqual);\n  const {\n    direction\n  } = useSelector(state => state.theme.theme, shallowEqual);\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const goToShow = id => {\n    let url = '';\n\n    switch (user.role) {\n      case 'admin':\n        url = `order/details/${id}`;\n        break;\n\n      case 'manager':\n        url = `order/details/${id}`;\n        break;\n\n      case 'seller':\n        url = `seller/order/details/${id}`;\n        break;\n\n      case 'moderator':\n        url = `seller/order/details/${id}`;\n        break;\n\n      case 'deliveryman':\n        url = `deliveryman/order/details/${id}`;\n        break;\n\n      default:\n        break;\n    }\n\n    dispatch(addMenu({\n      url,\n      id: 'order_details',\n      name: t('order.details')\n    }));\n    navigate(`/${url}`);\n  };\n\n  const fetchReadAtNotification = id => {\n    notificationService.readAt(id).then(() => {});\n  };\n\n  const handleClickNotification = item => {\n    if ((item === null || item === void 0 ? void 0 : item.model_type) === 'order') {\n      var _item$data;\n\n      const orderId = item === null || item === void 0 ? void 0 : (_item$data = item.data) === null || _item$data === void 0 ? void 0 : _item$data.id;\n      const id = item === null || item === void 0 ? void 0 : item.id;\n      handleClose();\n      goToShow(orderId);\n      fetchReadAtNotification(id);\n    }\n  };\n\n  const handleReadAll = () => {\n    readAll().finally(() => handleClose());\n  };\n\n  return /*#__PURE__*/_jsxDEV(Drawer, {\n    title: t('notifications'),\n    placement: direction === 'rtl' ? 'right' : 'left',\n    closable: false,\n    onClose: handleClose,\n    visible: visible,\n    extra: /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleReadAll,\n      children: t('read.all')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 14\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(List, {\n      size: \"small\",\n      itemLayout: \"horizontal\",\n      dataSource: list,\n      loading: loading,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        className: \"list-clickable\",\n        onClick: () => handleClickNotification(item),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-1\",\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            columnGap: '10px'\n          },\n          children: [!(item !== null && item !== void 0 && item.read_at) && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'block',\n              width: '5px',\n              height: '5px',\n              borderRadius: '50%',\n              backgroundColor: 'tomato'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-weight-bold\",\n            children: item === null || item === void 0 ? void 0 : item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => setPaginate({\n        page: paginate.page + 1\n      }),\n      className: \"w-100 mt-4\",\n      type: \"primary\",\n      disabled: loading,\n      children: t('load.more')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, 'left', true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NotificationDrawer, \"CKw2trawf4zYwtGyco89EWRrG2k=\", false, function () {\n  return [useSelector, useSelector, useTranslation, useDispatch, useNavigate];\n});\n\n_c = NotificationDrawer;\n\nvar _c;\n\n$RefreshReg$(_c, \"NotificationDrawer\");","map":{"version":3,"names":["React","useEffect","Button","Drawer","List","useTranslation","shallowEqual","useDispatch","useSelector","addMenu","useNavigate","notificationService","NotificationDrawer","handleClose","visible","list","readAll","loading","paginate","setPaginate","user","state","auth","direction","theme","t","dispatch","navigate","goToShow","id","url","role","name","fetchReadAtNotification","readAt","then","handleClickNotification","item","model_type","orderId","data","handleReadAll","finally","display","alignItems","columnGap","read_at","width","height","borderRadius","backgroundColor","title","page"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/notification-drawer.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Button, Drawer, List } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { addMenu } from 'redux/slices/menu';\nimport { useNavigate } from 'react-router-dom';\nimport notificationService from 'services/notification';\n\nexport default function NotificationDrawer({\n  handleClose,\n  visible,\n  list,\n  readAll,\n  loading,\n  paginate,\n  setPaginate,\n}) {\n  const { user } = useSelector((state) => state.auth, shallowEqual);\n  const { direction } = useSelector((state) => state.theme.theme, shallowEqual);\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const goToShow = (id) => {\n    let url = '';\n    switch (user.role) {\n      case 'admin':\n        url = `order/details/${id}`;\n        break;\n      case 'manager':\n        url = `order/details/${id}`;\n        break;\n      case 'seller':\n        url = `seller/order/details/${id}`;\n        break;\n      case 'moderator':\n        url = `seller/order/details/${id}`;\n        break;\n      case 'deliveryman':\n        url = `deliveryman/order/details/${id}`;\n        break;\n\n      default:\n        break;\n    }\n    dispatch(\n      addMenu({\n        url,\n        id: 'order_details',\n        name: t('order.details'),\n      }),\n    );\n    navigate(`/${url}`);\n  };\n\n  const fetchReadAtNotification = (id) => {\n    notificationService.readAt(id).then(() => {});\n  };\n\n  const handleClickNotification = (item) => {\n    if (item?.model_type === 'order') {\n      const orderId = item?.data?.id;\n      const id = item?.id;\n      handleClose();\n      goToShow(orderId);\n      fetchReadAtNotification(id);\n    }\n  };\n\n  const handleReadAll = () => {\n    readAll().finally(() => handleClose());\n  };\n\n  return (\n    <Drawer\n      title={t('notifications')}\n      placement={direction === 'rtl' ? 'right' : 'left'}\n      closable={false}\n      onClose={handleClose}\n      visible={visible}\n      key={'left'}\n      extra={<Button onClick={handleReadAll}>{t('read.all')}</Button>}\n    >\n      <List\n        size='small'\n        itemLayout='horizontal'\n        dataSource={list}\n        loading={loading}\n        renderItem={(item) => (\n          <List.Item\n            className='list-clickable'\n            onClick={() => handleClickNotification(item)}\n          >\n            <div\n              className='py-1'\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                columnGap: '10px',\n              }}\n            >\n              {!item?.read_at && (\n                <span\n                  style={{\n                    display: 'block',\n                    width: '5px',\n                    height: '5px',\n                    borderRadius: '50%',\n                    backgroundColor: 'tomato',\n                  }}\n                />\n              )}\n              <span className='font-weight-bold'>{item?.title}</span>\n            </div>\n          </List.Item>\n        )}\n      />\n      <Button\n        onClick={() => setPaginate({ page: paginate.page + 1 })}\n        className='w-100 mt-4'\n        type='primary'\n        disabled={loading}\n      >\n        {t('load.more')}\n      </Button>\n    </Drawer>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}