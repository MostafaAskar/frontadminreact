{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/products/product-gallery.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { QuestionCircleOutlined } from '@ant-design/icons';\nimport { t } from 'i18next';\nimport { Badge, Button, Card, Col, Divider, Row, Space, Tooltip } from 'antd';\nimport { GetColorName } from 'hex-color-to-color-name';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport MediaUploadExtrasImage from 'components/upload/upload-extras-image';\nimport productService from 'services/product';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst text = 'In the process of internal desktop applications development';\n\nconst ProductGallery = _ref => {\n  _s();\n\n  var _filteredExtras$value;\n\n  let {\n    prev,\n    next\n  } = _ref;\n  const [fileList, setFileList] = useState([]);\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    newExtras\n  } = (activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data) || {};\n  const filteredExtras = useMemo(() => newExtras === null || newExtras === void 0 ? void 0 : newExtras.find(item => {\n    var _item$group;\n\n    return (item === null || item === void 0 ? void 0 : (_item$group = item.group) === null || _item$group === void 0 ? void 0 : _item$group.type) === 'color';\n  }), [newExtras]);\n  const uniqueData = Array.from(new Set(filteredExtras === null || filteredExtras === void 0 ? void 0 : (_filteredExtras$value = filteredExtras.values) === null || _filteredExtras$value === void 0 ? void 0 : _filteredExtras$value.map(item => item.value))).map(value => {\n    var _filteredExtras$value2;\n\n    return filteredExtras === null || filteredExtras === void 0 ? void 0 : (_filteredExtras$value2 = filteredExtras.values) === null || _filteredExtras$value2 === void 0 ? void 0 : _filteredExtras$value2.find(item => item.value === value);\n  });\n  const colorItems = uniqueData.filter(item => item.group_type === 'color');\n\n  const createImage = file => {\n    return {\n      uid: file.path,\n      name: file.path,\n      status: 'done',\n      // done, uploading, error\n      url: file.path,\n      created: true\n    };\n  };\n\n  const setInitialState = () => {\n    const newArray = activeMenu.data.stocks.map(_ref2 => {\n      let {\n        id,\n        galleries\n      } = _ref2;\n      return {\n        id,\n        images: (galleries === null || galleries === void 0 ? void 0 : galleries.map(createImage)) || []\n      };\n    });\n    setFileList(newArray);\n  };\n\n  const updateStocks = () => {\n    if (!fileList.length) {\n      next();\n      return;\n    }\n\n    const array = fileList.map(item => {\n      return { ...item,\n        images: item.images.map(img => img.name)\n      };\n    });\n    productService.updateStocks({\n      data: array\n    }).then(() => {\n      next();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    setInitialState();\n  }, [activeMenu.data]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: /*#__PURE__*/_jsxDEV(Tooltip, {\n      placement: \"topLeft\",\n      title: text,\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        children: [t('add.media.file'), /*#__PURE__*/_jsxDEV(QuestionCircleOutlined, {\n          style: {\n            fontSize: 16,\n            cursor: 'pointer'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      gutter: [24, 24],\n      children: colorItems === null || colorItems === void 0 ? void 0 : colorItems.map(_ref3 => {\n        let {\n          label,\n          stock_id,\n          value\n        } = _ref3;\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 24,\n            children: [/*#__PURE__*/_jsxDEV(Space, {\n              className: \"mb-4\",\n              children: /*#__PURE__*/_jsxDEV(Badge, {\n                color: label || value,\n                className: \"extras-color-badge\",\n                text: `${label || value} - ${GetColorName(label || value)}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MediaUploadExtrasImage, {\n              id: stock_id,\n              fileList: fileList,\n              setFileList: setFileList,\n              type: \"stocks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Space, {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: prev,\n        children: t('prev')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        onClick: updateStocks,\n        children: t('next')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductGallery, \"5UhY4yFrcKGLIDSRTlAp+I7IsFs=\", false, function () {\n  return [useSelector];\n});\n\n_c = ProductGallery;\nexport default ProductGallery;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductGallery\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","QuestionCircleOutlined","t","Badge","Button","Card","Col","Divider","Row","Space","Tooltip","GetColorName","shallowEqual","useSelector","MediaUploadExtrasImage","productService","text","ProductGallery","prev","next","fileList","setFileList","activeMenu","state","menu","newExtras","data","filteredExtras","find","item","group","type","uniqueData","Array","from","Set","values","map","value","colorItems","filter","group_type","createImage","file","uid","path","name","status","url","created","setInitialState","newArray","stocks","id","galleries","images","updateStocks","length","array","img","then","catch","error","console","log","fontSize","cursor","label","stock_id"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/products/product-gallery.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { QuestionCircleOutlined } from '@ant-design/icons';\nimport { t } from 'i18next';\nimport { Badge, Button, Card, Col, Divider, Row, Space, Tooltip } from 'antd';\nimport { GetColorName } from 'hex-color-to-color-name';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport MediaUploadExtrasImage from 'components/upload/upload-extras-image';\nimport productService from 'services/product';\nconst text = 'In the process of internal desktop applications development';\n\nconst ProductGallery = ({ prev, next }) => {\n  const [fileList, setFileList] = useState([]);\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { newExtras } = activeMenu?.data || {};\n  const filteredExtras = useMemo(\n    () => newExtras?.find((item) => item?.group?.type === 'color'),\n    [newExtras]\n  );\n  const uniqueData = Array.from(\n    new Set(filteredExtras?.values?.map((item) => item.value))\n  ).map((value) => {\n    return filteredExtras?.values?.find((item) => item.value === value);\n  });\n  const colorItems = uniqueData.filter((item) => item.group_type === 'color');\n\n  const createImage = (file) => {\n    return {\n      uid: file.path,\n      name: file.path,\n      status: 'done', // done, uploading, error\n      url: file.path,\n      created: true,\n    };\n  };\n  const setInitialState = () => {\n    const newArray = activeMenu.data.stocks.map(({ id, galleries }) => ({\n      id,\n      images: galleries?.map(createImage) || [],\n    }));\n    setFileList(newArray);\n  };\n\n  const updateStocks = () => {\n    if (!fileList.length) {\n      next();\n      return;\n    }\n    const array = fileList.map((item) => {\n      return {\n        ...item,\n        images: item.images.map((img) => img.name),\n      };\n    });\n    productService\n      .updateStocks({ data: array })\n      .then(() => {\n        next();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    setInitialState();\n  }, [activeMenu.data]);\n\n  return (\n    <Card\n      title={\n        <Tooltip placement='topLeft' title={text}>\n          <Space>\n            {t('add.media.file')}\n            <QuestionCircleOutlined\n              style={{ fontSize: 16, cursor: 'pointer' }}\n            />\n          </Space>\n        </Tooltip>\n      }\n    >\n      <Row gutter={[24, 24]}>\n        {colorItems?.map(({ label, stock_id, value }) => (\n          <>\n            <Col span={24}>\n              <Space className='mb-4'>\n                <Badge\n                  color={label || value}\n                  className='extras-color-badge'\n                  text={`${label || value} - ${GetColorName(label || value)}`}\n                />\n              </Space>\n              <MediaUploadExtrasImage\n                id={stock_id}\n                fileList={fileList}\n                setFileList={setFileList}\n                type='stocks'\n              />\n            </Col>\n            <Divider />\n          </>\n        ))}\n      </Row>\n      <Space className='mt-4'>\n        <Button onClick={prev}>{t('prev')}</Button>\n        <Button type='primary' htmlType='submit' onClick={updateStocks}>\n          {t('next')}\n        </Button>\n      </Space>\n    </Card>\n  );\n};\n\nexport default ProductGallery;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}