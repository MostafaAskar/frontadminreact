{"ast":null,"code":"import moment from 'moment';\nimport { store } from \"../store\";\nexport function getMessages(messages) {\n  const groups = messages.reduce((groups, item) => {\n    var _auth$user;\n\n    const date = moment(item.time).format('DD-MM-YYYY');\n\n    if (!groups[date]) {\n      groups[date] = [];\n    }\n\n    const {\n      auth\n    } = store.getState();\n    const messageData = {\n      time: item.time,\n      sender: (auth === null || auth === void 0 ? void 0 : (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.id) !== (item === null || item === void 0 ? void 0 : item.senderId),\n      read: item.read,\n      id: item.id,\n      replyDocId: item.replyDocId,\n      message: item.message,\n      type: item.type,\n      isLast: item.isLast\n    };\n    groups[date].push(messageData);\n    return groups;\n  }, {});\n  const groupArrays = Object.keys(groups).map(date => {\n    return {\n      date,\n      messages: groups[date]\n    };\n  });\n  return groupArrays;\n}\nexport function getAllUnreadMessages(messages) {\n  return messages.filter(item => item.unread && Boolean(item.sender));\n}\nexport function getChatDetails(chat, messages) {\n  const chatMessages = messages.filter(item => item.chat_id === chat.id);\n  const lastMessage = chatMessages[chatMessages.length - 1];\n  const unreadMessages = chatMessages.filter(item => item.unread && Boolean(item.sender));\n  return {\n    lastMessage,\n    unreadMessages\n  };\n}","map":{"version":3,"names":["moment","store","getMessages","messages","groups","reduce","item","date","time","format","auth","getState","messageData","sender","user","id","senderId","read","replyDocId","message","type","isLast","push","groupArrays","Object","keys","map","getAllUnreadMessages","filter","unread","Boolean","getChatDetails","chat","chatMessages","chat_id","lastMessage","length","unreadMessages"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/redux/selectors/chatSelector.js"],"sourcesContent":["import moment from 'moment';\nimport {store} from \"../store\";\n\n\nexport function getMessages(messages) {\n    const groups = messages\n        .reduce((groups, item) => {\n            const date = moment(item.time).format('DD-MM-YYYY');\n            if (!groups[date]) {\n                groups[date] = [];\n            }\n            const {auth} = store.getState();\n            const messageData = {\n                time: item.time,\n                sender: auth?.user?.id !== item?.senderId,\n                read: item.read,\n                id: item.id,\n                replyDocId: item.replyDocId,\n                message: item.message,\n                type: item.type,\n                isLast: item.isLast\n            }\n            groups[date].push(messageData);\n            return groups;\n        }, {});\n    const groupArrays = Object.keys(groups).map((date) => {\n        return {\n            date,\n            messages: groups[date],\n        };\n    });\n    return groupArrays;\n}\n\nexport function getAllUnreadMessages(messages) {\n    return messages.filter((item) => item.unread && Boolean(item.sender));\n}\n\nexport function getChatDetails(chat, messages) {\n    const chatMessages = messages.filter((item) => item.chat_id === chat.id);\n    const lastMessage = chatMessages[chatMessages.length - 1];\n    const unreadMessages = chatMessages.filter(\n        (item) => item.unread && Boolean(item.sender)\n    );\n\n    return {lastMessage, unreadMessages};\n}\n"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAAQC,KAAR,QAAoB,UAApB;AAGA,OAAO,SAASC,WAAT,CAAqBC,QAArB,EAA+B;EAClC,MAAMC,MAAM,GAAGD,QAAQ,CAClBE,MADU,CACH,CAACD,MAAD,EAASE,IAAT,KAAkB;IAAA;;IACtB,MAAMC,IAAI,GAAGP,MAAM,CAACM,IAAI,CAACE,IAAN,CAAN,CAAkBC,MAAlB,CAAyB,YAAzB,CAAb;;IACA,IAAI,CAACL,MAAM,CAACG,IAAD,CAAX,EAAmB;MACfH,MAAM,CAACG,IAAD,CAAN,GAAe,EAAf;IACH;;IACD,MAAM;MAACG;IAAD,IAAST,KAAK,CAACU,QAAN,EAAf;IACA,MAAMC,WAAW,GAAG;MAChBJ,IAAI,EAAEF,IAAI,CAACE,IADK;MAEhBK,MAAM,EAAE,CAAAH,IAAI,SAAJ,IAAAA,IAAI,WAAJ,0BAAAA,IAAI,CAAEI,IAAN,0DAAYC,EAAZ,OAAmBT,IAAnB,aAAmBA,IAAnB,uBAAmBA,IAAI,CAAEU,QAAzB,CAFQ;MAGhBC,IAAI,EAAEX,IAAI,CAACW,IAHK;MAIhBF,EAAE,EAAET,IAAI,CAACS,EAJO;MAKhBG,UAAU,EAAEZ,IAAI,CAACY,UALD;MAMhBC,OAAO,EAAEb,IAAI,CAACa,OANE;MAOhBC,IAAI,EAAEd,IAAI,CAACc,IAPK;MAQhBC,MAAM,EAAEf,IAAI,CAACe;IARG,CAApB;IAUAjB,MAAM,CAACG,IAAD,CAAN,CAAae,IAAb,CAAkBV,WAAlB;IACA,OAAOR,MAAP;EACH,CAnBU,EAmBR,EAnBQ,CAAf;EAoBA,MAAMmB,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYrB,MAAZ,EAAoBsB,GAApB,CAAyBnB,IAAD,IAAU;IAClD,OAAO;MACHA,IADG;MAEHJ,QAAQ,EAAEC,MAAM,CAACG,IAAD;IAFb,CAAP;EAIH,CALmB,CAApB;EAMA,OAAOgB,WAAP;AACH;AAED,OAAO,SAASI,oBAAT,CAA8BxB,QAA9B,EAAwC;EAC3C,OAAOA,QAAQ,CAACyB,MAAT,CAAiBtB,IAAD,IAAUA,IAAI,CAACuB,MAAL,IAAeC,OAAO,CAACxB,IAAI,CAACO,MAAN,CAAhD,CAAP;AACH;AAED,OAAO,SAASkB,cAAT,CAAwBC,IAAxB,EAA8B7B,QAA9B,EAAwC;EAC3C,MAAM8B,YAAY,GAAG9B,QAAQ,CAACyB,MAAT,CAAiBtB,IAAD,IAAUA,IAAI,CAAC4B,OAAL,KAAiBF,IAAI,CAACjB,EAAhD,CAArB;EACA,MAAMoB,WAAW,GAAGF,YAAY,CAACA,YAAY,CAACG,MAAb,GAAsB,CAAvB,CAAhC;EACA,MAAMC,cAAc,GAAGJ,YAAY,CAACL,MAAb,CAClBtB,IAAD,IAAUA,IAAI,CAACuB,MAAL,IAAeC,OAAO,CAACxB,IAAI,CAACO,MAAN,CADb,CAAvB;EAIA,OAAO;IAACsB,WAAD;IAAcE;EAAd,CAAP;AACH"},"metadata":{},"sourceType":"module"}