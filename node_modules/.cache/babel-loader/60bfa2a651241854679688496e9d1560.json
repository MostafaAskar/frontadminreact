{"ast":null,"code":"import React from'react';import{Button,Col,Form,Modal,Row}from'antd';import{DebounceSelect}from'components/search';import{useTranslation}from'react-i18next';import productService from'services/seller/product';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AssignProduct=_ref=>{let{form,id,onClose,handlePurchase,loading}=_ref;const{t}=useTranslation();//functions\nfunction fetchProductsOptions(search){const params={search,perPage:10,status:'published'};return productService.getAll(params).then(res=>formatProduct(res.data));}//helper functions\nfunction formatProduct(data){return data.map(item=>{var _item$translation;return{label:item===null||item===void 0?void 0:(_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title,value:item.id,key:item.id};});}//submit form\nconst onFinish=values=>{var _values$products;const product_ids=values===null||values===void 0?void 0:(_values$products=values.products)===null||_values$products===void 0?void 0:_values$products.map(item=>item.value);handlePurchase({ads_package_id:id,product_ids});};return/*#__PURE__*/_jsx(Modal,{visible:!!id,title:t('ad.detail'),onCancel:onClose,footer:[/*#__PURE__*/_jsx(Button,{onClick:onClose,children:t('close')})],children:/*#__PURE__*/_jsxs(Form,{name:\"banner-form\",layout:\"vertical\",onFinish:onFinish,form:form,initialValues:{clickable:true},className:\"d-flex flex-column h-100\",children:[/*#__PURE__*/_jsx(Row,{gutter:24,children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Form.Item,{label:t('products'),name:'products',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(DebounceSelect,{mode:\"multiple\",fetchOptions:fetchProductsOptions,debounceTimeout:200})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow-1 d-flex flex-column justify-content-end\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pb-5\",children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loading,children:t('submit')})})})]})});};export default AssignProduct;","map":null,"metadata":{},"sourceType":"module"}