{"ast":null,"code":"import React from'react';import{Avatar,Card,Space}from'antd';import{useTranslation}from'react-i18next';import{useNavigate}from'react-router-dom';import{IMG_URL}from'../../configs/app-global';import{UserOutlined}from'@ant-design/icons';import useUserActivity from'../../helpers/useUserActivity';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{addMenu,removeFromMenu}from'../../redux/slices/menu';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserCard(_ref){var _data$delivery_man_se,_data$lastname,_data$delivery_man_se2,_data$delivery_man_se3;let{data}=_ref;const{t}=useTranslation();const navigate=useNavigate();const dispatch=useDispatch();const{menuItems}=useSelector(state=>state.menu,shallowEqual);const activeOrders=(data===null||data===void 0?void 0:data.deliveryman_orders)||[];const lastSeen=useUserActivity(data===null||data===void 0?void 0:(_data$delivery_man_se=data.delivery_man_setting)===null||_data$delivery_man_se===void 0?void 0:_data$delivery_man_se.updated_at);const goToShow=row=>{const isExist=!!menuItems.find(item=>item.id==='delivery_map_orders');if(isExist){dispatch(removeFromMenu({id:`delivery_map_orders`,nextUrl:'deliveries/map'}));}dispatch(addMenu({url:`deliveries/map/${row.id}`,id:`delivery_map_orders`,name:t('delivery.orders'),data:{list:activeOrders,item:activeOrders[0],deliveryman:data}}));navigate(`/deliveries/map/${row.id}`);};return/*#__PURE__*/_jsxs(Card,{className:\"user-card\",onClick:()=>goToShow(data),children:[/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Avatar,{src:IMG_URL+(data===null||data===void 0?void 0:data.img),icon:/*#__PURE__*/_jsx(UserOutlined,{}),style:{color:'#1a3353'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"title\",children:[data===null||data===void 0?void 0:data.firstname,\" \",data===null||data===void 0?void 0:(_data$lastname=data.lastname)===null||_data$lastname===void 0?void 0:_data$lastname.charAt(0),\".\"]}),/*#__PURE__*/_jsx(\"div\",{className:`last-seen ${data!==null&&data!==void 0&&(_data$delivery_man_se2=data.delivery_man_setting)!==null&&_data$delivery_man_se2!==void 0&&_data$delivery_man_se2.online?'online':'text-muted'}`,children:data!==null&&data!==void 0&&(_data$delivery_man_se3=data.delivery_man_setting)!==null&&_data$delivery_man_se3!==void 0&&_data$delivery_man_se3.online?t('online'):lastSeen})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\"}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[t('active_orders'),\":\"]}),/*#__PURE__*/_jsx(\"div\",{children:activeOrders.length})]})]});}","map":null,"metadata":{},"sourceType":"module"}