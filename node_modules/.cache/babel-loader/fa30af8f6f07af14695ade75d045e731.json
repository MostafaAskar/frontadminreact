{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Card,Col,Row,Space,Spin}from'antd';import RiveResult from'components/rive-result';import getImage from'helpers/getImage';import Meta from'antd/es/card/Meta';import{PlusOutlined}from'@ant-design/icons';import{fetchRestProducts}from'redux/slices/product';import{shallowEqual,useSelector,useDispatch}from'react-redux';import{useTranslation}from'react-i18next';import{DebounceSelect}from'components/search';import categoryService from'services/category';import SearchInput from'components/search-input';import ProductModal from'./product-modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductCards(){const{t}=useTranslation();const dispatch=useDispatch();const{products,loading}=useSelector(state=>state.product,shallowEqual);const{myShop}=useSelector(state=>state.myShop,shallowEqual);const[search,setSearch]=useState(null);const[brand,setBrand]=useState(null);const[category,setCategory]=useState(null);const[productModal,setProductModal]=useState(null);async function fetchCategories(search){const params={search,type:'main',shop_id:myShop===null||myShop===void 0?void 0:myShop.id};return categoryService.search(params).then(_ref=>{let{data}=_ref;return data.map(item=>{var _item$translation;return{label:item===null||item===void 0?void 0:(_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title,value:item===null||item===void 0?void 0:item.id,key:item===null||item===void 0?void 0:item.id};});});}useEffect(()=>{const params={perPage:10,page:1,brand_id:brand===null||brand===void 0?void 0:brand.value,category_id:category===null||category===void 0?void 0:category.value,search,shop_id:myShop===null||myShop===void 0?void 0:myShop.id,active:1};dispatch(fetchRestProducts(params));},[brand,category,search]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{title:t('products'),className:'order-add',children:[/*#__PURE__*/_jsxs(Space,{wrap:true,className:'mb-4',children:[/*#__PURE__*/_jsx(SearchInput,{placeholder:t('search'),handleChange:value=>setSearch(value),defaultValue:search}),/*#__PURE__*/_jsx(DebounceSelect,{placeholder:t('select.category'),fetchOptions:fetchCategories,style:{minWidth:150},onChange:value=>setCategory(value),value:category})]}),products.length===0?/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(RiveResult,{id:\"nosell\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"products-row order-items\",children:[products.length?products.map(item=>{var _item$translation2,_item$translation3;return/*#__PURE__*/_jsxs(Card,{className:\"products-col\",cover:/*#__PURE__*/_jsx(\"img\",{alt:item===null||item===void 0?void 0:(_item$translation2=item.translation)===null||_item$translation2===void 0?void 0:_item$translation2.title,src:getImage(item===null||item===void 0?void 0:item.img)}),onClick:()=>setProductModal(item),children:[/*#__PURE__*/_jsx(Meta,{title:item===null||item===void 0?void 0:(_item$translation3=item.translation)===null||_item$translation3===void 0?void 0:_item$translation3.title}),/*#__PURE__*/_jsx(\"div\",{className:\"preview\",children:/*#__PURE__*/_jsx(PlusOutlined,{})})]},item.id);}):/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(RiveResult,{id:\"nosell\"})})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})})]})]}),productModal&&/*#__PURE__*/_jsx(ProductModal,{productData:productModal,setProductData:setProductModal})]});}","map":null,"metadata":{},"sourceType":"module"}