{"ast":null,"code":"import React,{useMemo}from'react';import{Card,Col,Row}from'antd';import{useTranslation}from'react-i18next';import{useDispatch}from'react-redux';import{shallowEqual,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import OrderChart from'./orderChart';import SalesChart from'./salesChart';import StatisticNumberWidget from'./statisticNumberWidget';import StatisticPriceWidget from'./statisticPriceWidget';import TopBar from'./topBar';import TopCustomers from'./topCustomers';import TopProducts from'./topProducts';import{setMenu}from'redux/slices/menu';import{Todo}from'components/todo';import OrderPieChart from'./orderPieChart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function GeneralDashboard(_ref){let{isSeller}=_ref;const{t}=useTranslation();const navigate=useNavigate();const dispatch=useDispatch();const{user}=useSelector(state=>state.auth,shallowEqual);const{counts}=useSelector(state=>state.statisticsCount,shallowEqual);const{theme}=useSelector(state=>state.theme,shallowEqual);const parcelMode=useMemo(()=>!!theme.parcelMode&&(user===null||user===void 0?void 0:user.role)==='admin',[theme,user]);const goToOrder=(url,name)=>{const params=url==='report/stock'?{id:url,url,name,refetch:true,data:{value:'out_of_stock',label:'Out of stock'}}:{id:url,url,name,refetch:true};dispatch(setMenu(params));navigate(`/${url}`);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TopBar,{}),!parcelMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{gutter:16,className:\"mt-3\",children:[/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1rem'},children:t('last.30.days.statistics')})})}),/*#__PURE__*/_jsx(Col,{flex:\"0 0 16.6%\",children:/*#__PURE__*/_jsx(StatisticNumberWidget,{title:t('in.progress.orders'),value:counts===null||counts===void 0?void 0:counts.progress_orders_count,color:\"purple\",onClick:()=>goToOrder((user===null||user===void 0?void 0:user.role)==='seller'?'seller/orders?status=new':'orders?status=new',t('in.progress.orders'))})}),/*#__PURE__*/_jsx(Col,{flex:\"0 0 16.6%\",children:/*#__PURE__*/_jsx(StatisticNumberWidget,{title:t('cancelled.orders'),value:counts===null||counts===void 0?void 0:counts.cancel_orders_count,color:\"red\",onClick:()=>goToOrder((user===null||user===void 0?void 0:user.role)==='seller'?'seller/orders?status=canceled':'orders?status=canceled',t('cancelled.orders'))})}),/*#__PURE__*/_jsx(Col,{flex:\"0 0 16.6%\",children:/*#__PURE__*/_jsx(StatisticNumberWidget,{title:t('delivered.orders'),value:counts===null||counts===void 0?void 0:counts.delivered_orders_count,color:\"green\",onClick:()=>goToOrder((user===null||user===void 0?void 0:user.role)==='seller'?'seller/orders?status=delivered':'orders?status=delivered',t('delivered.orders'))})}),/*#__PURE__*/_jsx(Col,{flex:\"0 0 16.6%\",children:/*#__PURE__*/_jsx(StatisticNumberWidget,{title:t('out.of.stock.products'),value:counts===null||counts===void 0?void 0:counts.products_out_of_count,color:\"red\",onClick:()=>{if((user===null||user===void 0?void 0:user.role)==='admin'){goToOrder('report/stock',t('stock'));}}})}),/*#__PURE__*/_jsx(Col,{flex:\"0 0 16.6%\",children:/*#__PURE__*/_jsx(StatisticNumberWidget,{title:t('total.products'),value:counts===null||counts===void 0?void 0:counts.products_count,color:\"grey\",onClick:()=>goToOrder((user===null||user===void 0?void 0:user.role)==='seller'?'seller/products':'catalog/products',t('products'))})}),/*#__PURE__*/_jsx(Col,{flex:\"0 0 16.6%\",children:/*#__PURE__*/_jsx(StatisticNumberWidget,{title:t('shop.reviews'),value:counts===null||counts===void 0?void 0:counts.reviews_count,color:\"purple\"})})]}),/*#__PURE__*/_jsxs(Row,{gutter:16,children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:24,md:24,lg:24,xl:6,children:/*#__PURE__*/_jsx(StatisticPriceWidget,{title:t('total.earned'),value:counts===null||counts===void 0?void 0:counts.total_earned,subtitle:t('last.30.days')})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:24,md:24,lg:24,xl:6,children:/*#__PURE__*/_jsx(StatisticPriceWidget,{title:t('delivery.earning'),value:counts===null||counts===void 0?void 0:counts.delivery_earned,subtitle:t('last.30.days')})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:24,md:24,lg:24,xl:6,children:/*#__PURE__*/_jsx(StatisticPriceWidget,{title:t('total.order.tax'),value:counts===null||counts===void 0?void 0:counts.tax_earned,subtitle:t('last.30.days')})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:24,md:24,lg:24,xl:6,children:/*#__PURE__*/_jsx(StatisticPriceWidget,{title:t('total.comission'),value:counts===null||counts===void 0?void 0:counts.commission_earned,subtitle:t('last.30.days')})})]}),/*#__PURE__*/_jsxs(Row,{gutter:[24,24],children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(OrderChart,{})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Todo,{})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(TopProducts,{})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(SalesChart,{})}),!isSeller&&/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(TopCustomers,{})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(OrderPieChart,{counts:counts})})]})]}):/*#__PURE__*/_jsx(\"div\",{})]});}","map":null,"metadata":{},"sourceType":"module"}