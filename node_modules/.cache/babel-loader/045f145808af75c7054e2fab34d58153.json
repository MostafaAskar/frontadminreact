{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/user/user-edit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Card, Form, Tabs } from 'antd';\nimport { useParams } from 'react-router-dom';\nimport moment from 'moment';\nimport userService from '../../services/user';\nimport Loading from '../../components/loading';\nimport UserEditForm from './userEditForm';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport UserOrders from './userOrders';\nimport WalletHistory from './walletHistory';\nimport createImage from '../../helpers/createImage';\nimport UserPassword from './userPassword';\nimport DelivertSettingCreate from './add-deliveryman-settings';\nimport useDemo from '../../helpers/useDemo';\nimport hideEmail from '../../components/hideEmail';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReactAppIsDemo = process.env.REACT_APP_IS_DEMO;\nconst {\n  TabPane\n} = Tabs;\n\nconst UserEdit = () => {\n  _s();\n\n  var _activeMenu$data;\n\n  const {\n    t\n  } = useTranslation();\n  const [form] = Form.useForm();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const {\n    uuid\n  } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [tab, setTab] = useState('edit');\n  const [image, setImage] = useState([]);\n  const [id, setId] = useState(null);\n  const role = activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data = activeMenu.data) === null || _activeMenu$data === void 0 ? void 0 : _activeMenu$data.role;\n  const {\n    isDemo\n  } = useDemo();\n\n  const showUserData = uuid => {\n    setLoading(true);\n    userService.getById(uuid).then(res => {\n      var _data$invitations, _data$invitations2, _res$data, _res$data$delivery_ma;\n\n      const data = res.data;\n      const payload = { ...data,\n        image: data.img ? createImage(data.img) : []\n      };\n      dispatch(setMenuData({\n        activeMenu,\n        data: payload\n      }));\n      form.setFieldsValue({\n        firstname: data.firstname,\n        lastname: data.lastname,\n        email: isDemo ? hideEmail(data.email) : data.email,\n        phone: data.phone,\n        birthday: moment(data === null || data === void 0 ? void 0 : data.birthday).format('YYYY-MM-DD'),\n        gender: data.gender,\n        password_confirmation: data.password_confirmation,\n        password: data.password,\n        shop_id: (data === null || data === void 0 ? void 0 : (_data$invitations = data.invitations) === null || _data$invitations === void 0 ? void 0 : _data$invitations.length) !== 0 ? data === null || data === void 0 ? void 0 : (_data$invitations2 = data.invitations) === null || _data$invitations2 === void 0 ? void 0 : _data$invitations2.map(i => {\n          var _i$shop, _i$shop$translation, _i$shop2, _i$shop3;\n\n          return {\n            label: (_i$shop = i.shop) === null || _i$shop === void 0 ? void 0 : (_i$shop$translation = _i$shop.translation) === null || _i$shop$translation === void 0 ? void 0 : _i$shop$translation.title,\n            value: (_i$shop2 = i.shop) === null || _i$shop2 === void 0 ? void 0 : _i$shop2.id,\n            key: (_i$shop3 = i.shop) === null || _i$shop3 === void 0 ? void 0 : _i$shop3.id\n          };\n        }) : undefined\n      });\n      setImage(data.img ? [createImage(data.img)] : []);\n      setId((_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$delivery_ma = _res$data.delivery_man_setting) === null || _res$data$delivery_ma === void 0 ? void 0 : _res$data$delivery_ma.id);\n    }).finally(() => {\n      setLoading(false);\n      dispatch(disableRefetch(activeMenu));\n    });\n  };\n\n  useEffect(() => {\n    if (activeMenu !== null && activeMenu !== void 0 && activeMenu.refetch) showUserData(uuid); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.refetch]);\n\n  const onChange = key => setTab(key);\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('user.settings'),\n    children: !loading ? /*#__PURE__*/_jsxDEV(Tabs, {\n      activeKey: tab,\n      onChange: onChange,\n      tabPosition: \"left\",\n      size: \"small\",\n      children: [/*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('edit.user'),\n        children: /*#__PURE__*/_jsxDEV(UserEditForm, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data,\n          form: form,\n          image: image,\n          setImage: setImage,\n          action_type: 'edit'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)\n      }, 'edit', false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), role === 'cook' && /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('orders'),\n        children: /*#__PURE__*/_jsxDEV(UserOrders, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this)\n      }, 'order', false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this), role === 'deliveryman' && /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('deliveryman'),\n        children: /*#__PURE__*/_jsxDEV(DelivertSettingCreate, {\n          id: id,\n          data: activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this)\n      }, 'delivery', false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('wallet'),\n        children: /*#__PURE__*/_jsxDEV(WalletHistory, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)\n      }, 'wallet', false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t('password'),\n        children: /*#__PURE__*/_jsxDEV(UserPassword, {\n          data: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)\n      }, 'password', false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserEdit, \"BpH8GPIBf7KyfV/ZwKKuDFf1958=\", false, function () {\n  return [useTranslation, Form.useForm, useSelector, useDispatch, useParams, useDemo];\n});\n\n_c = UserEdit;\nexport default UserEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserEdit\");","map":{"version":3,"names":["React","useEffect","useState","Card","Form","Tabs","useParams","moment","userService","Loading","UserEditForm","shallowEqual","useDispatch","useSelector","disableRefetch","setMenuData","useTranslation","UserOrders","WalletHistory","createImage","UserPassword","DelivertSettingCreate","useDemo","hideEmail","ReactAppIsDemo","process","env","REACT_APP_IS_DEMO","TabPane","UserEdit","t","form","useForm","activeMenu","state","menu","dispatch","uuid","loading","setLoading","tab","setTab","image","setImage","id","setId","role","data","isDemo","showUserData","getById","then","res","payload","img","setFieldsValue","firstname","lastname","email","phone","birthday","format","gender","password_confirmation","password","shop_id","invitations","length","map","i","label","shop","translation","title","value","key","undefined","delivery_man_setting","finally","refetch","onChange"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/user/user-edit.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, Form, Tabs } from 'antd';\nimport { useParams } from 'react-router-dom';\nimport moment from 'moment';\nimport userService from '../../services/user';\nimport Loading from '../../components/loading';\nimport UserEditForm from './userEditForm';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport UserOrders from './userOrders';\nimport WalletHistory from './walletHistory';\nimport createImage from '../../helpers/createImage';\nimport UserPassword from './userPassword';\nimport DelivertSettingCreate from './add-deliveryman-settings';\nimport useDemo from '../../helpers/useDemo';\nimport hideEmail from '../../components/hideEmail';\n\nconst ReactAppIsDemo = process.env.REACT_APP_IS_DEMO;\nconst { TabPane } = Tabs;\n\nconst UserEdit = () => {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const { uuid } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [tab, setTab] = useState('edit');\n  const [image, setImage] = useState([]);\n  const [id, setId] = useState(null);\n  const role = activeMenu?.data?.role;\n  const { isDemo } = useDemo();\n\n  const showUserData = (uuid) => {\n    setLoading(true);\n    userService\n      .getById(uuid)\n      .then((res) => {\n        const data = res.data;\n        const payload = {\n          ...data,\n          image: data.img ? createImage(data.img) : [],\n        };\n        dispatch(setMenuData({ activeMenu, data: payload }));\n        form.setFieldsValue({\n          firstname: data.firstname,\n          lastname: data.lastname,\n          email: isDemo ? hideEmail(data.email) : data.email,\n          phone: data.phone,\n          birthday: moment(data?.birthday).format('YYYY-MM-DD'),\n          gender: data.gender,\n          password_confirmation: data.password_confirmation,\n          password: data.password,\n          shop_id:\n            data?.invitations?.length !== 0\n              ? data?.invitations?.map((i) => ({\n                  label: i.shop?.translation?.title,\n                  value: i.shop?.id,\n                  key: i.shop?.id,\n                }))\n              : undefined,\n        });\n        setImage(data.img ? [createImage(data.img)] : []);\n        setId(res.data?.delivery_man_setting?.id);\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  useEffect(() => {\n    if (activeMenu?.refetch) showUserData(uuid);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeMenu?.refetch]);\n\n  const onChange = (key) => setTab(key);\n\n  return (\n    <Card title={t('user.settings')}>\n      {!loading ? (\n        <Tabs\n          activeKey={tab}\n          onChange={onChange}\n          tabPosition='left'\n          size='small'\n        >\n          <TabPane key='edit' tab={t('edit.user')}>\n            <UserEditForm\n              data={activeMenu?.data}\n              form={form}\n              image={image}\n              setImage={setImage}\n              action_type={'edit'}\n            />\n          </TabPane>\n          {role === 'cook' && (\n            <TabPane key='order' tab={t('orders')}>\n              <UserOrders data={activeMenu?.data} />\n            </TabPane>\n          )}\n          {role === 'deliveryman' && (\n            <TabPane key='delivery' tab={t('deliveryman')}>\n              <DelivertSettingCreate id={id} data={activeMenu.data} />\n            </TabPane>\n          )}\n          <TabPane key='wallet' tab={t('wallet')}>\n            <WalletHistory data={activeMenu?.data} />\n          </TabPane>\n          <TabPane key='password' tab={t('password')}>\n            <UserPassword data={activeMenu?.data} />\n          </TabPane>\n        </Tabs>\n      ) : (\n        <Loading />\n      )}\n    </Card>\n  );\n};\n\nexport default UserEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}