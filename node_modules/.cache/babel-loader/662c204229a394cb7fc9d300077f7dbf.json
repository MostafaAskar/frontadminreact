{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/recepts/recept-add.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form, Steps } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from '../../components/language-list';\nimport { steps } from './steps';\nimport recieptService from '../../services/reciept';\nimport { IMG_URL } from 'configs/app-global';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Step\n} = Steps;\n\nconst ReceptAdd = () => {\n  _s();\n\n  var _activeMenu$data, _activeMenu$data$gall, _activeMenu$data2, _activeMenu$data2$gal, _activeMenu$data3, _activeMenu$data3$gal, _activeMenu$data4, _activeMenu$data4$gal, _activeMenu$data5;\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const createImage = name => {\n    return {\n      name,\n      url: IMG_URL + name\n    };\n  };\n\n  const [image, setImage] = useState((_activeMenu$data = activeMenu.data) !== null && _activeMenu$data !== void 0 && (_activeMenu$data$gall = _activeMenu$data.galleries) !== null && _activeMenu$data$gall !== void 0 && _activeMenu$data$gall[0] ? [createImage((_activeMenu$data2 = activeMenu.data) === null || _activeMenu$data2 === void 0 ? void 0 : (_activeMenu$data2$gal = _activeMenu$data2.galleries) === null || _activeMenu$data2$gal === void 0 ? void 0 : _activeMenu$data2$gal[0].path)] : []);\n  const [back, setBack] = useState((_activeMenu$data3 = activeMenu.data) !== null && _activeMenu$data3 !== void 0 && (_activeMenu$data3$gal = _activeMenu$data3.galleries) !== null && _activeMenu$data3$gal !== void 0 && _activeMenu$data3$gal[1] ? [createImage((_activeMenu$data4 = activeMenu.data) === null || _activeMenu$data4 === void 0 ? void 0 : (_activeMenu$data4$gal = _activeMenu$data4.galleries) === null || _activeMenu$data4$gal === void 0 ? void 0 : _activeMenu$data4$gal[1].path)] : []);\n  const images = [...image, ...back];\n  const [current, setCurrent] = useState(((_activeMenu$data5 = activeMenu.data) === null || _activeMenu$data5 === void 0 ? void 0 : _activeMenu$data5.step) || 0);\n\n  const next = () => {\n    const step = current + 1;\n    setCurrent(step);\n  };\n\n  const prev = () => {\n    const step = current - 1;\n    setCurrent(step);\n  };\n\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({\n        activeMenu,\n        data\n      }));\n    };\n  }, []);\n\n  const onFinish = values => {\n    var _values$stocks;\n\n    form.validateFields();\n    const body = { ...values,\n      images: images.map(img => img.name),\n      category_id: values.category_id.value,\n      shop_id: values.shop_id.value,\n      active_time: values.active_time.toString(),\n      total_time: values.total_time.toString(),\n      nutrition: values.nutrition.map(item => ({ ...item,\n        percentage: String(item.percentage),\n        weight: String(item.weight)\n      })),\n      stocks: (_values$stocks = values.stocks) === null || _values$stocks === void 0 ? void 0 : _values$stocks.map(stock => ({\n        min_quantity: stock.min_quantity,\n        stock_id: stock.stock_id.value\n      }))\n    };\n    setLoadingBtn(true);\n    const nextUrl = 'catalog/recept';\n    recieptService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      navigate(`/${nextUrl}`);\n      dispatch(removeFromMenu({ ...activeMenu,\n        nextUrl\n      }));\n    }).finally(() => setLoadingBtn(false));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('add.recepe'),\n    extra: /*#__PURE__*/_jsxDEV(LanguageList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 42\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      onFinish: onFinish,\n      form: form,\n      initialValues: {\n        active: true,\n        ...activeMenu.data\n      },\n      children: [/*#__PURE__*/_jsxDEV(Steps, {\n        current: current,\n        children: steps.map(item => /*#__PURE__*/_jsxDEV(Step, {\n          title: t(item.title)\n        }, item.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), steps.map(item => {\n        const Component = item.content;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `steps-content ${item.step !== current + 1 && 'hidden'}`,\n          children: /*#__PURE__*/_jsxDEV(Component, {\n            next: next,\n            prev: prev,\n            loading: loadingBtn,\n            image: image,\n            setImage: setImage,\n            back: back,\n            setBack: setBack\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)\n        }, item.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ReceptAdd, \"yrP3Y5iPfZJt1zuIGeP75tzuRKc=\", false, function () {\n  return [useTranslation, useSelector, useDispatch, Form.useForm, useNavigate];\n});\n\n_c = ReceptAdd;\nexport default ReceptAdd;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReceptAdd\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","toast","Card","Form","Steps","shallowEqual","useDispatch","useSelector","removeFromMenu","setMenuData","useTranslation","LanguageList","steps","recieptService","IMG_URL","Step","ReceptAdd","t","activeMenu","state","menu","dispatch","form","useForm","navigate","createImage","name","url","image","setImage","data","galleries","path","back","setBack","images","current","setCurrent","step","next","prev","loadingBtn","setLoadingBtn","getFieldsValue","onFinish","values","validateFields","body","map","img","category_id","value","shop_id","active_time","toString","total_time","nutrition","item","percentage","String","weight","stocks","stock","min_quantity","stock_id","nextUrl","create","then","success","finally","active","title","Component","content"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/recepts/recept-add.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Card, Form, Steps } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from '../../redux/slices/menu';\n\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from '../../components/language-list';\nimport { steps } from './steps';\nimport recieptService from '../../services/reciept';\nimport { IMG_URL } from 'configs/app-global';\n\nconst { Step } = Steps;\n\nconst ReceptAdd = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const createImage = (name) => {\n    return {\n      name,\n      url: IMG_URL + name,\n    };\n  };\n  const [image, setImage] = useState(\n    activeMenu.data?.galleries?.[0]\n      ? [createImage(activeMenu.data?.galleries?.[0].path)]\n      : []\n  );\n  const [back, setBack] = useState(\n    activeMenu.data?.galleries?.[1]\n      ? [createImage(activeMenu.data?.galleries?.[1].path)]\n      : []\n  );\n  const images = [...image, ...back];\n\n  const [current, setCurrent] = useState(activeMenu.data?.step || 0);\n\n  const next = () => {\n    const step = current + 1;\n    setCurrent(step);\n  };\n\n  const prev = () => {\n    const step = current - 1;\n    setCurrent(step);\n  };\n  const [loadingBtn, setLoadingBtn] = useState(false);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n  }, []);\n\n  const onFinish = (values) => {\n    form.validateFields();\n    const body = {\n      ...values,\n      images: images.map((img) => img.name),\n      category_id: values.category_id.value,\n      shop_id: values.shop_id.value,\n      active_time: values.active_time.toString(),\n      total_time: values.total_time.toString(),\n      nutrition: values.nutrition.map((item) => ({\n        ...item,\n        percentage: String(item.percentage),\n        weight: String(item.weight),\n      })),\n      stocks: values.stocks?.map((stock) => ({\n        min_quantity: stock.min_quantity,\n        stock_id: stock.stock_id.value,\n      })),\n    };\n    setLoadingBtn(true);\n    const nextUrl = 'catalog/recept';\n    recieptService\n      .create(body)\n      .then(() => {\n        toast.success(t('successfully.created'));\n        navigate(`/${nextUrl}`);\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  return (\n    <Card title={t('add.recepe')} extra={<LanguageList />}>\n      <Form\n        layout='vertical'\n        onFinish={onFinish}\n        form={form}\n        initialValues={{ active: true, ...activeMenu.data }}\n      >\n        <Steps current={current}>\n          {steps.map((item) => (\n            <Step title={t(item.title)} key={item.title} />\n          ))}\n        </Steps>\n        {steps.map((item) => {\n          const Component = item.content;\n          return (\n            <div\n              key={item.title}\n              className={`steps-content ${\n                item.step !== current + 1 && 'hidden'\n              }`}\n            >\n              <Component\n                next={next}\n                prev={prev}\n                loading={loadingBtn}\n                image={image}\n                setImage={setImage}\n                back={back}\n                setBack={setBack}\n              />\n            </div>\n          );\n        })}\n      </Form>\n    </Card>\n  );\n};\n\nexport default ReceptAdd;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}