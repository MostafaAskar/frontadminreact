{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/lang-modal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Form, Modal, Select } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport i18n from '../configs/i18next';\nimport informationService from '../services/rest/information';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { directionChange } from '../redux/slices/theme';\nimport { setLangugages } from '../redux/slices/formLang';\nimport languagesService from '../services/languages';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LangModal(_ref) {\n  _s();\n\n  let {\n    visible,\n    handleCancel\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const {\n    languages\n  } = useSelector(state => state.formLang, shallowEqual);\n  const dispatch = useDispatch();\n\n  const onFinish = values => {\n    const {\n      lang\n    } = values;\n    const locale = languages.find(item => item.locale === lang);\n    const direction = locale.backward ? 'rtl' : 'ltr';\n    setLoading(true);\n    informationService.translations(values).then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      i18n.addResourceBundle(lang, 'translation', data);\n      handleCancel();\n      i18n.changeLanguage(lang);\n      dispatch(directionChange(direction));\n    }).finally(() => setLoading(false));\n  };\n\n  const fetchLanguages = () => {\n    languagesService.getAllActive().then(_ref3 => {\n      let {\n        data\n      } = _ref3;\n      dispatch(setLangugages(data));\n    });\n  };\n\n  useEffect(() => {\n    fetchLanguages();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: t('change.language'),\n    visible: visible,\n    onCancel: handleCancel,\n    footer: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      onClick: () => form.submit(),\n      loading: loading,\n      children: t('save')\n    }, 'ok-button', false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleCancel,\n      children: t('cancel')\n    }, 'cancel-button', false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)],\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      name: \"lang-form\",\n      form: form,\n      onFinish: onFinish,\n      initialValues: {\n        lang: i18n.language\n      },\n      children: /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: t('language'),\n        name: \"lang\",\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          children: languages.map((item, idx) => /*#__PURE__*/_jsxDEV(Select.Option, {\n            value: item.locale,\n            children: item.title\n          }, item.locale + idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LangModal, \"rAaKhmRrdoFEFPRuOvI91yicb1Y=\", false, function () {\n  return [useTranslation, Form.useForm, useSelector, useDispatch];\n});\n\n_c = LangModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"LangModal\");","map":{"version":3,"names":["React","useState","useEffect","Button","Form","Modal","Select","useTranslation","i18n","informationService","shallowEqual","useDispatch","useSelector","directionChange","setLangugages","languagesService","LangModal","visible","handleCancel","t","form","useForm","loading","setLoading","languages","state","formLang","dispatch","onFinish","values","lang","locale","find","item","direction","backward","translations","then","data","addResourceBundle","changeLanguage","finally","fetchLanguages","getAllActive","submit","language","map","idx","title"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/lang-modal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, Form, Modal, Select } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport i18n from '../configs/i18next';\nimport informationService from '../services/rest/information';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { directionChange } from '../redux/slices/theme';\nimport { setLangugages } from '../redux/slices/formLang';\nimport languagesService from '../services/languages';\n\nexport default function LangModal({ visible, handleCancel }) {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n  const dispatch = useDispatch();\n\n  const onFinish = (values) => {\n    const { lang } = values;\n    const locale = languages.find((item) => item.locale === lang);\n    const direction = locale.backward ? 'rtl' : 'ltr';\n    setLoading(true);\n    informationService\n      .translations(values)\n      .then(({ data }) => {\n        i18n.addResourceBundle(lang, 'translation', data);\n        handleCancel();\n        i18n.changeLanguage(lang);\n        dispatch(directionChange(direction));\n      })\n      .finally(() => setLoading(false));\n  };\n\n  const fetchLanguages = () => {\n    languagesService.getAllActive().then(({ data }) => {\n      dispatch(setLangugages(data));\n    });\n  };\n\n  useEffect(() => {\n    fetchLanguages();\n  }, []);\n\n  return (\n    <Modal\n      title={t('change.language')}\n      visible={visible}\n      onCancel={handleCancel}\n      footer={[\n        <Button\n          key='ok-button'\n          type='primary'\n          onClick={() => form.submit()}\n          loading={loading}\n        >\n          {t('save')}\n        </Button>,\n        <Button key='cancel-button' onClick={handleCancel}>\n          {t('cancel')}\n        </Button>,\n      ]}\n    >\n      <Form\n        layout='vertical'\n        name='lang-form'\n        form={form}\n        onFinish={onFinish}\n        initialValues={{ lang: i18n.language }}\n      >\n        <Form.Item label={t('language')} name='lang'>\n          <Select>\n            {languages.map((item, idx) => (\n              <Select.Option key={item.locale + idx} value={item.locale}>\n                {item.title}\n              </Select.Option>\n            ))}\n          </Select>\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}