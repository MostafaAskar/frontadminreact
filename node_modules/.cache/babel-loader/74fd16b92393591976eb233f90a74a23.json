{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/delivery-price/price-add.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport deliveryPriceService from 'services/delivery-price';\nimport { fetchDeliveryPrice } from 'redux/slices/delivery-price';\nimport PriceForm from './price-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddDeliveryPrice = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const {\n    languages\n  } = useSelector(state => state.formLang, shallowEqual);\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({\n        activeMenu,\n        data\n      }));\n    };\n  }, []);\n\n  const onFinish = values => {\n    const {\n      area,\n      city,\n      country,\n      region,\n      price,\n      fitting_rooms,\n      active,\n      shop_id\n    } = values;\n    const body = {\n      price,\n      fitting_rooms,\n      active: Number(active),\n      area_id: area === null || area === void 0 ? void 0 : area.value,\n      city_id: city === null || city === void 0 ? void 0 : city.value,\n      country_id: country === null || country === void 0 ? void 0 : country.value,\n      region_id: region === null || region === void 0 ? void 0 : region.value,\n      address: getTranslationFields(languages, values, 'address'),\n      shop_id: shop_id === null || shop_id === void 0 ? void 0 : shop_id.value\n    };\n    const nextUrl = 'delivery-price';\n    return deliveryPriceService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu,\n          nextUrl\n        }));\n        dispatch(fetchDeliveryPrice({}));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(PriceForm, {\n    form: form,\n    handleSubmit: onFinish\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 10\n  }, this);\n};\n\n_s(AddDeliveryPrice, \"/2qflJBdFTgOt7CLbNTaPvT8Ctg=\", false, function () {\n  return [useTranslation, useSelector, useDispatch, Form.useForm, useNavigate, useSelector];\n});\n\n_c = AddDeliveryPrice;\nexport default AddDeliveryPrice;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddDeliveryPrice\");","map":{"version":3,"names":["React","useEffect","useNavigate","toast","Form","batch","shallowEqual","useDispatch","useSelector","removeFromMenu","setMenuData","useTranslation","getTranslationFields","deliveryPriceService","fetchDeliveryPrice","PriceForm","AddDeliveryPrice","t","activeMenu","state","menu","dispatch","form","useForm","navigate","languages","formLang","data","getFieldsValue","onFinish","values","area","city","country","region","price","fitting_rooms","active","shop_id","body","Number","area_id","value","city_id","country_id","region_id","address","nextUrl","create","then","success"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/delivery-price/price-add.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport deliveryPriceService from 'services/delivery-price';\nimport { fetchDeliveryPrice } from 'redux/slices/delivery-price';\nimport PriceForm from './price-form';\n\nconst AddDeliveryPrice = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n  }, []);\n\n  const onFinish = (values) => {\n    const {\n      area,\n      city,\n      country,\n      region,\n      price,\n      fitting_rooms,\n      active,\n      shop_id,\n    } = values;\n\n    const body = {\n      price,\n      fitting_rooms,\n      active: Number(active),\n      area_id: area?.value,\n      city_id: city?.value,\n      country_id: country?.value,\n      region_id: region?.value,\n      address: getTranslationFields(languages, values, 'address'),\n      shop_id: shop_id?.value,\n    };\n    const nextUrl = 'delivery-price';\n\n    return deliveryPriceService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n        dispatch(fetchDeliveryPrice({}));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  return <PriceForm form={form} handleSubmit={onFinish} />;\n};\n\nexport default AddDeliveryPrice;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}