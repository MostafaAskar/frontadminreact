{"ast":null,"code":"import React,{useMemo}from'react';import{Badge,Card,Select,Spin}from'antd';import moment from'moment';import ChartWidget from'components/chart-widget';import{COLORS}from'constants/ChartConstant';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{fetchOrderCounts,fetchSellerOrderCounts,filterOrderCounts}from'redux/slices/statistics/orderCounts';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function OrderChart(){const{t}=useTranslation();const dispatch=useDispatch();const{counts,params,loading}=useSelector(state=>state.orderCounts,shallowEqual);const{role}=useSelector(state=>state.auth.user,shallowEqual);const{direction}=useSelector(state=>state.theme.theme,shallowEqual);const categories=useMemo(()=>counts.map(item=>moment(item.time).format('D MMM')),[counts]);const chartData=useMemo(()=>{return[{name:t('orders'),data:(counts===null||counts===void 0?void 0:counts.map(item=>item.count))||[]}];},[counts]);const handleChange=value=>{const payload={time:value};dispatch(filterOrderCounts(payload));switch(role){case'admin':dispatch(fetchOrderCounts(payload));break;case'seller':dispatch(fetchSellerOrderCounts(payload));break;default:break;}};return/*#__PURE__*/_jsxs(Card,{className:\"h-100\",title:t('orders'),extra:/*#__PURE__*/_jsxs(Select,{value:params.time,size:\"small\",style:{minWidth:110},onSelect:handleChange,defaultValue:\"subMonth\",children:[/*#__PURE__*/_jsx(Select.Option,{value:\"subWeek\",children:t('this.week')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subMonth\",children:t('this.month')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subYear\",children:t('this.year')})]}),children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mr-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-weight-bold mb-1\",children:counts===null||counts===void 0?void 0:counts.reduce((total,item)=>total+=item===null||item===void 0?void 0:item.count,0)}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Badge,{color:COLORS[6]}),t('total.orders.count')]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ChartWidget,{card:false,series:chartData,xAxis:categories,height:280,customOptions:{colors:[COLORS[6],COLORS[0]],legend:{show:false},stroke:{width:2.5,curve:'smooth'}},direction:direction})})]});}","map":null,"metadata":{},"sourceType":"module"}