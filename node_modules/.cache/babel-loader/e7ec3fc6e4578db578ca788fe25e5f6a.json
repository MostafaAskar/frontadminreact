{"ast":null,"code":"import React,{useState}from'react';import{DeleteOutlined,MinusOutlined,PlusOutlined}from'@ant-design/icons';import{Button,Card,Col,Collapse,Divider,Form,Image,Input,Row,Space,Spin}from'antd';import{batch,shallowEqual,useDispatch,useSelector}from'react-redux';import{addToCart,clearCart,removeFromCart,reduceCart,setCartShops,clearCartShops,setCartTotal,addCoupon,verifyCoupon,removeBag,setCartOrder,addShopsNote,setLoadingCoupon,addProductNote,clearData,clearProductsParams}from'redux/slices/cart';import useDidUpdate from'helpers/useDidUpdate';import orderService from'services/order';import invokableService from'services/rest/invokable';import{useTranslation}from'react-i18next';import numberToPrice from'helpers/numberToPrice';import{getCartData,getCartItems}from'redux/selectors/cartSelector';import PreviewInfo from'../../order/preview-info';import{toast}from'react-toastify';import{fetchRestProducts}from'redux/slices/product';import useDebounce from'helpers/useDebounce';import moment from'moment';import QueryString from'qs';import RiveResult from'components/rive-result';import{BsFillGiftFill}from'react-icons/bs';import{fetchRestPayments}from'redux/slices/payment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const{Panel}=Collapse;export default function OrderCart(){const{t}=useTranslation();const[form]=Form.useForm();const dispatch=useDispatch();const{cartItems,cartShops,currentBag,total,coupons,currency,notes,productNotes,productsParams}=useSelector(state=>state.cart,shallowEqual);const filteredCartItems=useSelector(state=>getCartItems(state.cart));const data=useSelector(state=>getCartData(state.cart));const[loading,setLoading]=useState(false);const[showInvoice,setShowInvoice]=useState(false);const[couponSuccessful,setCouponSuccessful]=useState(false);const debouncedCartItems=useDebounce(cartItems,300);const deleteFromCard=e=>{dispatch(removeFromCart({...e,bag_id:currentBag}));};const clearAll=()=>{dispatch(clearCart());dispatch(clearData());dispatch(clearProductsParams());if(currentBag!==0){dispatch(removeBag(currentBag));}};const increment=item=>{if((item===null||item===void 0?void 0:item.quantity)===(item===null||item===void 0?void 0:item.max_qty)||(item===null||item===void 0?void 0:item.quantity)===(item===null||item===void 0?void 0:item.product_in_stock)){return;}dispatch(addToCart({...item,bag_id:currentBag,quantity:1}));};const decrement=item=>{if(item.quantity===1){return;}if(item.quantity<=item.min_qty){return;}dispatch(reduceCart({...item,bag_id:currentBag,quantity:1}));};function formatProducts(list){var _coupons$filter,_data$deliveries,_data$delivery_point;const products=list.map(item=>{var _item$stockID,_item$stock;return{quantity:item.quantity,stock_id:item.stockID?(_item$stockID=item.stockID)===null||_item$stockID===void 0?void 0:_item$stockID.id:(_item$stock=item.stock)===null||_item$stock===void 0?void 0:_item$stock.id};});const verifiedCoupons={};coupons===null||coupons===void 0?void 0:(_coupons$filter=coupons.filter(coupon=>coupon===null||coupon===void 0?void 0:coupon.verified))===null||_coupons$filter===void 0?void 0:_coupons$filter.forEach(coupon=>verifiedCoupons[`${coupon===null||coupon===void 0?void 0:coupon.shop_id}`]=coupon===null||coupon===void 0?void 0:coupon.name);const result={products,currency_id:currency===null||currency===void 0?void 0:currency.id,coupon:verifiedCoupons,delivery_type:data===null||data===void 0?void 0:(_data$deliveries=data.deliveries)===null||_data$deliveries===void 0?void 0:_data$deliveries.value,delivery_point_id:(data===null||data===void 0?void 0:data.delivery_type)==='point'?data===null||data===void 0?void 0:(_data$delivery_point=data.delivery_point)===null||_data$delivery_point===void 0?void 0:_data$delivery_point.value:undefined,delivery_price_id:(data===null||data===void 0?void 0:data.delivery_type)==='delivery'?data===null||data===void 0?void 0:data.delivery_price_id:undefined};return QueryString.stringify(result,{addQueryPrefix:true});}useDidUpdate(()=>{var _data$shop;dispatch(fetchRestProducts({perPage:12,currency_id:currency===null||currency===void 0?void 0:currency.id,shop_id:data===null||data===void 0?void 0:(_data$shop=data.shop)===null||_data$shop===void 0?void 0:_data$shop.value,active:1}));dispatch(fetchRestPayments({active:1}));if(filteredCartItems.length){productCalculate();}},[currency]);useDidUpdate(()=>{if(filteredCartItems.length){productCalculate();}else{dispatch(clearCartShops());}},[debouncedCartItems,currentBag,data===null||data===void 0?void 0:data.delivery_price_id,currency,couponSuccessful]);function productCalculate(){setLoading(true);const products=formatProducts(filteredCartItems);orderService.calculate(products).then(_ref=>{var _data$delivery_fee,_data$coupon$reduce,_data$coupon;let{data}=_ref;const shopList=[...(data===null||data===void 0?void 0:data.shops)];const orderCartTotal={product_total:data===null||data===void 0?void 0:data.price,product_tax:data===null||data===void 0?void 0:data.total_tax,shop_tax:data===null||data===void 0?void 0:data.total_shop_tax,order_total:data===null||data===void 0?void 0:data.total_price,delivery_fee:data===null||data===void 0?void 0:(_data$delivery_fee=data.delivery_fee)===null||_data$delivery_fee===void 0?void 0:_data$delivery_fee.reduce((total,item)=>total+=item===null||item===void 0?void 0:item.price,0),service_fee:data===null||data===void 0?void 0:data.service_fee,discount:data===null||data===void 0?void 0:data.total_discount,tax:data===null||data===void 0?void 0:data.total_tax,coupon:(_data$coupon$reduce=data===null||data===void 0?void 0:(_data$coupon=data.coupon)===null||_data$coupon===void 0?void 0:_data$coupon.reduce((total,item)=>total+=item===null||item===void 0?void 0:item.price,0))!==null&&_data$coupon$reduce!==void 0?_data$coupon$reduce:0};batch(()=>{dispatch(setCartShops(shopList));dispatch(setCartTotal(orderCartTotal));});}).finally(()=>setLoading(false));}const handleCloseInvoice=()=>{setShowInvoice(false);clearAll();toast.success(t('successfully.closed'));dispatch(fetchRestProducts({perPage:12,currency_id:currency===null||currency===void 0?void 0:currency.id,shop_id:productsParams===null||productsParams===void 0?void 0:productsParams.shop_id,category_id:productsParams===null||productsParams===void 0?void 0:productsParams.category_id,brand_id:productsParams===null||productsParams===void 0?void 0:productsParams.brand_id,active:1}));};function handleCheckCoupon(shopId){var _coupon$name,_data$userOBJ;const coupon=coupons===null||coupons===void 0?void 0:coupons.find(coupon=>coupon.shop_id===shopId);if(!coupon||!(coupon!==null&&coupon!==void 0&&(_coupon$name=coupon.name)!==null&&_coupon$name!==void 0&&_coupon$name.trim())){return;}const body={coupon:coupon===null||coupon===void 0?void 0:coupon.name,shop_id:coupon===null||coupon===void 0?void 0:coupon.shop_id,user_id:data===null||data===void 0?void 0:(_data$userOBJ=data.userOBJ)===null||_data$userOBJ===void 0?void 0:_data$userOBJ.id};dispatch(setLoadingCoupon({shop_id:shopId,loading:true}));invokableService.checkCoupon(body).then(_ref2=>{let{data}=_ref2;dispatch(verifyCoupon({shop_id:data===null||data===void 0?void 0:data.shop_id,price:data===null||data===void 0?void 0:data.price}));setCouponSuccessful(!couponSuccessful);}).catch(error=>console.log('error of coupon => ',error)).finally(()=>dispatch(setLoadingCoupon({shop_id:shopId,loading:false})));}const handleClick=()=>{var _data$delivery_point2,_data$user,_data$paymentType,_data$phone;if(!currency){toast.warning(t('please.select.currency'));return;}if(!data.address&&(data===null||data===void 0?void 0:data.delivery_type)===1){toast.warning(t('please.select.address'));return;}if(!data.country&&(data===null||data===void 0?void 0:data.delivery_type)===1){toast.warning(t('please.select.country'));return;}if(!data.street_house_number&&(data===null||data===void 0?void 0:data.delivery_type)===1){toast.warning(t('please.enter.house.number'));return;}if(!data.zip_code&&(data===null||data===void 0?void 0:data.delivery_type)===1){toast.warning(t('please.enter.zipcode'));return;}if(!data.delivery_point&&(data===null||data===void 0?void 0:data.delivery_type)===0){toast.warning(t('please.select.delivery.point'));return;}if(!data.delivery_time){toast.warning(t('shop.closed'));return;}if(!data.delivery_date){toast.warning(t('please.select.deliveryDate'));return;}setLoading(true);const address=(data===null||data===void 0?void 0:data.delivery_type)==='delivery'?data===null||data===void 0?void 0:data.deliveryAddress:undefined;const delivery_point_id=(data===null||data===void 0?void 0:data.delivery_type)==='point'?data===null||data===void 0?void 0:(_data$delivery_point2=data.delivery_point)===null||_data$delivery_point2===void 0?void 0:_data$delivery_point2.value:undefined;const delivery_price_id=(data===null||data===void 0?void 0:data.delivery_type)==='delivery'?data===null||data===void 0?void 0:data.delivery_price_id:undefined;const delivery_date=`${data.delivery_date} ${moment(data.delivery_time,'HH:mm').format('HH:mm')}`;const verifiedCoupons=coupons===null||coupons===void 0?void 0:coupons.filter(coupon=>coupon===null||coupon===void 0?void 0:coupon.verified);const resultCoupons=verifiedCoupons.reduce((acc,coupon)=>{acc[`${coupon.shop_id}`]=coupon.name;return acc;},{});const shopData=cartShops===null||cartShops===void 0?void 0:cartShops.flatMap(cartShop=>{var _cartShop$shop,_cartShop$stocks;return{shop_id:cartShop===null||cartShop===void 0?void 0:(_cartShop$shop=cartShop.shop)===null||_cartShop$shop===void 0?void 0:_cartShop$shop.id,products:cartShop===null||cartShop===void 0?void 0:(_cartShop$stocks=cartShop.stocks)===null||_cartShop$stocks===void 0?void 0:_cartShop$stocks.map(stock=>{var _stock$stock,_productNotes$find;return{bonus:stock===null||stock===void 0?void 0:stock.bonus,stock_id:stock===null||stock===void 0?void 0:(_stock$stock=stock.stock)===null||_stock$stock===void 0?void 0:_stock$stock.id,quantity:stock===null||stock===void 0?void 0:stock.quantity,note:(_productNotes$find=productNotes.find(item=>{var _stock$stock2;return(item===null||item===void 0?void 0:item.stock_id)===(stock===null||stock===void 0?void 0:(_stock$stock2=stock.stock)===null||_stock$stock2===void 0?void 0:_stock$stock2.id);}))===null||_productNotes$find===void 0?void 0:_productNotes$find.note};})};});const body={tax:total.order_tax,user_id:(_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.value,currency_id:currency===null||currency===void 0?void 0:currency.id,rate:currency.rate,payment_id:(_data$paymentType=data.paymentType)===null||_data$paymentType===void 0?void 0:_data$paymentType.key,delivery_point_id,delivery_price_id,address,delivery_date,delivery_type:data.deliveries.value,phone:data===null||data===void 0?void 0:(_data$phone=data.phone)===null||_data$phone===void 0?void 0:_data$phone.toString(),//changes\nnotes,coupon:resultCoupons,data:shopData};orderService.create(body).then(response=>{batch(()=>{dispatch(setCartOrder(response===null||response===void 0?void 0:response.data));dispatch(clearCart());});setShowInvoice(true);form.resetFields();}).catch(err=>console.error(err)).finally(()=>setLoading(false));};const shopChildren=rowData=>{var _rowData$stocks;const products=rowData===null||rowData===void 0?void 0:(_rowData$stocks=rowData.stocks)===null||_rowData$stocks===void 0?void 0:_rowData$stocks.flatMap(item=>{var _item$stock2,_item$stock2$product,_item$stock$product$i,_item$stock3,_item$stock3$product,_item$stock$product$t,_item$stock4,_item$stock4$product,_item$stock4$product$,_item$stock5,_item$stock5$product,_item$stock6,_item$stock6$product,_item$stock7,_item$stock7$product,_item$stock8,_item$stock8$product,_item$stock9,_item$stock10,_item$stock10$product;return{id:item===null||item===void 0?void 0:(_item$stock2=item.stock)===null||_item$stock2===void 0?void 0:(_item$stock2$product=_item$stock2.product)===null||_item$stock2$product===void 0?void 0:_item$stock2$product.id,img:(_item$stock$product$i=item===null||item===void 0?void 0:(_item$stock3=item.stock)===null||_item$stock3===void 0?void 0:(_item$stock3$product=_item$stock3.product)===null||_item$stock3$product===void 0?void 0:_item$stock3$product.img)!==null&&_item$stock$product$i!==void 0?_item$stock$product$i:'https://via.placeholder.com/150',title:(_item$stock$product$t=item===null||item===void 0?void 0:(_item$stock4=item.stock)===null||_item$stock4===void 0?void 0:(_item$stock4$product=_item$stock4.product)===null||_item$stock4$product===void 0?void 0:(_item$stock4$product$=_item$stock4$product.translation)===null||_item$stock4$product$===void 0?void 0:_item$stock4$product$.title)!==null&&_item$stock$product$t!==void 0?_item$stock$product$t:t('no.translation.or.name'),price:item===null||item===void 0?void 0:item.product_price,quantity:item===null||item===void 0?void 0:item.quantity,product_in_stock:item===null||item===void 0?void 0:item.product_quantity,unit:item===null||item===void 0?void 0:(_item$stock5=item.stock)===null||_item$stock5===void 0?void 0:(_item$stock5$product=_item$stock5.product)===null||_item$stock5$product===void 0?void 0:_item$stock5$product.unit,interval:item===null||item===void 0?void 0:(_item$stock6=item.stock)===null||_item$stock6===void 0?void 0:(_item$stock6$product=_item$stock6.product)===null||_item$stock6$product===void 0?void 0:_item$stock6$product.interval,max_qty:item===null||item===void 0?void 0:(_item$stock7=item.stock)===null||_item$stock7===void 0?void 0:(_item$stock7$product=_item$stock7.product)===null||_item$stock7$product===void 0?void 0:_item$stock7$product.max_qty,min_qty:item===null||item===void 0?void 0:(_item$stock8=item.stock)===null||_item$stock8===void 0?void 0:(_item$stock8$product=_item$stock8.product)===null||_item$stock8$product===void 0?void 0:_item$stock8$product.min_qty,extras:item===null||item===void 0?void 0:(_item$stock9=item.stock)===null||_item$stock9===void 0?void 0:_item$stock9.stock_extras,shop_id:item===null||item===void 0?void 0:(_item$stock10=item.stock)===null||_item$stock10===void 0?void 0:(_item$stock10$product=_item$stock10.product)===null||_item$stock10$product===void 0?void 0:_item$stock10$product.shop_id,bonus:!!(item!==null&&item!==void 0&&item.bonus),stockID:item===null||item===void 0?void 0:item.stock};});const extrasHTML=(extras,key)=>{const colorGroup=extras===null||extras===void 0?void 0:extras.filter(extra=>{var _extra$group;return(extra===null||extra===void 0?void 0:(_extra$group=extra.group)===null||_extra$group===void 0?void 0:_extra$group.type)==='color';});const textGroup=extras===null||extras===void 0?void 0:extras.filter(extra=>{var _extra$group2;return(extra===null||extra===void 0?void 0:(_extra$group2=extra.group)===null||_extra$group2===void 0?void 0:_extra$group2.type)!=='color';});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Space,{wrap:true,style:{marginBottom:'10px'},children:[!!(colorGroup!==null&&colorGroup!==void 0&&colorGroup.length)&&t('color')+':',colorGroup===null||colorGroup===void 0?void 0:colorGroup.map(color=>{var _color$value;return/*#__PURE__*/_jsx(\"span\",{style:{display:'block',width:'19px',height:'19px',backgroundColor:color===null||color===void 0?void 0:(_color$value=color.value)===null||_color$value===void 0?void 0:_color$value.value,border:'1px solid #080136',borderRadius:'50%'}});})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',rowGap:'10px'},children:textGroup===null||textGroup===void 0?void 0:textGroup.map(text=>{var _text$group,_text$group$translati,_text$value;return/*#__PURE__*/_jsxs(\"div\",{children:[t(text===null||text===void 0?void 0:(_text$group=text.group)===null||_text$group===void 0?void 0:(_text$group$translati=_text$group.translation)===null||_text$group$translati===void 0?void 0:_text$group$translati.title),\":\",' ',/*#__PURE__*/_jsx(\"span\",{children:text===null||text===void 0?void 0:(_text$value=text.value)===null||_text$value===void 0?void 0:_text$value.value})]});})})]},key);};const counterHTML=product=>{var _product$interval,_product$unit,_product$unit$transla;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Button,{size:'small',shape:'circle',icon:/*#__PURE__*/_jsx(MinusOutlined,{size:8}),type:'primary',disabled:(product===null||product===void 0?void 0:product.quantity)<=1||(product===null||product===void 0?void 0:product.quantity)===(product===null||product===void 0?void 0:product.min_qty)||(product===null||product===void 0?void 0:product.bonus),onClick:()=>decrement(product)}),/*#__PURE__*/_jsxs(\"h5\",{style:{margin:'8px 10px'},children:[(product===null||product===void 0?void 0:product.quantity)*((_product$interval=product===null||product===void 0?void 0:product.interval)!==null&&_product$interval!==void 0?_product$interval:1),' ',/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',fontWeight:'300'},children:product===null||product===void 0?void 0:(_product$unit=product.unit)===null||_product$unit===void 0?void 0:(_product$unit$transla=_product$unit.translation)===null||_product$unit$transla===void 0?void 0:_product$unit$transla.title})]}),/*#__PURE__*/_jsx(Button,{size:'small',shape:'circle',icon:/*#__PURE__*/_jsx(PlusOutlined,{size:8}),type:'primary',disabled:(product===null||product===void 0?void 0:product.quantity)===(product===null||product===void 0?void 0:product.product_in_stock)||(product===null||product===void 0?void 0:product.quantity)===(product===null||product===void 0?void 0:product.max_qty)||(product===null||product===void 0?void 0:product.bonus),onClick:()=>increment(product)})]},product===null||product===void 0?void 0:product.id);};return products===null||products===void 0?void 0:products.map((product,index)=>{var _productNotes$find$no,_productNotes$find2,_product$stockID2;const productNoteValue=(_productNotes$find$no=productNotes===null||productNotes===void 0?void 0:(_productNotes$find2=productNotes.find(item=>{var _product$stockID;return(item===null||item===void 0?void 0:item.stock_id)===(product===null||product===void 0?void 0:(_product$stockID=product.stockID)===null||_product$stockID===void 0?void 0:_product$stockID.id);}))===null||_productNotes$find2===void 0?void 0:_productNotes$find2.note)!==null&&_productNotes$find$no!==void 0?_productNotes$find$no:'';return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{gutter:6,style:{marginBottom:'20px'},children:/*#__PURE__*/_jsxs(Col,{span:24,style:{display:'flex',columnGap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'120px',height:'120px',backgroundColor:'#f5f5f5',overflow:'hidden',borderRadius:'10px',position:'relative'},children:[/*#__PURE__*/_jsx(Image,{alt:t('shop.logo'),style:{objectFit:'contain'},src:(product===null||product===void 0?void 0:product.img)||'https://via.placeholder.com/150',width:120,height:120,preview:false}),(product===null||product===void 0?void 0:product.bonus)&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',zIndex:'5'},children:\"bonus\"})]}),(product===null||product===void 0?void 0:product.bonus)&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'5px',left:'8px',backgroundColor:'#283142',width:'25px',height:'25px',display:'flex',justifyContent:'center',alignItems:'center',borderRadius:'5px'},children:/*#__PURE__*/_jsx(BsFillGiftFill,{color:'#fff'})}),/*#__PURE__*/_jsxs(\"div\",{style:{width:`calc(100% - 120px - 20px)`},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{maxWidth:!(product!==null&&product!==void 0&&product.bonus)?'calc(100% - 80px)':'100%',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},children:product===null||product===void 0?void 0:product.title}),!(product!==null&&product!==void 0&&product.bonus)&&/*#__PURE__*/_jsx(\"h5\",{style:{width:'max-content',marginLeft:'15px',textAlign:'right'},children:numberToPrice(product===null||product===void 0?void 0:product.price,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)})]}),/*#__PURE__*/_jsx(Space,{children:extrasHTML(product===null||product===void 0?void 0:product.extras,product===null||product===void 0?void 0:product.id)})]})]})},(product===null||product===void 0?void 0:(_product$stockID2=product.stockID)===null||_product$stockID2===void 0?void 0:_product$stockID2.id)+'_'+index),/*#__PURE__*/_jsx(Row,{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsx(Input.TextArea,{className:\"w-100\",placeholder:t('product.note'),value:productNoteValue,disabled:product===null||product===void 0?void 0:product.bonus,onChange:e=>{var _product$stockID3;return dispatch(addProductNote({stock_id:product===null||product===void 0?void 0:(_product$stockID3=product.stockID)===null||_product$stockID3===void 0?void 0:_product$stockID3.id,note:e.target.value}));},rows:1,maxLength:100})}),/*#__PURE__*/_jsxs(Row,{children:[counterHTML(product),/*#__PURE__*/_jsx(Button,{style:{marginLeft:'20px'},icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),size:'small',onClick:()=>deleteFromCard(product),disabled:product===null||product===void 0?void 0:product.bonus})]}),/*#__PURE__*/_jsx(Divider,{})]});});};return/*#__PURE__*/_jsxs(Card,{title:t('cart'),children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-save\",children:[!!(cartShops!==null&&cartShops!==void 0&&cartShops.length)?/*#__PURE__*/_jsx(Collapse,{children:cartShops===null||cartShops===void 0?void 0:cartShops.map(item=>{var _item$shop2,_item$shop3,_item$shop3$translati;const coupon=coupons===null||coupons===void 0?void 0:coupons.find(coupon=>{var _item$shop;return(coupon===null||coupon===void 0?void 0:coupon.shop_id)===(item===null||item===void 0?void 0:(_item$shop=item.shop)===null||_item$shop===void 0?void 0:_item$shop.id);});return/*#__PURE__*/_jsxs(Panel,{header:item===null||item===void 0?void 0:(_item$shop3=item.shop)===null||_item$shop3===void 0?void 0:(_item$shop3$translati=_item$shop3.translation)===null||_item$shop3$translati===void 0?void 0:_item$shop3$translati.title,children:[shopChildren(item),/*#__PURE__*/_jsx(Input.TextArea,{className:\"w-100\",rows:1,style:{marginBottom:'20px'},placeholder:t('shop.note'),onChange:e=>{var _item$shop4;return dispatch(addShopsNote({note:e.target.value,shop_id:item===null||item===void 0?void 0:(_item$shop4=item.shop)===null||_item$shop4===void 0?void 0:_item$shop4.id}));},maxLength:100}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',columnGap:'20px'},children:[/*#__PURE__*/_jsx(Input,{className:'w-100',placeholder:t('enter.coupon'),onChange:e=>{var _item$shop5;return dispatch(addCoupon({name:e.target.value,shop_id:item===null||item===void 0?void 0:(_item$shop5=item.shop)===null||_item$shop5===void 0?void 0:_item$shop5.id}));}}),/*#__PURE__*/_jsx(Button,{onClick:()=>{var _item$shop6;return handleCheckCoupon(item===null||item===void 0?void 0:(_item$shop6=item.shop)===null||_item$shop6===void 0?void 0:_item$shop6.id);},disabled:coupon===null||coupon===void 0?void 0:coupon.loading,loading:coupon===null||coupon===void 0?void 0:coupon.loading,children:t('check')})]})]},item===null||item===void 0?void 0:(_item$shop2=item.shop)===null||_item$shop2===void 0?void 0:_item$shop2.uuid);})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RiveResult,{id:\"nosell\"}),/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center'},children:t('empty.cart')})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Row,{className:\"all-price-row\",children:/*#__PURE__*/_jsxs(Col,{span:24,className:\"col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('products')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.product_total,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('delivery.fee')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.delivery_fee,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('service.fee')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.service_fee,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('tax')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.tax,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('discount')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",' ',numberToPrice(total.discount,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('coupon')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",' ',numberToPrice(total.coupon,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)]})]})]})}),/*#__PURE__*/_jsxs(Row,{className:\"submit-row\",children:[/*#__PURE__*/_jsxs(Col,{span:14,className:\"col\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('total.amount')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.order_total,currency===null||currency===void 0?void 0:currency.symbol,currency===null||currency===void 0?void 0:currency.position)})]}),/*#__PURE__*/_jsx(Col,{className:\"col2\",children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>handleClick(),disabled:!cartShops.length,loading:loading,children:t('place.order')})})]})]}),showInvoice&&/*#__PURE__*/_jsx(PreviewInfo,{handleClose:handleCloseInvoice})]});}","map":null,"metadata":{},"sourceType":"module"}