{"ast":null,"code":"import{GoogleApiWrapper,Map,Marker,Polygon,Polyline}from'google-maps-react';import React from'react';import{useState,useEffect}from'react';import{MAP_API_KEY}from'../configs/app-global';import{BiCurrentLocation}from'react-icons/bi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const DrawingManager=props=>{var _props$triangleCoords2,_props$triangleCoords3;const[center,setCenter]=useState({lat:38.58799374569842,lng:-98.47949767583457});const[polygon,setPolygon]=useState(props.triangleCoords?props.triangleCoords:[]);const[finish,setFinish]=useState(props.triangleCoords?true:false);const[focus,setFocus]=useState(null);props.setMerge(finish);const onClick=(t,map,coord)=>{setFocus(false);const{latLng}=coord;const lat=latLng.lat();const lng=latLng.lng();if(finish){setPolygon([]);props.settriangleCoords([{lat,lng}]);setCenter({lat,lng});setFinish(false);}else{props.settriangleCoords(prev=>[...prev,{lat,lng}]);}};const onFinish=e=>{var _props$triangleCoords,_e$position;setFinish(props.triangleCoords?true:false);if(((_props$triangleCoords=props.triangleCoords[0])===null||_props$triangleCoords===void 0?void 0:_props$triangleCoords.lat)===((_e$position=e.position)===null||_e$position===void 0?void 0:_e$position.lat)&&props.triangleCoords.length>1){setPolygon(props.triangleCoords);props.setLocation(props.triangleCoords);setFinish(true);setFocus(true);}};const currentLocation=()=>{navigator.geolocation.getCurrentPosition(function(position){setCenter({lat:position.coords.latitude,lng:position.coords.longitude});});};useEffect(()=>{setFocus(true);},[]);function handleMapReady(_,map){map.setOptions({draggableCursor:'crosshair',draggingCursor:'grab'});}const markers=props.triangleCoords.map(item=>({lat:Number(item.lat||'0'),lng:Number(item.lng||'0')}));// eslint-disable-next-line no-undef\nvar bounds=new props.google.maps.LatLngBounds();for(var i=0;i<markers.length;i++){bounds.extend(markers[i]);}const OPTIONS={minZoom:15,maxZoom:15};return/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",style:{height:500,width:'100%'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"map-button\",type:\"button\",onClick:()=>{currentLocation();},children:/*#__PURE__*/_jsx(BiCurrentLocation,{})}),/*#__PURE__*/_jsxs(Map,{options:OPTIONS,cursor:'pointer',onClick:onClick,maxZoom:16,minZoom:2,google:props.google,initialCenter:center,center:center,onReady:handleMapReady,bounds:focus&&bounds,className:\"clickable\",children:[(_props$triangleCoords2=props.triangleCoords)===null||_props$triangleCoords2===void 0?void 0:_props$triangleCoords2.map((item,idx)=>/*#__PURE__*/_jsx(Marker,{onClick:e=>onFinish(e),position:item,icon:{url:'https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg',scaledSize:new props.google.maps.Size(10,10)},className:\"marker\"},idx)),!(polygon!==null&&polygon!==void 0&&polygon.length)?/*#__PURE__*/_jsx(Polyline,{path:props.triangleCoords,strokeColor:\"black\",strokeOpacity:0.8,strokeWeight:3,fillColor:\"black\",fillOpacity:0.35},(_props$triangleCoords3=props.triangleCoords)===null||_props$triangleCoords3===void 0?void 0:_props$triangleCoords3.length):/*#__PURE__*/_jsx(Polygon,{path:props.triangleCoords,strokeColor:\"black\",strokeOpacity:0.8,strokeWeight:3,fillColor:\"black\",fillOpacity:0.35},polygon===null||polygon===void 0?void 0:polygon.length)]})]});};export default GoogleApiWrapper({apiKey:MAP_API_KEY,libraries:['places']})(DrawingManager);","map":null,"metadata":{},"sourceType":"module"}