{"ast":null,"code":"import React,{useMemo,useState}from'react';import{Spin,TreeSelect}from'antd';import debounce from'lodash/debounce';import{jsx as _jsx}from\"react/jsx-runtime\";export const AsyncTreeSelect=_ref=>{let{fetchOptions,refetch=false,debounceTimeout=400,...props}=_ref;const[fetching,setFetching]=useState(false);const[treeData,setTreeData]=useState([]);const fetchOnFocus=()=>{if(!treeData.length||refetch){setFetching(true);fetchOptions().then(newOptions=>{setTreeData(newOptions);setFetching(false);});}};const debounceFetcher=useMemo(()=>{const loadOptions=value=>{setTreeData([]);setFetching(true);fetchOptions(value).then(newOptions=>{setTreeData(newOptions);setFetching(false);});};return debounce(loadOptions,debounceTimeout);},[]);return/*#__PURE__*/_jsx(TreeSelect,{showSearch:true,labelInValue:true,filterTreeNode:(value,node)=>{return node.label.localeCompare(value);},treeLine:true,onSearch:value=>debounceFetcher(value),treeData:fetching?[]:treeData,treeDefaultExpandAll:true,onFocus:fetchOnFocus,notFoundContent:fetching?/*#__PURE__*/_jsx(Spin,{size:\"small\"}):'no results',...props});};","map":null,"metadata":{},"sourceType":"module"}