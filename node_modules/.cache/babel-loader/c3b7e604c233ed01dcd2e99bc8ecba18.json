{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/delivery-price/price-add.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport deliveryPriceService from 'services/seller/delivery-price';\nimport { fetchSellerDeliveryPrice } from 'redux/slices/delivery-price';\nimport PriceForm from './price-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddDeliveryPrice = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    myShop\n  } = useSelector(state => state.myShop, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const {\n    languages\n  } = useSelector(state => state.formLang, shallowEqual);\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({\n        activeMenu,\n        data\n      }));\n    };\n  }, []);\n\n  const onFinish = values => {\n    const {\n      area,\n      city,\n      country,\n      region,\n      price,\n      fitting_rooms,\n      active\n    } = values;\n    const body = {\n      price,\n      fitting_rooms,\n      active: Number(active),\n      area_id: area === null || area === void 0 ? void 0 : area.value,\n      city_id: city === null || city === void 0 ? void 0 : city.value,\n      country_id: country === null || country === void 0 ? void 0 : country.value,\n      region_id: region === null || region === void 0 ? void 0 : region.value,\n      address: getTranslationFields(languages, values, 'address'),\n      shop_id: myShop === null || myShop === void 0 ? void 0 : myShop.id\n    };\n    const nextUrl = 'seller/delivery-price';\n    return deliveryPriceService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu,\n          nextUrl\n        }));\n        dispatch(fetchSellerDeliveryPrice({}));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(PriceForm, {\n    form: form,\n    handleSubmit: onFinish\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 10\n  }, this);\n};\n\n_s(AddDeliveryPrice, \"M6AVlQAC6W68tuqXt5YdeCC2Gms=\", false, function () {\n  return [useTranslation, useSelector, useSelector, useDispatch, Form.useForm, useNavigate, useSelector];\n});\n\n_c = AddDeliveryPrice;\nexport default AddDeliveryPrice;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddDeliveryPrice\");","map":{"version":3,"names":["React","useEffect","useNavigate","toast","Form","batch","shallowEqual","useDispatch","useSelector","removeFromMenu","setMenuData","useTranslation","getTranslationFields","deliveryPriceService","fetchSellerDeliveryPrice","PriceForm","AddDeliveryPrice","t","activeMenu","state","menu","myShop","dispatch","form","useForm","navigate","languages","formLang","data","getFieldsValue","onFinish","values","area","city","country","region","price","fitting_rooms","active","body","Number","area_id","value","city_id","country_id","region_id","address","shop_id","id","nextUrl","create","then","success"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/delivery-price/price-add.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Form } from 'antd';\nimport { batch, shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { removeFromMenu, setMenuData } from 'redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport deliveryPriceService from 'services/seller/delivery-price';\nimport { fetchSellerDeliveryPrice } from 'redux/slices/delivery-price';\nimport PriceForm from './price-form';\n\nconst AddDeliveryPrice = () => {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { myShop } = useSelector((state) => state.myShop, shallowEqual);\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n\n  useEffect(() => {\n    return () => {\n      const data = form.getFieldsValue(true);\n      dispatch(setMenuData({ activeMenu, data }));\n    };\n  }, []);\n\n  const onFinish = (values) => {\n    const { area, city, country, region, price, fitting_rooms, active } =\n      values;\n\n    const body = {\n      price,\n      fitting_rooms,\n      active: Number(active),\n      area_id: area?.value,\n      city_id: city?.value,\n      country_id: country?.value,\n      region_id: region?.value,\n      address: getTranslationFields(languages, values, 'address'),\n      shop_id: myShop?.id,\n    };\n    const nextUrl = 'seller/delivery-price';\n\n    return deliveryPriceService.create(body).then(() => {\n      toast.success(t('successfully.created'));\n      batch(() => {\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n        dispatch(fetchSellerDeliveryPrice({}));\n      });\n      navigate(`/${nextUrl}`);\n    });\n  };\n\n  return <PriceForm form={form} handleSubmit={onFinish} />;\n};\n\nexport default AddDeliveryPrice;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}