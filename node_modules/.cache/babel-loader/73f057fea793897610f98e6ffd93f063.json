{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/user/walletHistory.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Button, Space, Table } from 'antd';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport userService from '../../services/user';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport UserWalletModal from './userWalletModal';\nimport FilterColumns from '../../components/filter-column';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function WalletHistory(_ref) {\n  _s();\n\n  var _data$wallet;\n\n  let {\n    data\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(10);\n  const [total, setTotal] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [list, setList] = useState([]);\n  const [walletModal, setWalletModal] = useState(false);\n  const {\n    defaultCurrency\n  } = useSelector(state => state.currency, shallowEqual);\n  const [columns, setColumns] = useState([{\n    title: t('created.by'),\n    dataIndex: 'author',\n    key: 'author',\n    is_show: true,\n    render: author => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [author === null || author === void 0 ? void 0 : author.firstname, \" \", (author === null || author === void 0 ? void 0 : author.lastname) || '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: t('price'),\n    dataIndex: 'price',\n    key: 'price',\n    is_show: true,\n    render: price => numberToPrice(price, defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.symbol)\n  }, {\n    title: t('note'),\n    dataIndex: 'note',\n    key: 'note',\n    is_show: true\n  }, {\n    title: t('created.at'),\n    dataIndex: 'created_at',\n    key: 'created_at',\n    is_show: true,\n    render: created_at => moment(created_at).format('YYYY-MM-DD HH:mm')\n  }]);\n\n  function onChangePagination(pagination, filters, sorter) {\n    const {\n      pageSize: perPage,\n      current: page\n    } = pagination;\n    setPage(page);\n    setPerPage(perPage);\n  }\n\n  function fetchWalletHistory() {\n    setLoading(true);\n    const params = {\n      pageSize: 10,\n      page: page || 1\n    };\n    userService.walletHistory(data.uuid, params).then(res => {\n      setList(res.data);\n      setTotal(res.meta.total);\n    }).finally(() => setLoading(false));\n  }\n\n  useEffect(() => {\n    fetchWalletHistory(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"px-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-end\",\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        wrap: true,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          icon: /*#__PURE__*/_jsxDEV(PlusCircleOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 19\n          }, this),\n          onClick: () => setWalletModal(true),\n          children: `${t('wallet')}: ${numberToPrice(data === null || data === void 0 ? void 0 : (_data$wallet = data.wallet) === null || _data$wallet === void 0 ? void 0 : _data$wallet.price, defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.symbol)}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterColumns, {\n          columns: columns,\n          setColumns: setColumns\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      scroll: {\n        x: true\n      },\n      columns: columns === null || columns === void 0 ? void 0 : columns.filter(item => item.is_show),\n      dataSource: list,\n      loading: loading,\n      pagination: {\n        pageSize: perPage,\n        page,\n        total\n      },\n      rowKey: record => record.id,\n      onChange: onChangePagination\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), walletModal && /*#__PURE__*/_jsxDEV(UserWalletModal, {\n      modal: walletModal,\n      uuid: data.uuid,\n      handleCancel: () => setWalletModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n\n_s(WalletHistory, \"e92SbqNm7GtlujKKcXVw+7tZcIQ=\", false, function () {\n  return [useTranslation, useSelector];\n});\n\n_c = WalletHistory;\n\nvar _c;\n\n$RefreshReg$(_c, \"WalletHistory\");","map":{"version":3,"names":["React","useEffect","useState","Button","Space","Table","shallowEqual","useSelector","useTranslation","numberToPrice","userService","PlusCircleOutlined","UserWalletModal","FilterColumns","moment","WalletHistory","data","t","page","setPage","perPage","setPerPage","total","setTotal","loading","setLoading","list","setList","walletModal","setWalletModal","defaultCurrency","state","currency","columns","setColumns","title","dataIndex","key","is_show","render","author","firstname","lastname","price","symbol","created_at","format","onChangePagination","pagination","filters","sorter","pageSize","current","fetchWalletHistory","params","walletHistory","uuid","then","res","meta","finally","wallet","x","filter","item","record","id"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/user/walletHistory.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Button, Space, Table } from 'antd';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport userService from '../../services/user';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport UserWalletModal from './userWalletModal';\nimport FilterColumns from '../../components/filter-column';\nimport moment from 'moment';\n\nexport default function WalletHistory({ data }) {\n  const { t } = useTranslation();\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(10);\n  const [total, setTotal] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [list, setList] = useState([]);\n  const [walletModal, setWalletModal] = useState(false);\n  const { defaultCurrency } = useSelector(\n    (state) => state.currency,\n    shallowEqual,\n  );\n\n  const [columns, setColumns] = useState([\n    {\n      title: t('created.by'),\n      dataIndex: 'author',\n      key: 'author',\n      is_show: true,\n      render: (author) => (\n        <div>\n          {author?.firstname} {author?.lastname || ''}\n        </div>\n      ),\n    },\n    {\n      title: t('price'),\n      dataIndex: 'price',\n      key: 'price',\n      is_show: true,\n      render: (price) => numberToPrice(price, defaultCurrency?.symbol),\n    },\n    {\n      title: t('note'),\n      dataIndex: 'note',\n      key: 'note',\n      is_show: true,\n    },\n    {\n      title: t('created.at'),\n      dataIndex: 'created_at',\n      key: 'created_at',\n      is_show: true,\n      render: (created_at) => moment(created_at).format('YYYY-MM-DD HH:mm'),\n    },\n  ]);\n\n  function onChangePagination(pagination, filters, sorter) {\n    const { pageSize: perPage, current: page } = pagination;\n    setPage(page);\n    setPerPage(perPage);\n  }\n\n  function fetchWalletHistory() {\n    setLoading(true);\n    const params = {\n      pageSize: 10,\n      page: page || 1,\n    };\n    userService\n      .walletHistory(data.uuid, params)\n      .then((res) => {\n        setList(res.data);\n        setTotal(res.meta.total);\n      })\n      .finally(() => setLoading(false));\n  }\n\n  useEffect(() => {\n    fetchWalletHistory();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page]);\n\n  return (\n    <div className='px-2'>\n      <div className='d-flex justify-content-end'>\n        <Space wrap>\n          <Button\n            type='primary'\n            icon={<PlusCircleOutlined />}\n            onClick={() => setWalletModal(true)}\n          >\n            {`${t('wallet')}: ${numberToPrice(\n              data?.wallet?.price,\n              defaultCurrency?.symbol,\n            )}`}\n          </Button>\n          <FilterColumns columns={columns} setColumns={setColumns} />\n        </Space>\n      </div>\n      <Table\n        scroll={{ x: true }}\n        columns={columns?.filter((item) => item.is_show)}\n        dataSource={list}\n        loading={loading}\n        pagination={{\n          pageSize: perPage,\n          page,\n          total,\n        }}\n        rowKey={(record) => record.id}\n        onChange={onChangePagination}\n      />\n      {walletModal && (\n        <UserWalletModal\n          modal={walletModal}\n          uuid={data.uuid}\n          handleCancel={() => setWalletModal(false)}\n        />\n      )}\n    </div>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,KAAxB,QAAqC,MAArC;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,aAA1C;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AACA,SAASC,kBAAT,QAAmC,mBAAnC;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAEA,eAAe,SAASC,aAAT,OAAiC;EAAA;;EAAA;;EAAA,IAAV;IAAEC;EAAF,CAAU;EAC9C,MAAM;IAAEC;EAAF,IAAQT,cAAc,EAA5B;EACA,MAAM,CAACU,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,CAAC,CAAD,CAAhC;EACA,MAAM,CAACkB,OAAD,EAAUC,UAAV,IAAwBnB,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACoB,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAAC,CAAD,CAAlC;EACA,MAAM,CAACsB,OAAD,EAAUC,UAAV,IAAwBvB,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM,CAACwB,IAAD,EAAOC,OAAP,IAAkBzB,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAAC0B,WAAD,EAAcC,cAAd,IAAgC3B,QAAQ,CAAC,KAAD,CAA9C;EACA,MAAM;IAAE4B;EAAF,IAAsBvB,WAAW,CACpCwB,KAAD,IAAWA,KAAK,CAACC,QADoB,EAErC1B,YAFqC,CAAvC;EAKA,MAAM,CAAC2B,OAAD,EAAUC,UAAV,IAAwBhC,QAAQ,CAAC,CACrC;IACEiC,KAAK,EAAElB,CAAC,CAAC,YAAD,CADV;IAEEmB,SAAS,EAAE,QAFb;IAGEC,GAAG,EAAE,QAHP;IAIEC,OAAO,EAAE,IAJX;IAKEC,MAAM,EAAGC,MAAD,iBACN;MAAA,WACGA,MADH,aACGA,MADH,uBACGA,MAAM,CAAEC,SADX,EACqB,GADrB,EACuB,CAAAD,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEE,QAAR,KAAoB,EAD3C;IAAA;MAAA;MAAA;MAAA;IAAA;EANJ,CADqC,EAYrC;IACEP,KAAK,EAAElB,CAAC,CAAC,OAAD,CADV;IAEEmB,SAAS,EAAE,OAFb;IAGEC,GAAG,EAAE,OAHP;IAIEC,OAAO,EAAE,IAJX;IAKEC,MAAM,EAAGI,KAAD,IAAWlC,aAAa,CAACkC,KAAD,EAAQb,eAAR,aAAQA,eAAR,uBAAQA,eAAe,CAAEc,MAAzB;EALlC,CAZqC,EAmBrC;IACET,KAAK,EAAElB,CAAC,CAAC,MAAD,CADV;IAEEmB,SAAS,EAAE,MAFb;IAGEC,GAAG,EAAE,MAHP;IAIEC,OAAO,EAAE;EAJX,CAnBqC,EAyBrC;IACEH,KAAK,EAAElB,CAAC,CAAC,YAAD,CADV;IAEEmB,SAAS,EAAE,YAFb;IAGEC,GAAG,EAAE,YAHP;IAIEC,OAAO,EAAE,IAJX;IAKEC,MAAM,EAAGM,UAAD,IAAgB/B,MAAM,CAAC+B,UAAD,CAAN,CAAmBC,MAAnB,CAA0B,kBAA1B;EAL1B,CAzBqC,CAAD,CAAtC;;EAkCA,SAASC,kBAAT,CAA4BC,UAA5B,EAAwCC,OAAxC,EAAiDC,MAAjD,EAAyD;IACvD,MAAM;MAAEC,QAAQ,EAAE/B,OAAZ;MAAqBgC,OAAO,EAAElC;IAA9B,IAAuC8B,UAA7C;IACA7B,OAAO,CAACD,IAAD,CAAP;IACAG,UAAU,CAACD,OAAD,CAAV;EACD;;EAED,SAASiC,kBAAT,GAA8B;IAC5B5B,UAAU,CAAC,IAAD,CAAV;IACA,MAAM6B,MAAM,GAAG;MACbH,QAAQ,EAAE,EADG;MAEbjC,IAAI,EAAEA,IAAI,IAAI;IAFD,CAAf;IAIAR,WAAW,CACR6C,aADH,CACiBvC,IAAI,CAACwC,IADtB,EAC4BF,MAD5B,EAEGG,IAFH,CAESC,GAAD,IAAS;MACb/B,OAAO,CAAC+B,GAAG,CAAC1C,IAAL,CAAP;MACAO,QAAQ,CAACmC,GAAG,CAACC,IAAJ,CAASrC,KAAV,CAAR;IACD,CALH,EAMGsC,OANH,CAMW,MAAMnC,UAAU,CAAC,KAAD,CAN3B;EAOD;;EAEDxB,SAAS,CAAC,MAAM;IACdoD,kBAAkB,GADJ,CAEd;EACD,CAHQ,EAGN,CAACnC,IAAD,CAHM,CAAT;EAKA,oBACE;IAAK,SAAS,EAAC,MAAf;IAAA,wBACE;MAAK,SAAS,EAAC,4BAAf;MAAA,uBACE,QAAC,KAAD;QAAO,IAAI,MAAX;QAAA,wBACE,QAAC,MAAD;UACE,IAAI,EAAC,SADP;UAEE,IAAI,eAAE,QAAC,kBAAD;YAAA;YAAA;YAAA;UAAA,QAFR;UAGE,OAAO,EAAE,MAAMW,cAAc,CAAC,IAAD,CAH/B;UAAA,UAKI,GAAEZ,CAAC,CAAC,QAAD,CAAW,KAAIR,aAAa,CAC/BO,IAD+B,aAC/BA,IAD+B,uCAC/BA,IAAI,CAAE6C,MADyB,iDAC/B,aAAclB,KADiB,EAE/Bb,eAF+B,aAE/BA,eAF+B,uBAE/BA,eAAe,CAAEc,MAFc,CAG/B;QARJ;UAAA;UAAA;UAAA;QAAA,QADF,eAWE,QAAC,aAAD;UAAe,OAAO,EAAEX,OAAxB;UAAiC,UAAU,EAAEC;QAA7C;UAAA;UAAA;UAAA;QAAA,QAXF;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF,eAgBE,QAAC,KAAD;MACE,MAAM,EAAE;QAAE4B,CAAC,EAAE;MAAL,CADV;MAEE,OAAO,EAAE7B,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAE8B,MAAT,CAAiBC,IAAD,IAAUA,IAAI,CAAC1B,OAA/B,CAFX;MAGE,UAAU,EAAEZ,IAHd;MAIE,OAAO,EAAEF,OAJX;MAKE,UAAU,EAAE;QACV2B,QAAQ,EAAE/B,OADA;QAEVF,IAFU;QAGVI;MAHU,CALd;MAUE,MAAM,EAAG2C,MAAD,IAAYA,MAAM,CAACC,EAV7B;MAWE,QAAQ,EAAEnB;IAXZ;MAAA;MAAA;MAAA;IAAA,QAhBF,EA6BGnB,WAAW,iBACV,QAAC,eAAD;MACE,KAAK,EAAEA,WADT;MAEE,IAAI,EAAEZ,IAAI,CAACwC,IAFb;MAGE,YAAY,EAAE,MAAM3B,cAAc,CAAC,KAAD;IAHpC;MAAA;MAAA;MAAA;IAAA,QA9BJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAuCD;;GAhHuBd,a;UACRP,c,EAOcD,W;;;KARNQ,a"},"metadata":{},"sourceType":"module"}