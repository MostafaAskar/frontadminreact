{"ast":null,"code":"import React,{useState}from'react';import{Row,Col,Form,Space,Button,Input,InputNumber,DatePicker,Select}from'antd';import{useSelector,shallowEqual,useDispatch}from'react-redux';import{useTranslation}from'react-i18next';import MediaUpload from'components/upload';import moment from'moment/moment';import sellerUserServices from'services/seller/user';import{toast}from'react-toastify';import{removeFromMenu}from'redux/slices/menu';import{useNavigate,useLocation}from'react-router-dom';import{fetchSellerDeliverymans}from'redux/slices/deliveryman';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UserForm=()=>{var _error$firstname,_error$lastname,_error$phone,_error$email;const{t}=useTranslation();const[form]=Form.useForm();const dispatch=useDispatch();const navigate=useNavigate();const{state}=useLocation();const{myShop}=useSelector(state=>state.myShop,shallowEqual);const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const[loadingBtn,setLoadingBtn]=useState(false);const[image,setImage]=useState([]);const[error,setError]=useState(null);const onFinish=values=>{var _image$;const body={...values,birthday:moment(values.birthday).format('YYYY-MM-DD'),images:[image===null||image===void 0?void 0:(_image$=image[0])===null||_image$===void 0?void 0:_image$.name],shop_id:[myShop===null||myShop===void 0?void 0:myShop.id],role:'deliveryman'};const nextUrl='seller/deliverymen';setLoadingBtn(true);sellerUserServices.create(body).then(()=>{toast.success(t('successfully.created'));dispatch(removeFromMenu({...activeMenu,nextUrl}));dispatch(fetchSellerDeliverymans(state===null||state===void 0?void 0:state.paramsData));navigate(`/${nextUrl}`);}).catch(err=>setError(err.response.data.params)).finally(()=>setLoadingBtn(false));};return/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:onFinish,children:[/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Form.Item,{name:\"avatar\",label:t('images'),rules:[{required:!(image!==null&&image!==void 0&&image.length),message:t('required')}],children:/*#__PURE__*/_jsx(MediaUpload,{type:'users',imageList:image,setImageList:setImage,form:form,multiple:false,name:\"logo_img\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('firstname'),name:\"firstname\",help:error===null||error===void 0?void 0:(_error$firstname=error.firstname)===null||_error$firstname===void 0?void 0:_error$firstname[0],validateStatus:error!==null&&error!==void 0&&error.firstname?'error':'success',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{className:\"w-100\",maxLength:20})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('lastname'),name:\"lastname\",help:error===null||error===void 0?void 0:(_error$lastname=error.lastname)===null||_error$lastname===void 0?void 0:_error$lastname[0],validateStatus:error!==null&&error!==void 0&&error.lastname?'error':'success',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{className:\"w-100\",maxLength:20})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('phone'),name:\"phone\",help:error===null||error===void 0?void 0:(_error$phone=error.phone)===null||_error$phone===void 0?void 0:_error$phone[0],validateStatus:error!==null&&error!==void 0&&error.phone?'error':'success',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(InputNumber,{min:0,className:\"w-100\"})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('birthday'),name:\"birthday\",rules:[{required:true,message:t('required')}],valuePropName:'birthday',children:/*#__PURE__*/_jsx(DatePicker,{className:\"w-100\",disabledDate:current=>moment().add(-18,'years')<=current,defaultPickerValue:moment().add(-18,'years')})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('gender'),name:\"gender\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsxs(Select,{picker:\"dayTime\",className:\"w-100\",children:[/*#__PURE__*/_jsx(Select.Option,{value:\"male\",children:t('male')},'male'),/*#__PURE__*/_jsx(Select.Option,{value:\"female\",children:t('female')},'female')]})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('email'),name:\"email\",help:error===null||error===void 0?void 0:(_error$email=error.email)===null||_error$email===void 0?void 0:_error$email[0],validateStatus:error!==null&&error!==void 0&&error.email?'error':'success',rules:[{required:true,message:t('required')},{type:'email',message:t('invalid.email')}],children:/*#__PURE__*/_jsx(Input,{type:\"email\",className:\"w-100\"})})})]}),/*#__PURE__*/_jsx(Space,{wrap:true,children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loadingBtn,children:t('submit')})})]});};export default UserForm;","map":null,"metadata":{},"sourceType":"module"}