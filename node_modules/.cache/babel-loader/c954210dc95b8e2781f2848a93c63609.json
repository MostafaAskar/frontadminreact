{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Space,Table,Image,Card}from'antd';import{DeleteOutlined,EditOutlined,PlusCircleOutlined}from'@ant-design/icons';import{toast}from'react-toastify';import{useTranslation}from'react-i18next';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{fetchSellerPropertyValue}from'redux/slices/propertyValue';import propertyService from'services/seller/property';import PropertyValueModal from'./property-value-modal';import PropertyDeleteModal from'./property-delete-modal';import DeleteButton from'components/delete-button';import{IMG_URL}from'configs/app-global';import{disableRefetch}from'redux/slices/menu';import FilterColumns from'components/filter-column';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SellerPropertyValue(){const{t}=useTranslation();const dispatch=useDispatch();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const{propertyValues,loading}=useSelector(state=>state.propertyValue,shallowEqual);const[id,setId]=useState(null);const[modal,setModal]=useState(null);const[loadingBtn,setLoadingBtn]=useState(false);const[columns,setColumns]=useState([{title:t('id'),dataIndex:'id',key:'id',is_show:true},{title:t('title'),dataIndex:'extra_group_id',key:'extra_group_id',is_show:true,render:(_,row)=>{var _row$group,_row$group$translatio;return(_row$group=row.group)===null||_row$group===void 0?void 0:(_row$group$translatio=_row$group.translation)===null||_row$group$translatio===void 0?void 0:_row$group$translatio.title;}},{title:t('value'),dataIndex:'value',key:'value',is_show:true,render:(_,row)=>/*#__PURE__*/_jsxs(Space,{className:\"extras\",children:[row.group.type==='color'?/*#__PURE__*/_jsx(\"div\",{className:\"extra-color-wrapper-contain\",style:{backgroundColor:row.value}}):null,row.group.type==='image'?/*#__PURE__*/_jsx(Image,{width:100,src:IMG_URL+row.value,className:\"borderRadius\"}):null,row.group.type==='image'?null:/*#__PURE__*/_jsx(\"span\",{children:row.value})]})},{title:t('options'),is_show:true,render:record=>{var _record$group,_record$group2;return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(EditOutlined,{}),onClick:()=>setModal(record),disabled:!(record!==null&&record!==void 0&&(_record$group=record.group)!==null&&_record$group!==void 0&&_record$group.shop_id)}),/*#__PURE__*/_jsx(DeleteButton,{type:\"primary\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),onClick:()=>setId([record.id]),disabled:!(record!==null&&record!==void 0&&(_record$group2=record.group)!==null&&_record$group2!==void 0&&_record$group2.shop_id)})]});}}]);const handleCancel=()=>setModal(null);const deleteProperty=()=>{setLoadingBtn(true);const params={...Object.assign({},...id.map((item,index)=>({[`ids[${index}]`]:item})))};propertyService.deleteValue(params).then(()=>{toast.success(t('successfully.deleted'));setId(null);dispatch(fetchSellerPropertyValue());}).finally(()=>setLoadingBtn(false));};useEffect(()=>{if(activeMenu.refetch){dispatch(fetchSellerPropertyValue());dispatch(disableRefetch(activeMenu));}},[activeMenu.refetch]);return/*#__PURE__*/_jsxs(Card,{title:t('property.value'),extra:/*#__PURE__*/_jsxs(Space,{wrap:true,children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(PlusCircleOutlined,{}),onClick:()=>setModal({}),children:t('add.property')}),/*#__PURE__*/_jsx(FilterColumns,{columns:columns,setColumns:setColumns})]}),children:[/*#__PURE__*/_jsx(Table,{scroll:{x:true},loading:loading,columns:columns===null||columns===void 0?void 0:columns.filter(item=>item.is_show),dataSource:propertyValues,rowKey:record=>record.id,pagination:false}),modal&&/*#__PURE__*/_jsx(PropertyValueModal,{modal:modal,handleCancel:handleCancel}),id&&/*#__PURE__*/_jsx(PropertyDeleteModal,{id:id,click:deleteProperty,text:t('delete.property'),loading:loadingBtn,handleClose:()=>setId(null)})]});}","map":null,"metadata":{},"sourceType":"module"}