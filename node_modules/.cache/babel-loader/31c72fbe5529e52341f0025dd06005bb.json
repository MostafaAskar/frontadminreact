{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Col,Form,Modal,Row,Select}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{useTranslation}from'react-i18next';import shopAdsService from'services/shop-ads';import{disableRefetch}from'../../redux/slices/menu';import{fetchShopAds}from'redux/slices/shop-ads';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";const allStatuses=['new','approved','canceled'];export default function ShopAdsStatusModal(_ref){let{data,handleCancel,paramsData}=_ref;const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const[form]=Form.useForm();const dispatch=useDispatch();const{t}=useTranslation();const[shopAdData,setShopAdData]=useState(null);const[loading,setLoading]=useState(false);const[fetchingShopAds,setFetchingShopAds]=useState(false);useEffect(()=>{setFetchingShopAds(true);shopAdsService.getById(data===null||data===void 0?void 0:data.id).then(res=>{let shopAd=res.data;const data={ads_package_id:shopAd===null||shopAd===void 0?void 0:shopAd.ads_package_id,banner_id:shopAd===null||shopAd===void 0?void 0:shopAd.banner_id,active:shopAd===null||shopAd===void 0?void 0:shopAd.active,position_page:shopAd===null||shopAd===void 0?void 0:shopAd.position_page};setShopAdData(data);}).catch(error=>toast.error(error.message)).finally(()=>setFetchingShopAds(false));},[data===null||data===void 0?void 0:data.id]);const onFinish=values=>{setLoading(true);const params={...values};console.log('shopAdData => ',shopAdData);!fetchingShopAds&&shopAdsService.update(data.id,{...shopAdData,status:params===null||params===void 0?void 0:params.status}).then(()=>{handleCancel();dispatch(fetchShopAds(paramsData));dispatch(disableRefetch(activeMenu));}).finally(()=>setLoading(false));};return/*#__PURE__*/_jsx(Modal,{visible:!!data,title:data.title,onCancel:handleCancel,footer:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>form.submit(),loading:loading,children:t('save')}),/*#__PURE__*/_jsx(Button,{type:\"default\",onClick:handleCancel,children:t('cancel')})],children:/*#__PURE__*/_jsx(Form,{form:form,layout:\"vertical\",onFinish:onFinish,initialValues:{status:data.status},children:/*#__PURE__*/_jsx(Row,{gutter:12,children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Form.Item,{label:t('status'),name:'status',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Select,{children:allStatuses.map(item=>/*#__PURE__*/_jsx(Select.Option,{children:t(item)},item))})})})})})});}","map":null,"metadata":{},"sourceType":"module"}