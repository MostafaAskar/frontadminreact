{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Card,Col,Form,Input,Row,Select,Spin,Switch}from'antd';import{useTranslation}from'react-i18next';import{removeFromMenu,setRefetch}from'../../../redux/slices/menu';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{fetchSellerPayments}from'../../../redux/slices/payment';import paymentService from'../../../services/seller/payment';import{toast}from'react-toastify';import{useNavigate}from'react-router-dom';import Paystack from'../../../assets/images/paystack.svg';import{FaPaypal}from'react-icons/fa';import{SiStripe,SiRazorpay}from'react-icons/si';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SellerPaymentAdd(){const{t}=useTranslation();const[form]=Form.useForm();const[loadingBtn,setLoadingBtn]=useState(false);const[loading,setLoading]=useState(false);const[paymentList,setPaymentList]=useState([]);const[activePayment,setActivePayment]=useState(null);const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const dispatch=useDispatch();const navigate=useNavigate();const onFinish=values=>{setLoadingBtn(true);paymentService.create(values).then(()=>{const nextUrl='seller/payments';toast.success(t('successfully.created'));dispatch(removeFromMenu({...activeMenu,nextUrl}));navigate(`/${nextUrl}`);dispatch(fetchSellerPayments());dispatch(setRefetch(activeMenu));}).catch(err=>console.error(err)).finally(()=>setLoadingBtn(false));};async function fetchPayment(){setLoading(true);return paymentService.allPayment().then(_ref=>{let{data}=_ref;const body=data.map(item=>({label:item.tag[0].toUpperCase()+item.tag.substring(1),value:item.id,key:item.id}));setPaymentList(body);}).finally(()=>setLoading(false));}useEffect(()=>{fetchPayment();},[]);const handleAddIcon=data=>{switch(data){case'Paypal':return/*#__PURE__*/_jsx(FaPaypal,{size:80});case'Stripe':return/*#__PURE__*/_jsx(SiStripe,{size:80});case'Razorpay':return/*#__PURE__*/_jsx(SiRazorpay,{size:80});case'Paystack':return/*#__PURE__*/_jsx(\"img\",{src:Paystack,alt:\"img\",width:\"80\",height:\"80\"});}};return/*#__PURE__*/_jsx(Card,{title:t('add.payment'),className:\"h-100\",children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",name:\"user-address\",form:form,onFinish:onFinish,initialValues:{status:true},children:[/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:(activePayment===null||activePayment===void 0?void 0:activePayment.label)==='Cash'||(activePayment===null||activePayment===void 0?void 0:activePayment.label)==='Wallet'?12:24,children:/*#__PURE__*/_jsx(Form.Item,{label:t('payment'),name:\"payment_id\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Select,{notFoundContent:loading?/*#__PURE__*/_jsx(Spin,{size:\"small\"}):'no results',allowClear:true,options:paymentList,onSelect:e=>setActivePayment(paymentList.find(payment=>payment.value===e))})})}),(activePayment===null||activePayment===void 0?void 0:activePayment.label)==='Cash'||(activePayment===null||activePayment===void 0?void 0:activePayment.label)==='Wallet'?'':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('client.id'),name:'client_id',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('secret.id'),name:'secret_id',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),(activePayment===null||activePayment===void 0?void 0:activePayment.label)==='Paystack'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('payment.id'),name:'payment_key',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('merchant.email'),name:'merchant_email',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})})]}):'']}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:t('status'),name:\"status\",valuePropName:\"checked\",children:/*#__PURE__*/_jsx(Switch,{})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow-1 d-flex flex-column justify-content-end\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pb-5\",children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loadingBtn,disabled:loadingBtn,children:t('submit')})})})]})});}","map":null,"metadata":{},"sourceType":"module"}