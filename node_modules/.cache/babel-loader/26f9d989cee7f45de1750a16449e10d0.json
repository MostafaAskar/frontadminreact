{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/user/shop-users.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { EyeOutlined } from '@ant-design/icons';\nimport { Button, Card, Space, Table, Tabs } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { fetchSellerUsers } from '../../../redux/slices/user';\nimport formatSortType from '../../../helpers/formatSortType';\nimport { disableRefetch, setMenuData } from '../../../redux/slices/menu';\nimport useDidUpdate from '../../../helpers/useDidUpdate';\nimport UserShowModal from './userShowModal';\nimport { useTranslation } from 'react-i18next';\nimport FilterColumns from '../../../components/filter-column';\nimport hideEmail from 'components/hideEmail';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReactAppIsDemo = process.env.REACT_APP_IS_DEMO;\nconst {\n  TabPane\n} = Tabs;\nconst roles = ['moderator', 'cook', 'waiter', 'deliveryman', 'user'];\nexport default function ShopUsers() {\n  _s();\n\n  var _activeMenu$data;\n\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    users,\n    loading,\n    meta,\n    params\n  } = useSelector(state => state.user, shallowEqual);\n  const [uuid, setUuid] = useState(null);\n  const [columns, setColumns] = useState([{\n    title: t('id'),\n    dataIndex: 'id',\n    sorter: true,\n    is_show: true\n  }, {\n    title: t('firstname'),\n    dataIndex: 'firstname',\n    is_show: true\n  }, {\n    title: t('lastname'),\n    dataIndex: 'lastname',\n    is_show: true\n  }, {\n    title: t('email'),\n    dataIndex: 'email',\n    is_show: true,\n    render: email => email ? ReactAppIsDemo ? hideEmail(email) : email : t('no.email')\n  }, {\n    title: t('role'),\n    dataIndex: 'role',\n    is_show: true\n  }, {\n    title: t('options'),\n    dataIndex: 'options',\n    is_show: true,\n    render: (data, row) => {\n      return /*#__PURE__*/_jsxDEV(Space, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(EyeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 27\n          }, this),\n          onClick: () => setUuid(row.uuid)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this);\n    }\n  }]);\n\n  function onChangePagination(pagination, filters, sorter) {\n    const {\n      pageSize: perPage,\n      current: page\n    } = pagination;\n    const {\n      field: column,\n      order\n    } = sorter;\n    const sort = formatSortType(order);\n    dispatch(setMenuData({\n      activeMenu,\n      data: { ...activeMenu.data,\n        perPage,\n        page,\n        column,\n        sort\n      }\n    }));\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      const data = activeMenu.data;\n      const params = {\n        sort: data === null || data === void 0 ? void 0 : data.sort,\n        column: data === null || data === void 0 ? void 0 : data.column,\n        role: (data === null || data === void 0 ? void 0 : data.role) || 'moderator',\n        perPage: data === null || data === void 0 ? void 0 : data.perPage,\n        page: data === null || data === void 0 ? void 0 : data.page\n      };\n      dispatch(fetchSellerUsers(params));\n      dispatch(disableRefetch(activeMenu));\n    }\n  }, [activeMenu.refetch]);\n  useDidUpdate(() => {\n    const data = activeMenu.data;\n    const paramsData = {\n      sort: data === null || data === void 0 ? void 0 : data.sort,\n      column: data === null || data === void 0 ? void 0 : data.column,\n      role: data === null || data === void 0 ? void 0 : data.role,\n      perPage: data === null || data === void 0 ? void 0 : data.perPage,\n      page: data === null || data === void 0 ? void 0 : data.page\n    };\n    dispatch(fetchSellerUsers(paramsData));\n  }, [activeMenu.data]);\n\n  const onChange = key => {\n    dispatch(setMenuData({\n      activeMenu,\n      data: { ...activeMenu.data,\n        role: key\n      }\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('shop.users'),\n    extra: /*#__PURE__*/_jsxDEV(FilterColumns, {\n      columns: columns,\n      setColumns: setColumns\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 14\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(Tabs, {\n      activeKey: ((_activeMenu$data = activeMenu.data) === null || _activeMenu$data === void 0 ? void 0 : _activeMenu$data.role) || 'moderator',\n      onChange: onChange,\n      type: \"card\",\n      children: roles.map(item => /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: t(item)\n      }, item, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      scroll: {\n        x: true\n      },\n      columns: columns === null || columns === void 0 ? void 0 : columns.filter(item => item.is_show),\n      dataSource: users,\n      loading: loading,\n      pagination: {\n        pageSize: params.perPage,\n        page: params.page,\n        total: meta.total,\n        defaultCurrent: params.page\n      },\n      rowKey: record => record.id,\n      onChange: onChangePagination\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), uuid && /*#__PURE__*/_jsxDEV(UserShowModal, {\n      uuid: uuid,\n      handleCancel: () => setUuid(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 16\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ShopUsers, \"u7Crzv8f+GSduTykpbcEhrzL2BE=\", false, function () {\n  return [useTranslation, useDispatch, useSelector, useSelector, useDidUpdate];\n});\n\n_c = ShopUsers;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShopUsers\");","map":{"version":3,"names":["React","useEffect","useState","EyeOutlined","Button","Card","Space","Table","Tabs","shallowEqual","useDispatch","useSelector","fetchSellerUsers","formatSortType","disableRefetch","setMenuData","useDidUpdate","UserShowModal","useTranslation","FilterColumns","hideEmail","ReactAppIsDemo","process","env","REACT_APP_IS_DEMO","TabPane","roles","ShopUsers","t","dispatch","activeMenu","state","menu","users","loading","meta","params","user","uuid","setUuid","columns","setColumns","title","dataIndex","sorter","is_show","render","email","data","row","onChangePagination","pagination","filters","pageSize","perPage","current","page","field","column","order","sort","refetch","role","paramsData","onChange","key","map","item","x","filter","total","defaultCurrent","record","id"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/user/shop-users.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { EyeOutlined } from '@ant-design/icons';\nimport { Button, Card, Space, Table, Tabs } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { fetchSellerUsers } from '../../../redux/slices/user';\nimport formatSortType from '../../../helpers/formatSortType';\nimport { disableRefetch, setMenuData } from '../../../redux/slices/menu';\nimport useDidUpdate from '../../../helpers/useDidUpdate';\nimport UserShowModal from './userShowModal';\nimport { useTranslation } from 'react-i18next';\nimport FilterColumns from '../../../components/filter-column';\nimport hideEmail from 'components/hideEmail';\nconst ReactAppIsDemo = process.env.REACT_APP_IS_DEMO;\nconst { TabPane } = Tabs;\n\nconst roles = ['moderator', 'cook', 'waiter', 'deliveryman', 'user'];\n\nexport default function ShopUsers() {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { users, loading, meta, params } = useSelector(\n    (state) => state.user,\n    shallowEqual,\n  );\n\n  const [uuid, setUuid] = useState(null);\n\n  const [columns, setColumns] = useState([\n    {\n      title: t('id'),\n      dataIndex: 'id',\n      sorter: true,\n      is_show: true,\n    },\n    {\n      title: t('firstname'),\n      dataIndex: 'firstname',\n      is_show: true,\n    },\n    {\n      title: t('lastname'),\n      dataIndex: 'lastname',\n      is_show: true,\n    },\n    {\n      title: t('email'),\n      dataIndex: 'email',\n      is_show: true,\n      render: (email) =>\n        email ? (ReactAppIsDemo ? hideEmail(email) : email) : t('no.email'),\n    },\n    {\n      title: t('role'),\n      dataIndex: 'role',\n      is_show: true,\n    },\n    {\n      title: t('options'),\n      dataIndex: 'options',\n      is_show: true,\n      render: (data, row) => {\n        return (\n          <Space>\n            <Button icon={<EyeOutlined />} onClick={() => setUuid(row.uuid)} />\n          </Space>\n        );\n      },\n    },\n  ]);\n\n  function onChangePagination(pagination, filters, sorter) {\n    const { pageSize: perPage, current: page } = pagination;\n    const { field: column, order } = sorter;\n    const sort = formatSortType(order);\n    dispatch(\n      setMenuData({\n        activeMenu,\n        data: { ...activeMenu.data, perPage, page, column, sort },\n      }),\n    );\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      const data = activeMenu.data;\n      const params = {\n        sort: data?.sort,\n        column: data?.column,\n        role: data?.role || 'moderator',\n        perPage: data?.perPage,\n        page: data?.page,\n      };\n      dispatch(fetchSellerUsers(params));\n      dispatch(disableRefetch(activeMenu));\n    }\n  }, [activeMenu.refetch]);\n\n  useDidUpdate(() => {\n    const data = activeMenu.data;\n    const paramsData = {\n      sort: data?.sort,\n      column: data?.column,\n      role: data?.role,\n      perPage: data?.perPage,\n      page: data?.page,\n    };\n    dispatch(fetchSellerUsers(paramsData));\n  }, [activeMenu.data]);\n\n  const onChange = (key) => {\n    dispatch(\n      setMenuData({ activeMenu, data: { ...activeMenu.data, role: key } }),\n    );\n  };\n\n  return (\n    <Card\n      title={t('shop.users')}\n      extra={<FilterColumns columns={columns} setColumns={setColumns} />}\n    >\n      <Tabs\n        activeKey={activeMenu.data?.role || 'moderator'}\n        onChange={onChange}\n        type='card'\n      >\n        {roles.map((item) => (\n          <TabPane tab={t(item)} key={item} />\n        ))}\n      </Tabs>\n      <Table\n        scroll={{ x: true }}\n        columns={columns?.filter((item) => item.is_show)}\n        dataSource={users}\n        loading={loading}\n        pagination={{\n          pageSize: params.perPage,\n          page: params.page,\n          total: meta.total,\n          defaultCurrent: params.page,\n        }}\n        rowKey={(record) => record.id}\n        onChange={onChangePagination}\n      />\n\n      {uuid && <UserShowModal uuid={uuid} handleCancel={() => setUuid(null)} />}\n    </Card>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}