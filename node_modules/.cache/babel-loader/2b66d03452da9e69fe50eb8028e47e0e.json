{"ast":null,"code":"import React from'react';import{Card,Col,Image,Row,Select,Space,Spin}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import numberToPrice from'../../helpers/numberToPrice';import{fetchTopCustomers,filterTopCustomers,fetchSellerTopCustomers}from'../../redux/slices/statistics/topCustomers';import{useTranslation}from'react-i18next';import getAvatar from'../../helpers/getAvatar';import RiveResult from'../../components/rive-result';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TopCustomers(){const{t}=useTranslation();const dispatch=useDispatch();const{topCustomers,loading,params}=useSelector(state=>state.topCustomers,shallowEqual);const{defaultCurrency}=useSelector(state=>state.currency,shallowEqual);const{role}=useSelector(state=>state.auth.user,shallowEqual);const handleChange=(item,value)=>{const payload={...params,[item]:value};dispatch(filterTopCustomers(payload));switch(role){case'admin':dispatch(fetchTopCustomers(payload));break;case'seller':dispatch(fetchSellerTopCustomers(payload));break;default:break;}};return/*#__PURE__*/_jsxs(Card,{title:t('top.customers'),extra:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(Select,{value:params.perPage,size:\"small\",style:{minWidth:110},onSelect:value=>handleChange('perPage',value),children:[/*#__PURE__*/_jsx(Select.Option,{value:5,children:`5 / ${t('page')}`}),/*#__PURE__*/_jsx(Select.Option,{value:10,children:`10 / ${t('page')}`}),/*#__PURE__*/_jsx(Select.Option,{value:50,children:`50 / ${t('page')}`}),/*#__PURE__*/_jsx(Select.Option,{value:100,children:`100 / ${t('page')}`})]}),/*#__PURE__*/_jsxs(Select,{value:params.time,size:\"small\",style:{minWidth:110},onSelect:value=>handleChange('time',value),defaultValue:\"subMonth\",children:[/*#__PURE__*/_jsx(Select.Option,{value:\"subWeek\",children:t('this.week')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subMonth\",children:t('this.month')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subYear\",children:t('this.year')})]})]}),className:\"h-100\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})}),/*#__PURE__*/_jsx(\"div\",{style:{overflowY:'auto',maxHeight:370},children:topCustomers.length?topCustomers.map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 py-3 flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex avatar\",children:[/*#__PURE__*/_jsx(Image,{src:getAvatar(item.img),width:40,height:40,preview:false,className:\"rounded\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2 avatar-text\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"title\",children:item.firstname+' '+item.lastname}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted\",children:item.phone})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mr-3 text-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",children:[item.count,\" \",t('orders')]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-0 h5 font-weight-bold\",children:numberToPrice(item.total_price,defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.symbol,defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.position)})]})})]},idx)):/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(RiveResult,{id:\"nosell\"})})})})]});}","map":null,"metadata":{},"sourceType":"module"}