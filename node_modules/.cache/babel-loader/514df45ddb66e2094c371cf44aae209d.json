{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/order/user-info.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Button, Card, Col, Form, Input, Row, Select } from 'antd';\nimport { isArray } from 'lodash';\nimport userService from '../../../services/user';\nimport { DebounceSelect } from '../../../components/search';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { setOrderCurrency, setOrderData } from '../../../redux/slices/order';\nimport { useTranslation } from 'react-i18next';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport { addMenu } from '../../../redux/slices/menu';\nimport { useNavigate } from 'react-router-dom';\nimport { AsyncSelect } from '../../../components/async-select';\nimport paymentService from '../../../services/payment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserInfo = _ref => {\n  _s();\n\n  let {\n    form\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    currencies\n  } = useSelector(state => state.currency, shallowEqual);\n  const [users, setUsers] = useState([]);\n\n  async function getUsers(search) {\n    const params = {\n      search,\n      perPage: 10\n    };\n    return userService.search(params).then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      setUsers(data);\n      return formatUser(data);\n    });\n  }\n\n  async function fetchPaymentList() {\n    return paymentService.getAll({\n      perPage: 100\n    }).then(_ref3 => {\n      let {\n        data\n      } = _ref3;\n      return data.filter(el => el.tag === 'cash' || el.tag === 'wallet').map(item => ({\n        label: item.tag || 'no name',\n        value: item.id\n      }));\n    });\n  }\n\n  function formatUser(data) {\n    if (!data) return;\n\n    if (isArray(data)) {\n      return data.map(item => ({\n        label: `${item.firstname} ${item.lastname || ''}`,\n        value: item.id\n      }));\n    } else {\n      return {\n        label: `${data.firstname} ${data.lastname || ''}`,\n        value: data.id\n      };\n    }\n  }\n\n  function selectUser(userObj) {\n    const user = users.find(item => item.id === userObj.value);\n    dispatch(setOrderData({\n      user: userObj,\n      userUuid: user.uuid\n    }));\n    form.setFieldsValue({\n      address: null\n    });\n  }\n\n  function selectCurrency(item) {\n    const currency = currencies.find(el => el.id === item);\n    dispatch(setOrderCurrency(currency));\n  }\n\n  const goToAddClient = () => {\n    dispatch(addMenu({\n      url: `user/add`,\n      id: 'user_add',\n      name: 'User add'\n    }));\n    navigate(`/user/add`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('customer.details'),\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      gutter: 12,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 16,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: t('client'),\n          name: \"user\",\n          rules: [{\n            required: true,\n            message: ''\n          }],\n          children: /*#__PURE__*/_jsxDEV(DebounceSelect, {\n            placeholder: t('select.client'),\n            fetchOptions: getUsers,\n            onSelect: selectUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 8,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"add\",\n          className: \"label-hidden\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            icon: /*#__PURE__*/_jsxDEV(PlusCircleOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 27\n            }, this),\n            onClick: goToAddClient,\n            children: t('add')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: t('currency'),\n          name: \"currency_id\",\n          rules: [{\n            required: true,\n            message: 'missing_currency'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: t('select.currency'),\n            onSelect: selectCurrency,\n            children: currencies.map((item, index) => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: item.id,\n              children: [item.title, \" (\", item === null || item === void 0 ? void 0 : item.symbol, \")\"]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: t('payment.type'),\n          name: \"payment_type\",\n          rules: [{\n            required: true,\n            message: t('missing.payment.type')\n          }],\n          children: /*#__PURE__*/_jsxDEV(AsyncSelect, {\n            fetchOptions: fetchPaymentList,\n            className: \"w-100\",\n            placeholder: t('select.payment.type'),\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: t('note'),\n          name: \"note\",\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserInfo, \"QEDsiPiiMZ4NV13rBaVA0BjXBS4=\", false, function () {\n  return [useTranslation, useDispatch, useNavigate, useSelector];\n});\n\n_c = UserInfo;\nexport default UserInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserInfo\");","map":{"version":3,"names":["React","useState","Button","Card","Col","Form","Input","Row","Select","isArray","userService","DebounceSelect","shallowEqual","useDispatch","useSelector","setOrderCurrency","setOrderData","useTranslation","PlusCircleOutlined","addMenu","useNavigate","AsyncSelect","paymentService","UserInfo","form","t","dispatch","navigate","currencies","state","currency","users","setUsers","getUsers","search","params","perPage","then","data","formatUser","fetchPaymentList","getAll","filter","el","tag","map","item","label","value","id","firstname","lastname","selectUser","userObj","user","find","userUuid","uuid","setFieldsValue","address","selectCurrency","goToAddClient","url","name","required","message","index","title","symbol"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/order/user-info.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Card, Col, Form, Input, Row, Select } from 'antd';\nimport { isArray } from 'lodash';\nimport userService from '../../../services/user';\nimport { DebounceSelect } from '../../../components/search';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { setOrderCurrency, setOrderData } from '../../../redux/slices/order';\nimport { useTranslation } from 'react-i18next';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport { addMenu } from '../../../redux/slices/menu';\nimport { useNavigate } from 'react-router-dom';\nimport { AsyncSelect } from '../../../components/async-select';\nimport paymentService from '../../../services/payment';\n\nconst UserInfo = ({ form }) => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { currencies } = useSelector((state) => state.currency, shallowEqual);\n\n  const [users, setUsers] = useState([]);\n\n  async function getUsers(search) {\n    const params = {\n      search,\n      perPage: 10,\n    };\n    return userService.search(params).then(({ data }) => {\n      setUsers(data);\n      return formatUser(data);\n    });\n  }\n\n  async function fetchPaymentList() {\n    return paymentService.getAll({ perPage: 100 }).then(({ data }) =>\n      data\n        .filter((el) => el.tag === 'cash' || el.tag === 'wallet')\n        .map((item) => ({\n          label: item.tag || 'no name',\n          value: item.id,\n        })),\n    );\n  }\n\n  function formatUser(data) {\n    if (!data) return;\n    if (isArray(data)) {\n      return data.map((item) => ({\n        label: `${item.firstname} ${item.lastname || ''}`,\n        value: item.id,\n      }));\n    } else {\n      return {\n        label: `${data.firstname} ${data.lastname || ''}`,\n        value: data.id,\n      };\n    }\n  }\n\n  function selectUser(userObj) {\n    const user = users.find((item) => item.id === userObj.value);\n    dispatch(setOrderData({ user: userObj, userUuid: user.uuid }));\n    form.setFieldsValue({ address: null });\n  }\n\n  function selectCurrency(item) {\n    const currency = currencies.find((el) => el.id === item);\n    dispatch(setOrderCurrency(currency));\n  }\n\n  const goToAddClient = () => {\n    dispatch(\n      addMenu({\n        url: `user/add`,\n        id: 'user_add',\n        name: 'User add',\n      }),\n    );\n    navigate(`/user/add`);\n  };\n\n  return (\n    <Card title={t('customer.details')}>\n      <Row gutter={12}>\n        <Col span={16}>\n          <Form.Item\n            label={t('client')}\n            name='user'\n            rules={[{ required: true, message: '' }]}\n          >\n            <DebounceSelect\n              placeholder={t('select.client')}\n              fetchOptions={getUsers}\n              onSelect={selectUser}\n            />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item label='add' className='label-hidden'>\n            <Button icon={<PlusCircleOutlined />} onClick={goToAddClient}>\n              {t('add')}\n            </Button>\n          </Form.Item>\n        </Col>\n        <Col span={12}>\n          <Form.Item\n            label={t('currency')}\n            name='currency_id'\n            rules={[{ required: true, message: 'missing_currency' }]}\n          >\n            <Select\n              placeholder={t('select.currency')}\n              onSelect={selectCurrency}\n            >\n              {currencies.map((item, index) => (\n                <Select.Option key={index} value={item.id}>\n                  {item.title} ({item?.symbol})\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n        </Col>\n        <Col span={12}>\n          <Form.Item\n            label={t('payment.type')}\n            name='payment_type'\n            rules={[{ required: true, message: t('missing.payment.type') }]}\n          >\n            <AsyncSelect\n              fetchOptions={fetchPaymentList}\n              className='w-100'\n              placeholder={t('select.payment.type')}\n              disabled={true}\n            />\n          </Form.Item>\n        </Col>\n        <Col span={24}>\n          <Form.Item label={t('note')} name='note'>\n            <Input />\n          </Form.Item>\n        </Col>\n      </Row>\n    </Card>\n  );\n};\n\nexport default UserInfo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}