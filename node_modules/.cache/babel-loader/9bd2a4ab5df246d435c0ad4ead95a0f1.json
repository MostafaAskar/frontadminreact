{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/shop/location-select.js\",\n    _s = $RefreshSig$();\n\nimport { Button, Form, Space } from 'antd';\nimport { InfiniteSelect } from 'components/infinite-select';\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport addressService from 'services/rest/address';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LocationSelect = _ref => {\n  _s();\n\n  let {\n    onClose,\n    onSubmit,\n    isButtonLoading\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [links, setLinks] = useState(null);\n  const [selectedCountry, setSelectedCountry] = useState(null);\n\n  const fetchCountries = _ref2 => {\n    let {\n      search,\n      page\n    } = _ref2;\n    return addressService.getCountries({\n      search,\n      page,\n      has_price: true\n    }).then(res => {\n      setLinks(res.links);\n      return res.data.map(country => {\n        var _country$translation;\n\n        return {\n          label: country === null || country === void 0 ? void 0 : (_country$translation = country.translation) === null || _country$translation === void 0 ? void 0 : _country$translation.title,\n          value: `${country.id},${country.region_id}`\n        };\n      });\n    });\n  };\n\n  const fetchCities = _ref3 => {\n    let {\n      search,\n      page\n    } = _ref3;\n    return addressService.getCities({\n      search,\n      page,\n      country_id: selectedCountry.value,\n      has_price: true\n    }).then(res => {\n      setLinks(res.links);\n      const cities = [];\n\n      if (res.meta.current_page === 1) {\n        cities.push({\n          label: t('whole.country'),\n          value: 'all'\n        });\n      }\n\n      res.data.forEach(country => {\n        var _country$translation2;\n\n        cities.push({\n          label: country === null || country === void 0 ? void 0 : (_country$translation2 = country.translation) === null || _country$translation2 === void 0 ? void 0 : _country$translation2.title,\n          value: country.id\n        });\n      });\n      return cities;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    layout: \"vertical\",\n    onFinish: onSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"country\",\n      label: t('country'),\n      rules: [{\n        required: true,\n        message: t('required')\n      }],\n      children: /*#__PURE__*/_jsxDEV(InfiniteSelect, {\n        hasMore: links === null || links === void 0 ? void 0 : links.next,\n        fetchOptions: fetchCountries,\n        onChange: value => setSelectedCountry(value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), selectedCountry && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Form.Item, {\n        rules: [{\n          required: true,\n          message: t('required')\n        }],\n        name: \"city\",\n        label: t('city'),\n        children: /*#__PURE__*/_jsxDEV(InfiniteSelect, {\n          hasMore: links === null || links === void 0 ? void 0 : links.next,\n          fetchOptions: fetchCities\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(Space, {\n      className: \"justify-content-end w-100\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: onClose,\n        htmlType: \"button\",\n        children: t('cancel')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        loading: isButtonLoading,\n        htmlType: \"submit\",\n        type: \"primary\",\n        children: t('add')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LocationSelect, \"xcXUVECWsEWTQl1a13ZuK6i7zxQ=\", false, function () {\n  return [useTranslation];\n});\n\n_c = LocationSelect;\nexport default LocationSelect;\n\nvar _c;\n\n$RefreshReg$(_c, \"LocationSelect\");","map":{"version":3,"names":["Button","Form","Space","InfiniteSelect","useState","useTranslation","addressService","LocationSelect","onClose","onSubmit","isButtonLoading","t","links","setLinks","selectedCountry","setSelectedCountry","fetchCountries","search","page","getCountries","has_price","then","res","data","map","country","label","translation","title","value","id","region_id","fetchCities","getCities","country_id","cities","meta","current_page","push","forEach","required","message","next"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/shop/location-select.js"],"sourcesContent":["import { Button, Form, Space } from 'antd';\nimport { InfiniteSelect } from 'components/infinite-select';\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport addressService from 'services/rest/address';\n\nconst LocationSelect = ({ onClose, onSubmit, isButtonLoading }) => {\n  const { t } = useTranslation();\n  const [links, setLinks] = useState(null);\n  const [selectedCountry, setSelectedCountry] = useState(null);\n  const fetchCountries = ({ search, page }) => {\n    return addressService\n      .getCountries({ search, page, has_price: true })\n      .then((res) => {\n        setLinks(res.links);\n        return res.data.map((country) => ({\n          label: country?.translation?.title,\n          value: `${country.id},${country.region_id}`,\n        }));\n      });\n  };\n\n  const fetchCities = ({ search, page }) => {\n    return addressService\n      .getCities({\n        search,\n        page,\n        country_id: selectedCountry.value,\n        has_price: true,\n      })\n      .then((res) => {\n        setLinks(res.links);\n        const cities = [];\n        if (res.meta.current_page === 1) {\n          cities.push({\n            label: t('whole.country'),\n            value: 'all',\n          });\n        }\n        res.data.forEach((country) => {\n          cities.push({\n            label: country?.translation?.title,\n            value: country.id,\n          });\n        });\n        return cities;\n      });\n  };\n\n  return (\n    <Form layout='vertical' onFinish={onSubmit}>\n      <Form.Item\n        name='country'\n        label={t('country')}\n        rules={[{ required: true, message: t('required') }]}\n      >\n        <InfiniteSelect\n          hasMore={links?.next}\n          fetchOptions={fetchCountries}\n          onChange={(value) => setSelectedCountry(value)}\n        />\n      </Form.Item>\n      {selectedCountry && (\n        <>\n          <Form.Item\n            rules={[{ required: true, message: t('required') }]}\n            name='city'\n            label={t('city')}\n          >\n            <InfiniteSelect hasMore={links?.next} fetchOptions={fetchCities} />\n          </Form.Item>\n        </>\n      )}\n      <Space className='justify-content-end w-100'>\n        <Button onClick={onClose} htmlType='button'>\n          {t('cancel')}\n        </Button>\n        <Button loading={isButtonLoading} htmlType='submit' type='primary'>\n          {t('add')}\n        </Button>\n      </Space>\n    </Form>\n  );\n};\n\nexport default LocationSelect;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}