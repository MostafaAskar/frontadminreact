{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Form,Modal,Select}from'antd';import{useTranslation}from'react-i18next';import i18n from'../configs/i18next';import informationService from'../services/rest/information';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{directionChange}from'../redux/slices/theme';import{setLangugages}from'../redux/slices/formLang';import languagesService from'../services/languages';import{jsx as _jsx}from\"react/jsx-runtime\";export default function LangModal(_ref){let{visible,handleCancel}=_ref;const{t}=useTranslation();const[form]=Form.useForm();const[loading,setLoading]=useState(false);const{languages}=useSelector(state=>state.formLang,shallowEqual);const dispatch=useDispatch();const onFinish=values=>{const{lang}=values;const locale=languages.find(item=>item.locale===lang);const direction=locale.backward?'rtl':'ltr';setLoading(true);informationService.translations(values).then(_ref2=>{let{data}=_ref2;i18n.addResourceBundle(lang,'translation',data);handleCancel();i18n.changeLanguage(lang);dispatch(directionChange(direction));}).finally(()=>setLoading(false));};const fetchLanguages=()=>{languagesService.getAllActive().then(_ref3=>{let{data}=_ref3;dispatch(setLangugages(data));});};useEffect(()=>{fetchLanguages();},[]);return/*#__PURE__*/_jsx(Modal,{title:t('change.language'),visible:visible,onCancel:handleCancel,footer:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>form.submit(),loading:loading,children:t('save')},'ok-button'),/*#__PURE__*/_jsx(Button,{onClick:handleCancel,children:t('cancel')},'cancel-button')],children:/*#__PURE__*/_jsx(Form,{layout:\"vertical\",name:\"lang-form\",form:form,onFinish:onFinish,initialValues:{lang:i18n.language},children:/*#__PURE__*/_jsx(Form.Item,{label:t('language'),name:\"lang\",children:/*#__PURE__*/_jsx(Select,{children:languages.map((item,idx)=>/*#__PURE__*/_jsx(Select.Option,{value:item.locale,children:item.title},item.locale+idx))})})})});}","map":null,"metadata":{},"sourceType":"module"}