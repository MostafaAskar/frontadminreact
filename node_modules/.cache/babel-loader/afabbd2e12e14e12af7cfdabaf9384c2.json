{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/global-settings/project-access-info.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { CheckOutlined, CloseOutlined } from '@ant-design/icons';\nimport { Button, Card, Descriptions } from 'antd';\nimport Loading from '../../components/loading';\nimport informationService from '../../services/rest/information';\nimport CustomModal from '../../components/modal';\nimport { Context } from '../../context/context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst accessInfo = [{\n  title: 'PHP Version',\n  version: '7.4.30'\n}, {\n  title: 'Laravel Version',\n  version: '8.1.0'\n}, {\n  title: 'MySql Version',\n  version: '5.7.23'\n}, {\n  title: 'NodeJs Version',\n  version: '14.15.0'\n}, {\n  title: 'NPM Version',\n  version: '6.14.8'\n}, {\n  title: 'Composer Version',\n  version: '1.0.0'\n}];\nexport default function ProjectAccessInfo(_ref) {\n  _s();\n\n  let {\n    next\n  } = _ref;\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [list, setList] = useState(accessInfo);\n  const {\n    setIsModalVisible\n  } = useContext(Context);\n  useEffect(() => {\n    setLoading(true);\n    informationService.systemInformation().then(res => {\n      setData(res.data);\n      checkAccess(res.data);\n    }).finally(() => setLoading(false));\n  }, []);\n\n  function checkAccess(data) {\n    const newList = list.map(item => {\n      var _data$item$title;\n\n      const system = (_data$item$title = data[item.title]) === null || _data$item$title === void 0 ? void 0 : _data$item$title.split('.').map(item => item.replace(/[^0-9]+/g, '')).filter(item => !!item);\n      const minimum = item.version.split('.').map(item => item.replace(/[^0-9]+/g, '')).filter(item => !!item);\n      const systemMajor = Number(system[0]);\n      const systemMinor = Number(system[1]);\n      const minimumMajor = Number(minimum[0]);\n      const minimumMinor = Number(minimum[1]);\n\n      if (systemMajor > minimumMajor) {\n        return { ...item,\n          success: true\n        };\n      } else if (systemMajor === minimumMajor && systemMinor >= minimumMinor) {\n        return { ...item,\n          success: true\n        };\n      } else {\n        return { ...item,\n          success: false\n        };\n      }\n    });\n    setList(newList);\n  }\n\n  const handleNext = () => {\n    const isValidVersion = list.every(item => item.success);\n\n    if (!isValidVersion) {\n      setIsModalVisible(true);\n      return;\n    }\n\n    next();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: \"Project access info\",\n    className: \"w-100\",\n    extra: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"System requirements\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 14\n    }, this),\n    children: [!loading ? /*#__PURE__*/_jsxDEV(Descriptions, {\n      bordered: true,\n      children: list.map((item, index) => /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n        label: item.title,\n        span: 3,\n        children: [data[item.title], /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2\",\n          children: item.success ? /*#__PURE__*/_jsxDEV(CheckOutlined, {\n            style: {\n              color: '#18a695',\n              fontSize: 18\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(CloseOutlined, {\n            style: {\n              color: '#e74c3c',\n              fontSize: 18\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: \"mt-4\",\n      type: \"primary\",\n      onClick: handleNext,\n      children: \"Next\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomModal, {\n      click: () => {\n        setIsModalVisible(false);\n        next();\n      },\n      text: \"Your system configuration is not recommended for this project. Are you sure to continue installation?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProjectAccessInfo, \"5hnAQak7IVqpbn+u24dlQEalbPk=\");\n\n_c = ProjectAccessInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProjectAccessInfo\");","map":{"version":3,"names":["React","useContext","useEffect","useState","CheckOutlined","CloseOutlined","Button","Card","Descriptions","Loading","informationService","CustomModal","Context","accessInfo","title","version","ProjectAccessInfo","next","data","setData","loading","setLoading","list","setList","setIsModalVisible","systemInformation","then","res","checkAccess","finally","newList","map","item","system","split","replace","filter","minimum","systemMajor","Number","systemMinor","minimumMajor","minimumMinor","success","handleNext","isValidVersion","every","index","color","fontSize"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/global-settings/project-access-info.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { CheckOutlined, CloseOutlined } from '@ant-design/icons';\nimport { Button, Card, Descriptions } from 'antd';\nimport Loading from '../../components/loading';\nimport informationService from '../../services/rest/information';\nimport CustomModal from '../../components/modal';\nimport { Context } from '../../context/context';\n\nconst accessInfo = [\n  {\n    title: 'PHP Version',\n    version: '7.4.30',\n  },\n  {\n    title: 'Laravel Version',\n    version: '8.1.0',\n  },\n  {\n    title: 'MySql Version',\n    version: '5.7.23',\n  },\n  {\n    title: 'NodeJs Version',\n    version: '14.15.0',\n  },\n  {\n    title: 'NPM Version',\n    version: '6.14.8',\n  },\n  {\n    title: 'Composer Version',\n    version: '1.0.0',\n  },\n];\n\nexport default function ProjectAccessInfo({ next }) {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [list, setList] = useState(accessInfo);\n  const { setIsModalVisible } = useContext(Context);\n\n  useEffect(() => {\n    setLoading(true);\n    informationService\n      .systemInformation()\n      .then((res) => {\n        setData(res.data);\n        checkAccess(res.data);\n      })\n      .finally(() => setLoading(false));\n  }, []);\n\n  function checkAccess(data) {\n    const newList = list.map((item) => {\n      const system = data[item.title]\n        ?.split('.')\n        .map((item) => item.replace(/[^0-9]+/g, ''))\n        .filter((item) => !!item);\n      const minimum = item.version\n        .split('.')\n        .map((item) => item.replace(/[^0-9]+/g, ''))\n        .filter((item) => !!item);\n\n      const systemMajor = Number(system[0]);\n      const systemMinor = Number(system[1]);\n      const minimumMajor = Number(minimum[0]);\n      const minimumMinor = Number(minimum[1]);\n      if (systemMajor > minimumMajor) {\n        return {\n          ...item,\n          success: true,\n        };\n      } else if (systemMajor === minimumMajor && systemMinor >= minimumMinor) {\n        return {\n          ...item,\n          success: true,\n        };\n      } else {\n        return {\n          ...item,\n          success: false,\n        };\n      }\n    });\n    setList(newList);\n  }\n\n  const handleNext = () => {\n    const isValidVersion = list.every((item) => item.success);\n    if (!isValidVersion) {\n      setIsModalVisible(true);\n      return;\n    }\n    next();\n  };\n\n  return (\n    <Card\n      title='Project access info'\n      className='w-100'\n      extra={<p>System requirements</p>}\n    >\n      {!loading ? (\n        <Descriptions bordered>\n          {list.map((item, index) => (\n            <Descriptions.Item label={item.title} key={index} span={3}>\n              {data[item.title]}\n              <span className='ml-2'>\n                {item.success ? (\n                  <CheckOutlined style={{ color: '#18a695', fontSize: 18 }} />\n                ) : (\n                  <CloseOutlined style={{ color: '#e74c3c', fontSize: 18 }} />\n                )}\n              </span>\n            </Descriptions.Item>\n          ))}\n        </Descriptions>\n      ) : (\n        <Loading />\n      )}\n      <Button className='mt-4' type='primary' onClick={handleNext}>\n        Next\n      </Button>\n\n      <CustomModal\n        click={() => {\n          setIsModalVisible(false);\n          next();\n        }}\n        text='Your system configuration is not recommended for this project. Are you sure to continue installation?'\n      />\n    </Card>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}