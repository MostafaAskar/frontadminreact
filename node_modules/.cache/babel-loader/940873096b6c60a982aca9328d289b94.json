{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/shops/shopDelivery.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Loading from '../../components/loading';\nimport moment from 'moment';\nimport workingDays from '../../services/workingDays';\nimport closeDates from '../../services/closedDays';\nimport { useParams } from 'react-router-dom';\nimport { weeks } from '../../components/shop/weeks';\nimport ShopDeliveryForm from 'components/forms/shop-delivery-form';\nimport { Form } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ShopDelivery = _ref => {\n  _s();\n\n  let {\n    next,\n    prev\n  } = _ref;\n  const [form] = Form.useForm();\n  const [days, setDays] = useState([]);\n  const [lines, setLines] = useState(new Array(7).fill(false));\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const {\n    uuid\n  } = useParams();\n\n  const onFinish = values => {\n    setLoadingBtn(true);\n    const closeDatesBody = {\n      dates: days ? days.map(item => moment(item).format('YYYY-MM-DD')) : undefined\n    };\n    const workingDaysBody = {\n      dates: values.working_days.map(item => ({\n        day: item.title,\n        from: moment(item.from ? item.from : '00').format('HH:mm'),\n        to: moment(item.to ? item.to : '00').format('HH:mm'),\n        disabled: item.disabled\n      }))\n    };\n    closeDates.update(uuid, closeDatesBody).then(() => {\n      next();\n    }).finally(() => setLoadingBtn(false));\n\n    if (values.working_days.length !== 0) {\n      workingDays.update(uuid, workingDaysBody).then(() => {\n        next();\n      }).finally(() => setLoadingBtn(false));\n    }\n  };\n\n  const getDays = () => {\n    setLoading(true);\n    closeDates.getById(uuid).then(res => {\n      setDays(res.data.closed_dates.filter(date => date.day > moment(new Date()).format('YYYY-MM-DD')).map(itm => new Date(itm.day)));\n    });\n    workingDays.getById(uuid).then(res => {\n      setLines(res.data.dates.length !== 0 ? res.data.dates.map(item => item.disabled) : []);\n      res.data.dates.length !== 0 && form.setFieldsValue({\n        working_days: res.data.dates.map(item => ({\n          title: item.day,\n          from: moment(item.from, 'HH:mm:ss'),\n          to: moment(item.to, 'HH:mm:ss'),\n          disabled: Boolean(item.disabled)\n        }))\n      });\n    }).finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      working_days: weeks\n    });\n    if (uuid) getDays();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !loading ? /*#__PURE__*/_jsxDEV(ShopDeliveryForm, {\n      onFinish: onFinish,\n      prev: prev,\n      form: form,\n      lines: lines,\n      loadingBtn: loadingBtn,\n      days: days,\n      setDays: setDays,\n      setLines: setLines,\n      weeks: weeks\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(ShopDelivery, \"SkthsyB0WXHt8Iab5zu+8e0Fi28=\", false, function () {\n  return [Form.useForm, useParams];\n});\n\n_c = ShopDelivery;\nexport default ShopDelivery;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShopDelivery\");","map":{"version":3,"names":["React","useState","useEffect","Loading","moment","workingDays","closeDates","useParams","weeks","ShopDeliveryForm","Form","ShopDelivery","next","prev","form","useForm","days","setDays","lines","setLines","Array","fill","loadingBtn","setLoadingBtn","loading","setLoading","uuid","onFinish","values","closeDatesBody","dates","map","item","format","undefined","workingDaysBody","working_days","day","title","from","to","disabled","update","then","finally","length","getDays","getById","res","data","closed_dates","filter","date","Date","itm","setFieldsValue","Boolean"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/shops/shopDelivery.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Loading from '../../components/loading';\nimport moment from 'moment';\nimport workingDays from '../../services/workingDays';\nimport closeDates from '../../services/closedDays';\nimport { useParams } from 'react-router-dom';\nimport { weeks } from '../../components/shop/weeks';\nimport ShopDeliveryForm from 'components/forms/shop-delivery-form';\nimport { Form } from 'antd';\n\nconst ShopDelivery = ({ next, prev }) => {\n  const [form] = Form.useForm();\n  const [days, setDays] = useState([]);\n  const [lines, setLines] = useState(new Array(7).fill(false));\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const { uuid } = useParams();\n\n  const onFinish = (values) => {\n    setLoadingBtn(true);\n    const closeDatesBody = {\n      dates: days\n        ? days.map((item) => moment(item).format('YYYY-MM-DD'))\n        : undefined,\n    };\n\n    const workingDaysBody = {\n      dates: values.working_days.map((item) => ({\n        day: item.title,\n        from: moment(item.from ? item.from : '00').format('HH:mm'),\n        to: moment(item.to ? item.to : '00').format('HH:mm'),\n        disabled: item.disabled,\n      })),\n    };\n\n    closeDates\n      .update(uuid, closeDatesBody)\n      .then(() => {\n        next();\n      })\n      .finally(() => setLoadingBtn(false));\n\n    if (values.working_days.length !== 0) {\n      workingDays\n        .update(uuid, workingDaysBody)\n        .then(() => {\n          next();\n        })\n        .finally(() => setLoadingBtn(false));\n    }\n  };\n\n  const getDays = () => {\n    setLoading(true);\n    closeDates.getById(uuid).then((res) => {\n      setDays(\n        res.data.closed_dates\n          .filter((date) => date.day > moment(new Date()).format('YYYY-MM-DD'))\n          .map((itm) => new Date(itm.day))\n      );\n    });\n\n    workingDays\n      .getById(uuid)\n      .then((res) => {\n        setLines(\n          res.data.dates.length !== 0\n            ? res.data.dates.map((item) => item.disabled)\n            : []\n        );\n\n        res.data.dates.length !== 0 &&\n          form.setFieldsValue({\n            working_days: res.data.dates.map((item) => ({\n              title: item.day,\n              from: moment(item.from, 'HH:mm:ss'),\n              to: moment(item.to, 'HH:mm:ss'),\n              disabled: Boolean(item.disabled),\n            })),\n          });\n      })\n      .finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      working_days: weeks,\n    });\n    if (uuid) getDays();\n  }, []);\n\n  return (\n    <>\n      {!loading ? (\n        <ShopDeliveryForm\n          onFinish={onFinish}\n          prev={prev}\n          form={form}\n          lines={lines}\n          loadingBtn={loadingBtn}\n          days={days}\n          setDays={setDays}\n          setLines={setLines}\n          weeks={weeks}\n        />\n      ) : (\n        <Loading />\n      )}\n    </>\n  );\n};\n\nexport default ShopDelivery;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}