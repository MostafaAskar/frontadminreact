{"ast":null,"code":"import React,{useEffect}from'react';import{Button,Card,Descriptions,Empty,Form,Pagination,Spin}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{fetchBookingZone,setCurrentZone}from'redux/slices/booking-zone';import moment from'moment';import{useTranslation}from'react-i18next';import{fetchSellerBookingList}from'redux/slices/booking-list';import{setMenuData}from'redux/slices/menu';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function OrderTabs(){var _activeMenu$data2;const[form]=Form.useForm();const{t}=useTranslation();const dispatch=useDispatch();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const{current_zone,zone,loading}=useSelector(state=>state.bookingZone,shallowEqual);const{booking,loading:bookingListLoading,meta}=useSelector(state=>state.bookingList,shallowEqual);useEffect(()=>{if(activeMenu.refetch){dispatch(fetchBookingZone());}},[activeMenu.refetch]);useEffect(()=>{if(!!current_zone){var _activeMenu$data;dispatch(fetchSellerBookingList({shop_section_id:current_zone===null||current_zone===void 0?void 0:current_zone.id,page:(activeMenu===null||activeMenu===void 0?void 0:(_activeMenu$data=activeMenu.data)===null||_activeMenu$data===void 0?void 0:_activeMenu$data.page)||1}));}},[current_zone,activeMenu===null||activeMenu===void 0?void 0:(_activeMenu$data2=activeMenu.data)===null||_activeMenu$data2===void 0?void 0:_activeMenu$data2.page]);const handleChange=item=>dispatch(setCurrentZone(item));function onChangePagination(page){dispatch(setMenuData({activeMenu,data:{...(activeMenu===null||activeMenu===void 0?void 0:activeMenu.data),page}}));}return/*#__PURE__*/_jsx(Card,{style:{height:'100vh'},children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",name:\"booking-form\",form:form,children:[/*#__PURE__*/_jsx(\"div\",{className:\"booking_tabs\",children:loading?/*#__PURE__*/_jsx(Spin,{}):zone.map(item=>{var _current_zone$transla,_item$translation,_item$translation2;return/*#__PURE__*/_jsx(Button,{type:(current_zone===null||current_zone===void 0?void 0:(_current_zone$transla=current_zone.translation)===null||_current_zone$transla===void 0?void 0:_current_zone$transla.title)===((_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title)?'primary':'text',onClick:()=>handleChange(item),children:(_item$translation2=item.translation)===null||_item$translation2===void 0?void 0:_item$translation2.title},item===null||item===void 0?void 0:item.id);})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',margin:'8px 0'},children:t('user.bookings')}),/*#__PURE__*/_jsx(\"div\",{style:{overflowY:'auto',height:'80vh'},children:/*#__PURE__*/_jsx(Spin,{spinning:bookingListLoading,children:booking&&booking.length>0?booking===null||booking===void 0?void 0:booking.map(booking=>{var _booking$table,_booking$user,_booking$user2,_booking$user3,_booking$user4;return/*#__PURE__*/_jsx(Card,{bordered:true,children:/*#__PURE__*/_jsxs(Descriptions,{column:1,children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:t('start.date'),children:moment(booking.start_date).format('YYYY-MM-DD HH:MM')}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('table'),children:(_booking$table=booking.table)===null||_booking$table===void 0?void 0:_booking$table.name}),/*#__PURE__*/_jsxs(Descriptions.Item,{label:t('user'),children:[booking===null||booking===void 0?void 0:(_booking$user=booking.user)===null||_booking$user===void 0?void 0:_booking$user.firstname,\" \",booking===null||booking===void 0?void 0:(_booking$user2=booking.user)===null||_booking$user2===void 0?void 0:_booking$user2.lastname,' tel: ',/*#__PURE__*/_jsxs(\"a\",{href:`tel:${booking===null||booking===void 0?void 0:(_booking$user3=booking.user)===null||_booking$user3===void 0?void 0:_booking$user3.phone}`,children:[' ',booking===null||booking===void 0?void 0:(_booking$user4=booking.user)===null||_booking$user4===void 0?void 0:_booking$user4.phone]})]}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('guests'),children:booking.guest})]})},booking.id);}):/*#__PURE__*/_jsx(Empty,{})})}),booking&&booking.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"pt-3\",children:/*#__PURE__*/_jsx(Pagination,{total:meta.total,current:meta.current_page,pageSize:10,onChange:onChangePagination})})]})});}","map":null,"metadata":{},"sourceType":"module"}