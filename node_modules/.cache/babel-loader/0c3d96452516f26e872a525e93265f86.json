{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/products/extra-select-modal.js\",\n    _s = $RefreshSig$();\n\nimport { Button, Input, List, Modal, Tag } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport extraService from 'services/extra';\nimport ExtraGroupModal from './Extras/extra-group-modal';\nimport { useTranslation } from 'react-i18next';\nimport { PlusOutlined } from '@ant-design/icons';\nimport useDebounce from 'helpers/useDebounce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ExtraSelectModal = _ref => {\n  _s();\n\n  let {\n    open,\n    onClose,\n    selectedExtras,\n    onSelect\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [extrasGroup, setExtrasGroup] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const debouncedSearch = useDebounce(search, 500);\n\n  const getExtraGroup = query => {\n    setLoading(true);\n    const params = {\n      valid: 1,\n      perPage: 100,\n      search: query\n    };\n    extraService.getAllGroups(params).then(res => {\n      const data = res.data.map(item => {\n        var _item$translation;\n\n        return {\n          id: item.id,\n          label: (_item$translation = item.translation) === null || _item$translation === void 0 ? void 0 : _item$translation.title,\n          value: item.id,\n          shop_id: item.shop_id,\n          group: { ...item\n          }\n        };\n      });\n      setExtrasGroup(data);\n    }).finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    if (open) {\n      getExtraGroup(debouncedSearch);\n    }\n  }, [open, debouncedSearch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      visible: open,\n      onCancel: () => {\n        onClose();\n        setSearch('');\n      },\n      footer: null,\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        className: \"mt-3\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        loading: loading,\n        dataSource: extrasGroup.filter(extraItem => !(selectedExtras !== null && selectedExtras !== void 0 && selectedExtras.some(selectedExtra => selectedExtra.id === extraItem.id))),\n        renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n          extra: !(item !== null && item !== void 0 && item.shop_id) ? /*#__PURE__*/_jsxDEV(Tag, {\n            children: t('admin')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 39\n          }, this) : null,\n          style: {\n            cursor: 'pointer'\n          },\n          onClick: () => {\n            onSelect(item);\n          },\n          children: item.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this),\n        footer: !loading ? /*#__PURE__*/_jsxDEV(Button, {\n          type: \"link\",\n          onClick: () => setIsAddModalOpen(true),\n          style: {\n            paddingLeft: 0\n          },\n          icon: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 23\n          }, this),\n          children: t('add.new.extra')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ExtraGroupModal, {\n      modal: isAddModalOpen,\n      handleCancel: () => setIsAddModalOpen(false),\n      onSuccess: () => getExtraGroup()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ExtraSelectModal, \"fyTU9vrac/qA63lEmr93CBjb2jM=\", false, function () {\n  return [useTranslation, useDebounce];\n});\n\n_c = ExtraSelectModal;\nexport default ExtraSelectModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExtraSelectModal\");","map":{"version":3,"names":["Button","Input","List","Modal","Tag","React","useEffect","useState","extraService","ExtraGroupModal","useTranslation","PlusOutlined","useDebounce","ExtraSelectModal","open","onClose","selectedExtras","onSelect","t","extrasGroup","setExtrasGroup","loading","setLoading","isAddModalOpen","setIsAddModalOpen","search","setSearch","debouncedSearch","getExtraGroup","query","params","valid","perPage","getAllGroups","then","res","data","map","item","id","label","translation","title","value","shop_id","group","finally","e","target","filter","extraItem","some","selectedExtra","cursor","paddingLeft"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/products/extra-select-modal.js"],"sourcesContent":["import { Button, Input, List, Modal, Tag } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport extraService from 'services/extra';\nimport ExtraGroupModal from './Extras/extra-group-modal';\nimport { useTranslation } from 'react-i18next';\nimport { PlusOutlined } from '@ant-design/icons';\nimport useDebounce from 'helpers/useDebounce';\n\nconst ExtraSelectModal = ({ open, onClose, selectedExtras, onSelect }) => {\n  const { t } = useTranslation();\n  const [extrasGroup, setExtrasGroup] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const debouncedSearch = useDebounce(search, 500);\n  const getExtraGroup = (query) => {\n    setLoading(true);\n    const params = { valid: 1, perPage: 100, search: query };\n    extraService\n      .getAllGroups(params)\n      .then((res) => {\n        const data = res.data.map((item) => ({\n          id: item.id,\n          label: item.translation?.title,\n          value: item.id,\n          shop_id: item.shop_id,\n          group: {\n            ...item,\n          },\n        }));\n        setExtrasGroup(data);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    if (open) {\n      getExtraGroup(debouncedSearch);\n    }\n  }, [open, debouncedSearch]);\n\n  return (\n    <>\n      <Modal\n        visible={open}\n        onCancel={() => {\n          onClose();\n          setSearch('');\n        }}\n        footer={null}\n      >\n        <Input\n          className='mt-3'\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n        />\n        <List\n          loading={loading}\n          dataSource={extrasGroup.filter(\n            (extraItem) =>\n              !selectedExtras?.some(\n                (selectedExtra) => selectedExtra.id === extraItem.id,\n              ),\n          )}\n          renderItem={(item) => (\n            <List.Item\n              extra={!item?.shop_id ? <Tag>{t('admin')}</Tag> : null}\n              style={{ cursor: 'pointer' }}\n              onClick={() => {\n                onSelect(item);\n              }}\n            >\n              {item.label}\n            </List.Item>\n          )}\n          footer={\n            !loading ? (\n              <Button\n                type='link'\n                onClick={() => setIsAddModalOpen(true)}\n                style={{ paddingLeft: 0 }}\n                icon={<PlusOutlined />}\n              >\n                {t('add.new.extra')}\n              </Button>\n            ) : null\n          }\n        />\n      </Modal>\n      <ExtraGroupModal\n        modal={isAddModalOpen}\n        handleCancel={() => setIsAddModalOpen(false)}\n        onSuccess={() => getExtraGroup()}\n      />\n    </>\n  );\n};\n\nexport default ExtraSelectModal;\n"],"mappings":";;;AAAA,SAASA,MAAT,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8BC,KAA9B,EAAqCC,GAArC,QAAgD,MAAhD;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,eAAP,MAA4B,4BAA5B;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,OAAOC,WAAP,MAAwB,qBAAxB;;;;AAEA,MAAMC,gBAAgB,GAAG,QAAiD;EAAA;;EAAA,IAAhD;IAAEC,IAAF;IAAQC,OAAR;IAAiBC,cAAjB;IAAiCC;EAAjC,CAAgD;EACxE,MAAM;IAAEC;EAAF,IAAQR,cAAc,EAA5B;EACA,MAAM,CAACS,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,EAAD,CAA9C;EACA,MAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM,CAACgB,cAAD,EAAiBC,iBAAjB,IAAsCjB,QAAQ,CAAC,KAAD,CAApD;EACA,MAAM,CAACkB,MAAD,EAASC,SAAT,IAAsBnB,QAAQ,CAAC,EAAD,CAApC;EACA,MAAMoB,eAAe,GAAGf,WAAW,CAACa,MAAD,EAAS,GAAT,CAAnC;;EACA,MAAMG,aAAa,GAAIC,KAAD,IAAW;IAC/BP,UAAU,CAAC,IAAD,CAAV;IACA,MAAMQ,MAAM,GAAG;MAAEC,KAAK,EAAE,CAAT;MAAYC,OAAO,EAAE,GAArB;MAA0BP,MAAM,EAAEI;IAAlC,CAAf;IACArB,YAAY,CACTyB,YADH,CACgBH,MADhB,EAEGI,IAFH,CAESC,GAAD,IAAS;MACb,MAAMC,IAAI,GAAGD,GAAG,CAACC,IAAJ,CAASC,GAAT,CAAcC,IAAD;QAAA;;QAAA,OAAW;UACnCC,EAAE,EAAED,IAAI,CAACC,EAD0B;UAEnCC,KAAK,uBAAEF,IAAI,CAACG,WAAP,sDAAE,kBAAkBC,KAFU;UAGnCC,KAAK,EAAEL,IAAI,CAACC,EAHuB;UAInCK,OAAO,EAAEN,IAAI,CAACM,OAJqB;UAKnCC,KAAK,EAAE,EACL,GAAGP;UADE;QAL4B,CAAX;MAAA,CAAb,CAAb;MASAlB,cAAc,CAACgB,IAAD,CAAd;IACD,CAbH,EAcGU,OAdH,CAcW,MAAMxB,UAAU,CAAC,KAAD,CAd3B;EAeD,CAlBD;;EAoBAhB,SAAS,CAAC,MAAM;IACd,IAAIQ,IAAJ,EAAU;MACRc,aAAa,CAACD,eAAD,CAAb;IACD;EACF,CAJQ,EAIN,CAACb,IAAD,EAAOa,eAAP,CAJM,CAAT;EAMA,oBACE;IAAA,wBACE,QAAC,KAAD;MACE,OAAO,EAAEb,IADX;MAEE,QAAQ,EAAE,MAAM;QACdC,OAAO;QACPW,SAAS,CAAC,EAAD,CAAT;MACD,CALH;MAME,MAAM,EAAE,IANV;MAAA,wBAQE,QAAC,KAAD;QACE,SAAS,EAAC,MADZ;QAEE,KAAK,EAAED,MAFT;QAGE,QAAQ,EAAGsB,CAAD,IAAOrB,SAAS,CAACqB,CAAC,CAACC,MAAF,CAASL,KAAV;MAH5B;QAAA;QAAA;QAAA;MAAA,QARF,eAaE,QAAC,IAAD;QACE,OAAO,EAAEtB,OADX;QAEE,UAAU,EAAEF,WAAW,CAAC8B,MAAZ,CACTC,SAAD,IACE,EAAClC,cAAD,aAACA,cAAD,eAACA,cAAc,CAAEmC,IAAhB,CACEC,aAAD,IAAmBA,aAAa,CAACb,EAAd,KAAqBW,SAAS,CAACX,EADnD,CAAD,CAFQ,CAFd;QAQE,UAAU,EAAGD,IAAD,iBACV,QAAC,IAAD,CAAM,IAAN;UACE,KAAK,EAAE,EAACA,IAAD,aAACA,IAAD,eAACA,IAAI,CAAEM,OAAP,iBAAiB,QAAC,GAAD;YAAA,UAAM1B,CAAC,CAAC,OAAD;UAAP;YAAA;YAAA;YAAA;UAAA,QAAjB,GAA2C,IADpD;UAEE,KAAK,EAAE;YAAEmC,MAAM,EAAE;UAAV,CAFT;UAGE,OAAO,EAAE,MAAM;YACbpC,QAAQ,CAACqB,IAAD,CAAR;UACD,CALH;UAAA,UAOGA,IAAI,CAACE;QAPR;UAAA;UAAA;UAAA;QAAA,QATJ;QAmBE,MAAM,EACJ,CAACnB,OAAD,gBACE,QAAC,MAAD;UACE,IAAI,EAAC,MADP;UAEE,OAAO,EAAE,MAAMG,iBAAiB,CAAC,IAAD,CAFlC;UAGE,KAAK,EAAE;YAAE8B,WAAW,EAAE;UAAf,CAHT;UAIE,IAAI,eAAE,QAAC,YAAD;YAAA;YAAA;YAAA;UAAA,QAJR;UAAA,UAMGpC,CAAC,CAAC,eAAD;QANJ;UAAA;UAAA;UAAA;QAAA,QADF,GASI;MA7BR;QAAA;QAAA;QAAA;MAAA,QAbF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eA+CE,QAAC,eAAD;MACE,KAAK,EAAEK,cADT;MAEE,YAAY,EAAE,MAAMC,iBAAiB,CAAC,KAAD,CAFvC;MAGE,SAAS,EAAE,MAAMI,aAAa;IAHhC;MAAA;MAAA;MAAA;IAAA,QA/CF;EAAA,gBADF;AAuDD,CAxFD;;GAAMf,gB;UACUH,c,EAKUE,W;;;KANpBC,gB;AA0FN,eAAeA,gBAAf"},"metadata":{},"sourceType":"module"}