{"ast":null,"code":"import React,{useEffect}from'react';import{Button,Drawer,List}from'antd';import{useTranslation}from'react-i18next';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{addMenu}from'redux/slices/menu';import{useNavigate}from'react-router-dom';import notificationService from'services/notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function NotificationDrawer(_ref){let{handleClose,visible,list,readAll,loading,paginate,setPaginate}=_ref;const{user}=useSelector(state=>state.auth,shallowEqual);const{direction}=useSelector(state=>state.theme.theme,shallowEqual);const{t}=useTranslation();const dispatch=useDispatch();const navigate=useNavigate();const goToShow=id=>{let url='';switch(user.role){case'admin':url=`order/details/${id}`;break;case'manager':url=`order/details/${id}`;break;case'seller':url=`seller/order/details/${id}`;break;case'moderator':url=`seller/order/details/${id}`;break;case'deliveryman':url=`deliveryman/order/details/${id}`;break;default:break;}dispatch(addMenu({url,id:'order_details',name:t('order.details')}));navigate(`/${url}`);};const fetchReadAtNotification=id=>{notificationService.readAt(id).then(()=>{});};const handleClickNotification=item=>{if((item===null||item===void 0?void 0:item.model_type)==='order'){var _item$data;const orderId=item===null||item===void 0?void 0:(_item$data=item.data)===null||_item$data===void 0?void 0:_item$data.id;const id=item===null||item===void 0?void 0:item.id;handleClose();goToShow(orderId);fetchReadAtNotification(id);}};const handleReadAll=()=>{readAll().finally(()=>handleClose());};return/*#__PURE__*/_jsxs(Drawer,{title:t('notifications'),placement:direction==='rtl'?'right':'left',closable:false,onClose:handleClose,visible:visible,extra:/*#__PURE__*/_jsx(Button,{onClick:handleReadAll,children:t('read.all')}),children:[/*#__PURE__*/_jsx(List,{size:\"small\",itemLayout:\"horizontal\",dataSource:list,loading:loading,renderItem:item=>/*#__PURE__*/_jsx(List.Item,{className:\"list-clickable\",onClick:()=>handleClickNotification(item),children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",style:{display:'flex',alignItems:'center',columnGap:'10px'},children:[!(item!==null&&item!==void 0&&item.read_at)&&/*#__PURE__*/_jsx(\"span\",{style:{display:'block',width:'5px',height:'5px',borderRadius:'50%',backgroundColor:'tomato'}}),/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-bold\",children:item===null||item===void 0?void 0:item.title})]})})}),/*#__PURE__*/_jsx(Button,{onClick:()=>setPaginate({page:paginate.page+1}),className:\"w-100 mt-4\",type:\"primary\",disabled:loading,children:t('load.more')})]},'left');}","map":null,"metadata":{},"sourceType":"module"}