{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/image-gallery.js\",\n    _s = $RefreshSig$();\n\nimport { Space, Upload, Button, Row } from 'antd';\nimport { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport galleryService from 'services/gallery';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ImageGallery = _ref => {\n  _s();\n\n  let {\n    fileList,\n    setFileList,\n    type,\n    form,\n    multiple,\n    loadingBtn,\n    setLoadingBtn,\n    imageList,\n    setImageList,\n    handleClose\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n\n  const createImage = file => {\n    return {\n      uid: file.title,\n      name: file.title,\n      status: 'done',\n      // done, uploading, error\n      url: file.title,\n      created: true\n    };\n  };\n\n  const handleSave = () => {\n    setLoadingBtn(true);\n    const formData = new FormData();\n    formData.append('type', type);\n    imageList.forEach((item, index) => {\n      formData.append(`images[${index}]`, item === null || item === void 0 ? void 0 : item.originFileObj);\n    });\n    galleryService.storeMany(formData).then(_ref2 => {\n      var _data$title;\n\n      let {\n        data\n      } = _ref2;\n      const images = data === null || data === void 0 ? void 0 : (_data$title = data.title) === null || _data$title === void 0 ? void 0 : _data$title.map(item => createImage({\n        title: item\n      }));\n      setFileList(prev => [...prev, ...images]);\n      form.setFieldsValue({\n        images: [...fileList, ...images]\n      });\n      handleClose();\n    }).finally(() => setLoadingBtn(false));\n  };\n\n  const handleChange = _ref3 => {\n    let {\n      fileList\n    } = _ref3;\n    setImageList(fileList);\n  };\n\n  const handleRemove = file => {\n    setImageList(prev => prev.filter(item => item.uid !== file.uid));\n  };\n\n  const uploadButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    style: {\n      border: 0,\n      background: 'none'\n    },\n    type: \"button\",\n    children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8\n      },\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Upload, {\n      listType: \"picture-card\",\n      accept: \".png,.jpg,.jpeg,.webp,.avif,jfif\",\n      onChange: handleChange,\n      className: \"antdImgUpload\",\n      showUploadList: false,\n      onRemove: handleRemove,\n      fileList: imageList // beforeUpload={(file) => {\n      //   const isItAtLeast2MB = file.size / 1024 / 1024 < 2;\n      //   if (!isItAtLeast2MB) {\n      //     toast.error(t('max.2.mb'));\n      //     return false;\n      //   }\n      //   return true;\n      // }}\n      ,\n      customRequest: () => {},\n      disabled: !multiple && imageList.length > 0,\n      multiple: multiple,\n      children: uploadButton\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), (imageList === null || imageList === void 0 ? void 0 : imageList.length) > 0 && /*#__PURE__*/_jsxDEV(Row, {\n      gutter: 12,\n      className: \"mt-4 media-container\",\n      children: imageList.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: (item === null || item === void 0 ? void 0 : item.name) || ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-button\",\n          onClick: () => handleRemove(item),\n          children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Space, {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: handleSave,\n        loading: loadingBtn,\n        disabled: !(imageList !== null && imageList !== void 0 && imageList.length),\n        children: t('save')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        children: t('cancel')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ImageGallery, \"zlIdU9EjM2llFt74AbE2KsUJXyM=\", false, function () {\n  return [useTranslation];\n});\n\n_c = ImageGallery;\nexport default ImageGallery;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageGallery\");","map":{"version":3,"names":["Space","Upload","Button","Row","DeleteOutlined","PlusOutlined","galleryService","useTranslation","toast","ImageGallery","fileList","setFileList","type","form","multiple","loadingBtn","setLoadingBtn","imageList","setImageList","handleClose","t","createImage","file","uid","title","name","status","url","created","handleSave","formData","FormData","append","forEach","item","index","originFileObj","storeMany","then","data","images","map","prev","setFieldsValue","finally","handleChange","handleRemove","filter","uploadButton","border","background","marginTop","length"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/image-gallery.js"],"sourcesContent":["import { Space, Upload, Button, Row } from 'antd';\nimport { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport galleryService from 'services/gallery';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'react-toastify';\n\nconst ImageGallery = ({\n  fileList,\n  setFileList,\n  type,\n  form,\n  multiple,\n  loadingBtn,\n  setLoadingBtn,\n  imageList,\n  setImageList,\n  handleClose,\n}) => {\n  const { t } = useTranslation();\n\n  const createImage = (file) => {\n    return {\n      uid: file.title,\n      name: file.title,\n      status: 'done', // done, uploading, error\n      url: file.title,\n      created: true,\n    };\n  };\n\n  const handleSave = () => {\n    setLoadingBtn(true);\n    const formData = new FormData();\n    formData.append('type', type);\n    imageList.forEach((item, index) => {\n      formData.append(`images[${index}]`, item?.originFileObj);\n    });\n    galleryService\n      .storeMany(formData)\n      .then(({ data }) => {\n        const images = data?.title?.map((item) => createImage({ title: item }));\n        setFileList((prev) => [...prev, ...images]);\n        form.setFieldsValue({\n          images: [...fileList, ...images],\n        });\n        handleClose();\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  const handleChange = ({ fileList }) => {\n    setImageList(fileList);\n  };\n  const handleRemove = (file) => {\n    setImageList((prev) => prev.filter((item) => item.uid !== file.uid));\n  };\n\n  const uploadButton = (\n    <button\n      style={{\n        border: 0,\n        background: 'none',\n      }}\n      type='button'\n    >\n      <PlusOutlined />\n      <div\n        style={{\n          marginTop: 8,\n        }}\n      >\n        Upload\n      </div>\n    </button>\n  );\n\n  return (\n    <>\n      <Upload\n        listType='picture-card'\n        accept='.png,.jpg,.jpeg,.webp,.avif,jfif'\n        onChange={handleChange}\n        className='antdImgUpload'\n        showUploadList={false}\n        onRemove={handleRemove}\n        fileList={imageList}\n        // beforeUpload={(file) => {\n        //   const isItAtLeast2MB = file.size / 1024 / 1024 < 2;\n        //   if (!isItAtLeast2MB) {\n        //     toast.error(t('max.2.mb'));\n        //     return false;\n        //   }\n        //   return true;\n        // }}\n        customRequest={() => {}}\n        disabled={!multiple && imageList.length > 0}\n        multiple={multiple}\n      >\n        {uploadButton}\n      </Upload>\n      {imageList?.length > 0 && (\n        <Row gutter={12} className='mt-4 media-container'>\n          {imageList.map((item) => (\n            <div className='item'>\n              <span>{item?.name || ''}</span>\n              <button\n                className='delete-button'\n                onClick={() => handleRemove(item)}\n              >\n                <DeleteOutlined />\n              </button>\n            </div>\n          ))}\n        </Row>\n      )}\n      <Space className='mt-4'>\n        <Button\n          type='primary'\n          onClick={handleSave}\n          loading={loadingBtn}\n          disabled={!imageList?.length}\n        >\n          {t('save')}\n        </Button>\n        <Button onClick={handleClose}>{t('cancel')}</Button>\n      </Space>\n    </>\n  );\n};\n\nexport default ImageGallery;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}