{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/warehouse/working-date.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport Loading from 'components/loading';\nimport moment from 'moment';\nimport workingDays from 'services/warehouseWorkingDays';\nimport closeDates from 'services/warehouseClosedDays';\nimport { weeks } from 'components/shop/weeks';\nimport { Form } from 'antd';\nimport WorkingDays from './date-form';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { fetchWarehouses } from 'redux/slices/warehouse';\nimport { removeFromMenu } from 'redux/slices/menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst WorkingDate = _ref => {\n  _s();\n\n  let {\n    prev\n  } = _ref;\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const [days, setDays] = useState([]);\n  const [lines, setLines] = useState(new Array(7).fill(false));\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const uuid = useMemo(() => {\n    var _activeMenu$data;\n\n    return activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data = activeMenu.data) === null || _activeMenu$data === void 0 ? void 0 : _activeMenu$data.id;\n  }, [activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data]);\n\n  const onFinish = values => {\n    setLoadingBtn(true);\n    const closeDatesBody = {\n      warehouse_id: uuid,\n      dates: days ? days.map(item => moment(item).format('YYYY-MM-DD')) : undefined\n    };\n    const workingDaysBody = {\n      warehouse_id: uuid,\n      dates: values.working_days.map(item => ({\n        day: item.title,\n        from: moment(item.from ? item.from : '00').format('HH:mm'),\n        to: moment(item.to ? item.to : '00').format('HH:mm'),\n        disabled: item.disabled\n      }))\n    };\n\n    if (values.working_days.length !== 0) {\n      workingDays.update(uuid, workingDaysBody).then(() => {}).finally(() => setLoadingBtn(false));\n    }\n\n    closeDates.update(uuid, closeDatesBody).then(() => {\n      const nextUrl = 'warehouse'; // dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n\n      navigate(`/${nextUrl}`); // dispatch(fetchWarehouses());\n    }).finally(() => setLoadingBtn(false));\n  };\n\n  const getDays = () => {\n    setLoading(true);\n    closeDates.getById(uuid).then(res => {\n      setDays(res.data.closed_dates.filter(date => date.day > moment(new Date()).format('YYYY-MM-DD')).map(itm => new Date(itm.day)));\n    });\n    workingDays.getById(uuid).then(res => {\n      setLines(res.data.dates.length !== 0 ? res.data.dates.map(item => item.disabled) : []);\n      res.data.dates.length !== 0 && form.setFieldsValue({\n        working_days: res.data.dates.map(item => ({\n          title: item.day,\n          from: moment(item.from, 'HH:mm:ss'),\n          to: moment(item.to, 'HH:mm:ss'),\n          disabled: Boolean(item.disabled)\n        }))\n      });\n    }).finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      working_days: weeks\n    });\n    if (uuid) getDays();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !loading ? /*#__PURE__*/_jsxDEV(WorkingDays, {\n      onFinish: onFinish,\n      prev: prev,\n      form: form,\n      lines: lines,\n      loadingBtn: loadingBtn,\n      days: days,\n      setDays: setDays,\n      setLines: setLines,\n      weeks: weeks\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(WorkingDate, \"aNESPhbf7MhICnOsMRHBg5NDrcg=\", false, function () {\n  return [Form.useForm, useNavigate, useDispatch, useSelector];\n});\n\n_c = WorkingDate;\nexport default WorkingDate;\n\nvar _c;\n\n$RefreshReg$(_c, \"WorkingDate\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Loading","moment","workingDays","closeDates","weeks","Form","WorkingDays","shallowEqual","useSelector","useNavigate","useDispatch","fetchWarehouses","removeFromMenu","WorkingDate","prev","form","useForm","navigate","dispatch","activeMenu","state","menu","days","setDays","lines","setLines","Array","fill","loadingBtn","setLoadingBtn","loading","setLoading","uuid","data","id","onFinish","values","closeDatesBody","warehouse_id","dates","map","item","format","undefined","workingDaysBody","working_days","day","title","from","to","disabled","length","update","then","finally","nextUrl","getDays","getById","res","closed_dates","filter","date","Date","itm","setFieldsValue","Boolean"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/warehouse/working-date.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport Loading from 'components/loading';\nimport moment from 'moment';\nimport workingDays from 'services/warehouseWorkingDays';\nimport closeDates from 'services/warehouseClosedDays';\nimport { weeks } from 'components/shop/weeks';\nimport { Form } from 'antd';\nimport WorkingDays from './date-form';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { fetchWarehouses } from 'redux/slices/warehouse';\nimport { removeFromMenu } from 'redux/slices/menu';\n\nconst WorkingDate = ({ prev }) => {\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const [days, setDays] = useState([]);\n  const [lines, setLines] = useState(new Array(7).fill(false));\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const uuid = useMemo(() => activeMenu?.data?.id, [activeMenu?.data]);\n  const onFinish = (values) => {\n    setLoadingBtn(true);\n    const closeDatesBody = {\n      warehouse_id: uuid,\n      dates: days\n        ? days.map((item) => moment(item).format('YYYY-MM-DD'))\n        : undefined,\n    };\n\n    const workingDaysBody = {\n      warehouse_id: uuid,\n      dates: values.working_days.map((item) => ({\n        day: item.title,\n        from: moment(item.from ? item.from : '00').format('HH:mm'),\n        to: moment(item.to ? item.to : '00').format('HH:mm'),\n        disabled: item.disabled,\n      })),\n    };\n\n    if (values.working_days.length !== 0) {\n      workingDays\n        .update(uuid, workingDaysBody)\n        .then(() => {})\n        .finally(() => setLoadingBtn(false));\n    }\n    closeDates\n      .update(uuid, closeDatesBody)\n      .then(() => {\n        const nextUrl = 'warehouse';\n        // dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n        navigate(`/${nextUrl}`);\n        // dispatch(fetchWarehouses());\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n\n  const getDays = () => {\n    setLoading(true);\n    closeDates.getById(uuid).then((res) => {\n      setDays(\n        res.data.closed_dates\n          .filter((date) => date.day > moment(new Date()).format('YYYY-MM-DD'))\n          .map((itm) => new Date(itm.day))\n      );\n    });\n\n    workingDays\n      .getById(uuid)\n      .then((res) => {\n        setLines(\n          res.data.dates.length !== 0\n            ? res.data.dates.map((item) => item.disabled)\n            : []\n        );\n\n        res.data.dates.length !== 0 &&\n          form.setFieldsValue({\n            working_days: res.data.dates.map((item) => ({\n              title: item.day,\n              from: moment(item.from, 'HH:mm:ss'),\n              to: moment(item.to, 'HH:mm:ss'),\n              disabled: Boolean(item.disabled),\n            })),\n          });\n      })\n      .finally(() => setLoading(false));\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      working_days: weeks,\n    });\n    if (uuid) getDays();\n  }, []);\n\n  return (\n    <>\n      {!loading ? (\n        <WorkingDays\n          onFinish={onFinish}\n          prev={prev}\n          form={form}\n          lines={lines}\n          loadingBtn={loadingBtn}\n          days={days}\n          setDays={setDays}\n          setLines={setLines}\n          weeks={weeks}\n        />\n      ) : (\n        <Loading />\n      )}\n    </>\n  );\n};\n\nexport default WorkingDate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}