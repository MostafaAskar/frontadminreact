{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/order/user-address.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Button, Form, Modal, Row, Col } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Map from '../../components/map';\nimport getDefaultLocation from '../../helpers/getDefaultLocation';\nimport { usePlacesWidget } from 'react-google-autocomplete';\nimport { MAP_API_KEY } from '../../configs/app-global';\nimport { setMenuData } from '../../redux/slices/menu';\nimport { setOrderData } from '../../redux/slices/order';\nimport AddressForm from '../../components/forms/address-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UserAddress(_ref) {\n  _s();\n\n  var _data$address, _activeMenu$data, _activeMenu$data$addr;\n\n  let {\n    uuid,\n    handleCancel\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    settings\n  } = useSelector(state => state.globalSettings, shallowEqual);\n  const {\n    defaultLang\n  } = useSelector(state => state.formLang, shallowEqual);\n  const {\n    google_map_key\n  } = useSelector(state => state.globalSettings.settings, shallowEqual);\n  const {\n    data\n  } = useSelector(state => state.order, shallowEqual);\n  const {\n    ref\n  } = usePlacesWidget({\n    apiKey: google_map_key || MAP_API_KEY,\n    onPlaceSelected: place => {\n      const location = {\n        lat: place === null || place === void 0 ? void 0 : place.geometry.location.lat(),\n        lng: place === null || place === void 0 ? void 0 : place.geometry.location.lng()\n      };\n      setLocation(location);\n    }\n  });\n  const [location, setLocation] = useState(data.address ? {\n    lat: data.address.lat,\n    lng: data.address.lng\n  } : getDefaultLocation(settings));\n  const [value, setValue] = useState(data === null || data === void 0 ? void 0 : (_data$address = data.address) === null || _data$address === void 0 ? void 0 : _data$address.address);\n\n  const onFinish = values => {\n    const address = { ...values,\n      active: 1,\n      address: values === null || values === void 0 ? void 0 : values[`address[${defaultLang}]`],\n      lat: location.lat,\n      lng: location.lng\n    };\n    dispatch(setOrderData({\n      address\n    }));\n    dispatch(setMenuData({\n      activeMenu,\n      data: { ...activeMenu.data,\n        addressData: address\n      }\n    }));\n    handleCancel();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    visible: !!uuid,\n    title: t('create.address'),\n    onCancel: handleCancel,\n    footer: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      onClick: () => form.submit(),\n      children: t('save')\n    }, 'saveBtn', false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"default\",\n      onClick: handleCancel,\n      children: t('cancel')\n    }, 'cancelBtn', false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)],\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      name: \"user-address\",\n      form: form,\n      onFinish: onFinish,\n      initialValues: {\n        [`address[${defaultLang}]`]: activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data = activeMenu.data) === null || _activeMenu$data === void 0 ? void 0 : (_activeMenu$data$addr = _activeMenu$data.addressData) === null || _activeMenu$data$addr === void 0 ? void 0 : _activeMenu$data$addr.address\n      },\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        gutter: 12,\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          span: 24,\n          children: /*#__PURE__*/_jsxDEV(AddressForm, {\n            value: value,\n            setValue: setValue,\n            setLocation: setLocation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: t('map'),\n          children: /*#__PURE__*/_jsxDEV(Map, {\n            location: location,\n            setLocation: setLocation,\n            setAddress: value => form.setFieldsValue({\n              [`address[${defaultLang}]`]: value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserAddress, \"Eu2N5niWEV+0u3JG7U0JGcvfEtw=\", false, function () {\n  return [useTranslation, Form.useForm, useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, usePlacesWidget];\n});\n\n_c = UserAddress;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserAddress\");","map":{"version":3,"names":["React","useState","Button","Form","Modal","Row","Col","shallowEqual","useDispatch","useSelector","useTranslation","Map","getDefaultLocation","usePlacesWidget","MAP_API_KEY","setMenuData","setOrderData","AddressForm","UserAddress","uuid","handleCancel","t","form","useForm","dispatch","activeMenu","state","menu","settings","globalSettings","defaultLang","formLang","google_map_key","data","order","ref","apiKey","onPlaceSelected","place","location","lat","geometry","lng","setLocation","address","value","setValue","onFinish","values","active","addressData","submit","setFieldsValue"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/order/user-address.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Form, Modal, Row, Col } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Map from '../../components/map';\nimport getDefaultLocation from '../../helpers/getDefaultLocation';\nimport { usePlacesWidget } from 'react-google-autocomplete';\nimport { MAP_API_KEY } from '../../configs/app-global';\nimport { setMenuData } from '../../redux/slices/menu';\nimport { setOrderData } from '../../redux/slices/order';\nimport AddressForm from '../../components/forms/address-form';\n\nexport default function UserAddress({ uuid, handleCancel }) {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { settings } = useSelector(\n    (state) => state.globalSettings,\n    shallowEqual,\n  );\n  const { defaultLang } = useSelector((state) => state.formLang, shallowEqual);\n  const { google_map_key } = useSelector(\n    (state) => state.globalSettings.settings,\n    shallowEqual,\n  );\n  const { data } = useSelector((state) => state.order, shallowEqual);\n\n  const { ref } = usePlacesWidget({\n    apiKey: google_map_key || MAP_API_KEY,\n    onPlaceSelected: (place) => {\n      const location = {\n        lat: place?.geometry.location.lat(),\n        lng: place?.geometry.location.lng(),\n      };\n      setLocation(location);\n    },\n  });\n\n  const [location, setLocation] = useState(\n    data.address\n      ? { lat: data.address.lat, lng: data.address.lng }\n      : getDefaultLocation(settings),\n  );\n\n  const [value, setValue] = useState(data?.address?.address);\n\n  const onFinish = (values) => {\n    const address = {\n      ...values,\n      active: 1,\n      address: values?.[`address[${defaultLang}]`],\n      lat: location.lat,\n      lng: location.lng,\n    };\n    dispatch(setOrderData({ address }));\n    dispatch(\n      setMenuData({\n        activeMenu,\n        data: {\n          ...activeMenu.data,\n          addressData: address,\n        },\n      }),\n    );\n    handleCancel();\n  };\n\n  return (\n    <Modal\n      visible={!!uuid}\n      title={t('create.address')}\n      onCancel={handleCancel}\n      footer={[\n        <Button type='primary' key={'saveBtn'} onClick={() => form.submit()}>\n          {t('save')}\n        </Button>,\n        <Button type='default' key={'cancelBtn'} onClick={handleCancel}>\n          {t('cancel')}\n        </Button>,\n      ]}\n    >\n      <Form\n        layout='vertical'\n        name='user-address'\n        form={form}\n        onFinish={onFinish}\n        initialValues={{\n          [`address[${defaultLang}]`]: activeMenu?.data?.addressData?.address,\n        }}\n      >\n        <Row gutter={12}>\n          <Col span={24}>\n            <AddressForm\n              value={value}\n              setValue={setValue}\n              setLocation={setLocation}\n            />\n          </Col>\n        </Row>\n        <Col span={24}>\n          <Form.Item label={t('map')}>\n            <Map\n              location={location}\n              setLocation={setLocation}\n              setAddress={(value) =>\n                form.setFieldsValue({\n                  [`address[${defaultLang}]`]: value,\n                })\n              }\n            />\n          </Form.Item>\n        </Col>\n      </Form>\n    </Modal>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}