{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Descriptions,Space,Spin}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{useNavigate,useParams}from'react-router-dom';import{removeFromMenu,disableRefetch}from'../../../redux/slices/menu';import{useTranslation}from'react-i18next';import productService from'../../../services/seller/product';import{fetchSellerfetchAddons}from'../../../redux/slices/addons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ProductFinish=_ref=>{var _data$shop,_data$unit,_data$stocks;let{prev}=_ref;const{t}=useTranslation();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const{defaultLang,languages}=useSelector(state=>state.formLang,shallowEqual);const navigate=useNavigate();const dispatch=useDispatch();const[data,setData]=useState({});const[loading,setLoading]=useState(null);const{uuid}=useParams();const{params}=useSelector(state=>state.addons,shallowEqual);function getLanguageFields(data){if(!(data!==null&&data!==void 0&&data.translations)){return{};}const{translations}=data;const result=languages.map(item=>{var _translations$find,_translations$find2;return{[`title[${item.locale}]`]:(_translations$find=translations.find(el=>el.locale===item.locale))===null||_translations$find===void 0?void 0:_translations$find.title,[`description[${item.locale}]`]:(_translations$find2=translations.find(el=>el.locale===item.locale))===null||_translations$find2===void 0?void 0:_translations$find2.description};});return Object.assign({},...result);}function fetchProduct(uuid){setLoading(true);productService.getById(uuid).then(res=>{const data={...res.data,...getLanguageFields(res.data),properties:res.data.properties.map((item,index)=>({id:index,[`key[${item.locale}]`]:item.key,[`value[${item.locale}]`]:item.value})),translation:undefined,translations:undefined};setData(data);}).finally(()=>setLoading(false));}function finish(){const body={...params};const nextUrl='seller/addons';navigate(`/${nextUrl}`);dispatch(removeFromMenu({...activeMenu,nextUrl}));dispatch(fetchSellerfetchAddons(body));dispatch(disableRefetch(activeMenu));}useEffect(()=>{fetchProduct(uuid);},[]);return!loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Descriptions,{title:t('product.info'),bordered:true,children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:`${t('title')} (${defaultLang})`,span:3,children:data[`title[${defaultLang}]`]}),/*#__PURE__*/_jsx(Descriptions.Item,{label:`${t('description')} (${defaultLang})`,span:3,children:data[`description[${defaultLang}]`]}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('shop'),span:1.5,children:(_data$shop=data.shop)===null||_data$shop===void 0?void 0:_data$shop.translation.title}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('unit'),span:1.5,children:(_data$unit=data.unit)===null||_data$unit===void 0?void 0:_data$unit.translation.title}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('tax'),children:data.tax}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('min.quantity'),children:data.min_qty}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('max.quantity'),children:data.max_qty})]}),(_data$stocks=data.stocks)===null||_data$stocks===void 0?void 0:_data$stocks.map((item,idx)=>{if(!item){return'';}return/*#__PURE__*/_jsxs(Descriptions,{bordered:true,className:\"mt-4\",children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:t('price'),span:2,children:item.price}),/*#__PURE__*/_jsx(Descriptions.Item,{label:t('quantity'),span:2,children:item.quantity}),item.extras.map((extra,idx)=>{var _extra$group,_extra$group$translat;return/*#__PURE__*/_jsx(Descriptions.Item,{label:extra===null||extra===void 0?void 0:(_extra$group=extra.group)===null||_extra$group===void 0?void 0:(_extra$group$translat=_extra$group.translation)===null||_extra$group$translat===void 0?void 0:_extra$group$translat.title,children:extra===null||extra===void 0?void 0:extra.value},'extra'+idx);})]},'desc'+idx);}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end mt-4\",children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{onClick:prev,children:t('prev')}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:finish,children:t('finish')})]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(Spin,{size:\"large\",className:\"py-5\"})});};export default ProductFinish;","map":null,"metadata":{},"sourceType":"module"}