{"ast":null,"code":"import React,{useState}from'react';import{useTranslation}from'react-i18next';import{Button,Form,Modal,Row,Col,Select,Input}from'antd';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const statuses=['pending','approved','canceled'];export default function StatusChangeModal(_ref){let{data,handleClose,handleChange}=_ref;const{t}=useTranslation();const[form]=Form.useForm();const[loading,setLoading]=useState(false);const[status,setStatus]=useState(data===null||data===void 0?void 0:data.status);const onFinish=values=>{setLoading(true);handleChange(data===null||data===void 0?void 0:data.id,values).finally(()=>setLoading(false));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Modal,{title:t('status.change'),visible:!!data,onCancel:handleClose,footer:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"default\",onClick:handleClose,children:t('cancel')}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>form.submit(),loading:loading,children:t('save')})]}),children:/*#__PURE__*/_jsx(Form,{form:form,layout:'vertical',onFinish:onFinish,initialValues:{status:data===null||data===void 0?void 0:data.status},children:/*#__PURE__*/_jsx(Row,{gutter:12,children:/*#__PURE__*/_jsxs(Col,{span:24,children:[/*#__PURE__*/_jsx(Form.Item,{label:t('status'),name:'status',rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Select,{onChange:status=>setStatus(status),children:statuses.map((item,idx)=>/*#__PURE__*/_jsx(Select.Option,{value:item,children:t(item)},item+idx))})}),status==='canceled'?/*#__PURE__*/_jsx(Form.Item,{name:\"status_note\",label:t('note'),rules:[{validator(_,value){if(!value){return Promise.reject(new Error(t('required')));}else if(value&&(value===null||value===void 0?void 0:value.trim())===''){return Promise.reject(new Error(t('no.empty.space')));}else if(value&&(value===null||value===void 0?void 0:value.trim().length)<2){return Promise.reject(new Error(t('must.be.at.least.2')));}return Promise.resolve();}}],children:/*#__PURE__*/_jsx(Input.TextArea,{maxLength:250,showCount:true})}):'']})})})})});}","map":null,"metadata":{},"sourceType":"module"}