{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/pos-system/components/pos-user-address.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Form, Modal } from 'antd';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Map from 'components/map';\nimport getDefaultLocation from 'helpers/getDefaultLocation';\nimport AddressForm from 'components/forms/address-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PosUserAddress(_ref) {\n  _s();\n\n  var _parentFormValues$loc, _parentFormValues$loc2, _parentFormValues$loc3, _parentFormValues$add;\n\n  let {\n    uuid,\n    handleCancel,\n    parentForm\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [form] = Form.useForm();\n  const {\n    currentBag\n  } = useSelector(state => state.cart, shallowEqual);\n  const {\n    settings\n  } = useSelector(state => state.globalSettings, shallowEqual);\n  const {\n    defaultLang\n  } = useSelector(state => state.formLang, shallowEqual);\n  const parentFormValues = parentForm.getFieldsValue();\n  const [location, setLocation] = useState((_parentFormValues$loc = parentFormValues.location) !== null && _parentFormValues$loc !== void 0 && _parentFormValues$loc.latitude ? {\n    lat: (_parentFormValues$loc2 = parentFormValues.location) === null || _parentFormValues$loc2 === void 0 ? void 0 : _parentFormValues$loc2.latitude,\n    lng: (_parentFormValues$loc3 = parentFormValues.location) === null || _parentFormValues$loc3 === void 0 ? void 0 : _parentFormValues$loc3.longitude\n  } : getDefaultLocation(settings));\n  const [value, setValue] = useState(parentFormValues === null || parentFormValues === void 0 ? void 0 : (_parentFormValues$add = parentFormValues.address) === null || _parentFormValues$add === void 0 ? void 0 : _parentFormValues$add.address);\n\n  const onFinish = values => {\n    const body = {\n      address: {\n        address: values === null || values === void 0 ? void 0 : values[`address[${defaultLang}]`]\n      },\n      location: {\n        latitude: location.lat,\n        longitude: location.lng\n      }\n    };\n    parentForm.setFieldsValue(body);\n    handleCancel();\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      address: parentFormValues.address.address || null\n    });\n  }, [currentBag]);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    visible: !!uuid,\n    title: t('create.address'),\n    onCancel: handleCancel,\n    footer: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      onClick: () => form.submit(),\n      children: t('save')\n    }, 'saveBtn', false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"default\",\n      onClick: handleCancel,\n      children: t('cancel')\n    }, 'cancelBtn', false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)],\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      name: \"user-address\",\n      form: form,\n      onFinish: onFinish,\n      initialValues: {\n        [`address[${defaultLang}]`]: parentFormValues.address.address\n      },\n      children: [/*#__PURE__*/_jsxDEV(AddressForm, {\n        value: value,\n        setValue: setValue,\n        setLocation: setLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: t('map'),\n        children: /*#__PURE__*/_jsxDEV(Map, {\n          location: location,\n          setLocation: setLocation,\n          setAddress: value => form.setFieldsValue({\n            [`address[${defaultLang}]`]: value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PosUserAddress, \"j0Uug0oMfJ0gq2Ra3kbhcZrMPc8=\", false, function () {\n  return [useTranslation, Form.useForm, useSelector, useSelector, useSelector];\n});\n\n_c = PosUserAddress;\n\nvar _c;\n\n$RefreshReg$(_c, \"PosUserAddress\");","map":{"version":3,"names":["React","useState","useEffect","Button","Form","Modal","shallowEqual","useSelector","useTranslation","Map","getDefaultLocation","AddressForm","PosUserAddress","uuid","handleCancel","parentForm","t","form","useForm","currentBag","state","cart","settings","globalSettings","defaultLang","formLang","parentFormValues","getFieldsValue","location","setLocation","latitude","lat","lng","longitude","value","setValue","address","onFinish","values","body","setFieldsValue","submit"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/pos-system/components/pos-user-address.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, Form, Modal } from 'antd';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Map from 'components/map';\nimport getDefaultLocation from 'helpers/getDefaultLocation';\nimport AddressForm from 'components/forms/address-form';\n\nexport default function PosUserAddress({ uuid, handleCancel, parentForm }) {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const { currentBag } = useSelector((state) => state.cart, shallowEqual);\n  const { settings } = useSelector(\n    (state) => state.globalSettings,\n    shallowEqual,\n  );\n  const { defaultLang } = useSelector((state) => state.formLang, shallowEqual);\n\n  const parentFormValues = parentForm.getFieldsValue();\n\n  const [location, setLocation] = useState(\n    parentFormValues.location?.latitude\n      ? {\n          lat: parentFormValues.location?.latitude,\n          lng: parentFormValues.location?.longitude,\n        }\n      : getDefaultLocation(settings),\n  );\n\n  const [value, setValue] = useState(parentFormValues?.address?.address);\n\n  const onFinish = (values) => {\n    const body = {\n      address: { address: values?.[`address[${defaultLang}]`] },\n      location: {\n        latitude: location.lat,\n        longitude: location.lng,\n      },\n    };\n\n    parentForm.setFieldsValue(body);\n    handleCancel();\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      address: parentFormValues.address.address || null,\n    });\n  }, [currentBag]);\n\n  return (\n    <Modal\n      visible={!!uuid}\n      title={t('create.address')}\n      onCancel={handleCancel}\n      footer={[\n        <Button type='primary' key={'saveBtn'} onClick={() => form.submit()}>\n          {t('save')}\n        </Button>,\n        <Button type='default' key={'cancelBtn'} onClick={handleCancel}>\n          {t('cancel')}\n        </Button>,\n      ]}\n    >\n      <Form\n        layout='vertical'\n        name='user-address'\n        form={form}\n        onFinish={onFinish}\n        initialValues={{\n          [`address[${defaultLang}]`]: parentFormValues.address.address,\n        }}\n      >\n        <AddressForm\n          value={value}\n          setValue={setValue}\n          setLocation={setLocation}\n        />\n        <Form.Item label={t('map')}>\n          <Map\n            location={location}\n            setLocation={setLocation}\n            setAddress={(value) =>\n              form.setFieldsValue({ [`address[${defaultLang}]`]: value })\n            }\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}