{"ast":null,"code":"import{Card,Image,Space,Table,Tag}from'antd';import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import{useDispatch}from'react-redux';import{shallowEqual,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import numberToPrice from'../../helpers/numberToPrice';import{addMenu}from'../../redux/slices/menu';import orderService from'../../services/order';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UserTopProducts=_ref=>{let{id}=_ref;const{t}=useTranslation();const dispatch=useDispatch();const navigate=useNavigate();const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const{defaultCurrency}=useSelector(state=>state.currency,shallowEqual);const fetchTopProducts=params=>{setLoading(true);orderService.getUserTopProducts(id,params).then(res=>setData(res.data)).finally(()=>setLoading(false));};const goToProduct=row=>{dispatch(addMenu({id:`product-edit`,url:`product/${row.uuid}`,name:t('edit.product')}));navigate(`/product/${row.uuid}`);};useEffect(()=>{fetchTopProducts();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsx(Card,{title:t('top.products'),children:/*#__PURE__*/_jsx(Table,{loading:loading,dataSource:data===null||data===void 0?void 0:data.data,pagination:{total:data===null||data===void 0?void 0:data.total,current:data===null||data===void 0?void 0:data.current_page,pageSize:data===null||data===void 0?void 0:data.per_page},columns:[{title:t('product'),dataIndex:'stock',key:'stock',render:stock=>{var _stock$product,_stock$product2,_stock$product2$trans;return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Image,{width:100,src:stock===null||stock===void 0?void 0:(_stock$product=stock.product)===null||_stock$product===void 0?void 0:_stock$product.img,placeholder:true,style:{borderRadius:4}}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>goToProduct(stock===null||stock===void 0?void 0:stock.product),className:\"text-hover\",children:stock===null||stock===void 0?void 0:(_stock$product2=stock.product)===null||_stock$product2===void 0?void 0:(_stock$product2$trans=_stock$product2.translation)===null||_stock$product2$trans===void 0?void 0:_stock$product2$trans.title})]});}},{title:t('count'),dataIndex:'count',key:'count'},{title:t('total.price'),dataIndex:'total_price',key:'total_price',render:price=>numberToPrice(price,defaultCurrency===null||defaultCurrency===void 0?void 0:defaultCurrency.symbol)},{title:t('status'),dataIndex:'status',key:'status',render:(_,row)=>{var _row$stock,_row$stock$product;return/*#__PURE__*/_jsx(Tag,{children:(_row$stock=row.stock)!==null&&_row$stock!==void 0&&(_row$stock$product=_row$stock.product)!==null&&_row$stock$product!==void 0&&_row$stock$product.active?t('active'):t('inactive')});}}],onChange:pagination=>fetchTopProducts({page:pagination===null||pagination===void 0?void 0:pagination.current,perPage:pagination===null||pagination===void 0?void 0:pagination.pageSize})})});};export default UserTopProducts;","map":null,"metadata":{},"sourceType":"module"}