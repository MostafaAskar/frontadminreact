{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/nav-profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Menu, Dropdown, Modal } from 'antd';\nimport { EditOutlined, LogoutOutlined } from '@ant-design/icons';\nimport getAvatar from 'helpers/getAvatar';\nimport { useTranslation } from 'react-i18next';\nimport UserModal from './user-modal';\nimport { batch, shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { clearUser } from 'redux/slices/auth';\nimport { clearMenu } from 'redux/slices/menu';\nimport { setCurrentChat } from 'redux/slices/chat';\nimport { useNavigate } from 'react-router-dom';\nimport authService from 'services/auth';\nimport { clearBags, clearCart, clearCartShops } from 'redux/slices/cart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function NavProfile(_ref) {\n  _s();\n\n  let {\n    user\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [userModal, setUserModal] = useState(false);\n\n  const showModal = () => setIsModalVisible(true);\n\n  const handleCancel = () => setIsModalVisible(false);\n\n  const {\n    firebaseToken\n  } = useSelector(state => state.auth, shallowEqual);\n\n  const handleOk = () => {\n    authService.logout({\n      token: firebaseToken\n    }).then(res => {\n      batch(() => {\n        dispatch(clearUser());\n        dispatch(clearMenu());\n        dispatch(setCurrentChat(null));\n        dispatch(clearCart());\n        dispatch(clearCartShops());\n        dispatch(clearBags());\n      });\n      setIsModalVisible(false);\n      localStorage.removeItem('token');\n      navigate('/login');\n    });\n  };\n\n  const profileMenu = /*#__PURE__*/_jsxDEV(Menu, {\n    children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: e => setUserModal(true),\n      icon: /*#__PURE__*/_jsxDEV(EditOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 15\n      }, this),\n      children: t('edit.profile')\n    }, 'edit.profile', false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: e => showModal(),\n      icon: /*#__PURE__*/_jsxDEV(LogoutOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 15\n      }, this),\n      children: t('logout')\n    }, 'logout', false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n      placement: \"bottom\",\n      overlay: profileMenu,\n      trigger: ['click'],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-brand cursor-pointer\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"sidebar-logo\",\n          src: getAvatar(user.img),\n          alt: user.fullName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar-brand-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"user-name fw-bold\",\n            children: user.fullName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"user-status\",\n            children: user.role\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: isModalVisible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(LogoutOutlined, {\n        style: {\n          fontSize: '25px',\n          color: '#08c'\n        },\n        theme: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2\",\n        children: t('leave.site')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), userModal && /*#__PURE__*/_jsxDEV(UserModal, {\n      visible: userModal,\n      handleCancel: () => setUserModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(NavProfile, \"HBWqYvMVFDlLwakDAl8yqEinOQI=\", false, function () {\n  return [useTranslation, useDispatch, useNavigate, useSelector];\n});\n\n_c = NavProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"NavProfile\");","map":{"version":3,"names":["React","useState","Menu","Dropdown","Modal","EditOutlined","LogoutOutlined","getAvatar","useTranslation","UserModal","batch","shallowEqual","useSelector","useDispatch","clearUser","clearMenu","setCurrentChat","useNavigate","authService","clearBags","clearCart","clearCartShops","NavProfile","user","t","dispatch","navigate","isModalVisible","setIsModalVisible","userModal","setUserModal","showModal","handleCancel","firebaseToken","state","auth","handleOk","logout","token","then","res","localStorage","removeItem","profileMenu","e","img","fullName","role","fontSize","color"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/nav-profile.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Menu, Dropdown, Modal } from 'antd';\nimport { EditOutlined, LogoutOutlined } from '@ant-design/icons';\nimport getAvatar from 'helpers/getAvatar';\nimport { useTranslation } from 'react-i18next';\nimport UserModal from './user-modal';\nimport { batch, shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { clearUser } from 'redux/slices/auth';\nimport { clearMenu } from 'redux/slices/menu';\nimport { setCurrentChat } from 'redux/slices/chat';\nimport { useNavigate } from 'react-router-dom';\nimport authService from 'services/auth';\nimport { clearBags, clearCart, clearCartShops } from 'redux/slices/cart';\n\nexport default function NavProfile({ user }) {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [userModal, setUserModal] = useState(false);\n\n  const showModal = () => setIsModalVisible(true);\n  const handleCancel = () => setIsModalVisible(false);\n\n  const { firebaseToken } = useSelector((state) => state.auth, shallowEqual);\n\n  const handleOk = () => {\n    authService.logout({ token: firebaseToken }).then((res) => {\n      batch(() => {\n        dispatch(clearUser());\n        dispatch(clearMenu());\n        dispatch(setCurrentChat(null));\n        dispatch(clearCart());\n        dispatch(clearCartShops());\n        dispatch(clearBags());\n      });\n      setIsModalVisible(false);\n      localStorage.removeItem('token');\n      navigate('/login');\n    });\n  };\n\n  const profileMenu = (\n    <Menu>\n      <Menu.Item\n        key='edit.profile'\n        onClick={(e) => setUserModal(true)}\n        icon={<EditOutlined />}\n      >\n        {t('edit.profile')}\n      </Menu.Item>\n      <Menu.Item\n        key='logout'\n        onClick={(e) => showModal()}\n        icon={<LogoutOutlined />}\n      >\n        {t('logout')}\n      </Menu.Item>\n    </Menu>\n  );\n  return (\n    <>\n      <Dropdown placement='bottom' overlay={profileMenu} trigger={['click']}>\n        <div className='sidebar-brand cursor-pointer'>\n          <img\n            className='sidebar-logo'\n            src={getAvatar(user.img)}\n            alt={user.fullName}\n          />\n          <div className='sidebar-brand-text'>\n            <h5 className='user-name fw-bold'>{user.fullName}</h5>\n            <h6 className='user-status'>{user.role}</h6>\n          </div>\n        </div>\n      </Dropdown>\n      <Modal\n        visible={isModalVisible}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        centered\n      >\n        <LogoutOutlined\n          style={{ fontSize: '25px', color: '#08c' }}\n          theme='primary'\n        />\n        <span className='ml-2'>{t('leave.site')}</span>\n      </Modal>\n      {userModal && (\n        <UserModal\n          visible={userModal}\n          handleCancel={() => setUserModal(false)}\n        />\n      )}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}