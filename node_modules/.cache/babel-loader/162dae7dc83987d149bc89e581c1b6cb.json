{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/drawing-map.js\",\n    _s = $RefreshSig$();\n\nimport { GoogleApiWrapper, Map, Marker, Polygon, Polyline } from 'google-maps-react';\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { MAP_API_KEY } from '../configs/app-global';\nimport { BiCurrentLocation } from 'react-icons/bi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DrawingManager = props => {\n  _s();\n\n  var _props$triangleCoords2, _props$triangleCoords3;\n\n  const [center, setCenter] = useState({\n    lat: 38.58799374569842,\n    lng: -98.47949767583457\n  });\n  const [polygon, setPolygon] = useState(props.triangleCoords ? props.triangleCoords : []);\n  const [finish, setFinish] = useState(props.triangleCoords ? true : false);\n  const [focus, setFocus] = useState(null);\n  props.setMerge(finish);\n\n  const onClick = (t, map, coord) => {\n    setFocus(false);\n    const {\n      latLng\n    } = coord;\n    const lat = latLng.lat();\n    const lng = latLng.lng();\n\n    if (finish) {\n      setPolygon([]);\n      props.settriangleCoords([{\n        lat,\n        lng\n      }]);\n      setCenter({\n        lat,\n        lng\n      });\n      setFinish(false);\n    } else {\n      props.settriangleCoords(prev => [...prev, {\n        lat,\n        lng\n      }]);\n    }\n  };\n\n  const onFinish = e => {\n    var _props$triangleCoords, _e$position;\n\n    setFinish(props.triangleCoords ? true : false);\n\n    if (((_props$triangleCoords = props.triangleCoords[0]) === null || _props$triangleCoords === void 0 ? void 0 : _props$triangleCoords.lat) === ((_e$position = e.position) === null || _e$position === void 0 ? void 0 : _e$position.lat) && props.triangleCoords.length > 1) {\n      setPolygon(props.triangleCoords);\n      props.setLocation(props.triangleCoords);\n      setFinish(true);\n      setFocus(true);\n    }\n  };\n\n  const currentLocation = () => {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      setCenter({\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      });\n    });\n  };\n\n  useEffect(() => {\n    setFocus(true);\n  }, []);\n\n  function handleMapReady(_, map) {\n    map.setOptions({\n      draggableCursor: 'crosshair',\n      draggingCursor: 'grab'\n    });\n  }\n\n  const markers = props.triangleCoords.map(item => ({\n    lat: Number(item.lat || '0'),\n    lng: Number(item.lng || '0')\n  })); // eslint-disable-next-line no-undef\n\n  var bounds = new props.google.maps.LatLngBounds();\n\n  for (var i = 0; i < markers.length; i++) {\n    bounds.extend(markers[i]);\n  }\n\n  const OPTIONS = {\n    minZoom: 15,\n    maxZoom: 15\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    style: {\n      height: 500,\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"map-button\",\n      type: \"button\",\n      onClick: () => {\n        currentLocation();\n      },\n      children: /*#__PURE__*/_jsxDEV(BiCurrentLocation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Map, {\n      options: OPTIONS,\n      cursor: 'pointer',\n      onClick: onClick,\n      maxZoom: 16,\n      minZoom: 2,\n      google: props.google,\n      initialCenter: center,\n      center: center,\n      onReady: handleMapReady,\n      bounds: focus && bounds,\n      className: \"clickable\",\n      children: [(_props$triangleCoords2 = props.triangleCoords) === null || _props$triangleCoords2 === void 0 ? void 0 : _props$triangleCoords2.map((item, idx) => /*#__PURE__*/_jsxDEV(Marker, {\n        onClick: e => onFinish(e),\n        position: item,\n        icon: {\n          url: 'https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg',\n          scaledSize: new props.google.maps.Size(10, 10)\n        },\n        className: \"marker\"\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)), !(polygon !== null && polygon !== void 0 && polygon.length) ? /*#__PURE__*/_jsxDEV(Polyline, {\n        path: props.triangleCoords,\n        strokeColor: \"black\",\n        strokeOpacity: 0.8,\n        strokeWeight: 3,\n        fillColor: \"black\",\n        fillOpacity: 0.35\n      }, (_props$triangleCoords3 = props.triangleCoords) === null || _props$triangleCoords3 === void 0 ? void 0 : _props$triangleCoords3.length, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Polygon, {\n        path: props.triangleCoords,\n        strokeColor: \"black\",\n        strokeOpacity: 0.8,\n        strokeWeight: 3,\n        fillColor: \"black\",\n        fillOpacity: 0.35\n      }, polygon === null || polygon === void 0 ? void 0 : polygon.length, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DrawingManager, \"RCDVqahgA3dzaDg7f3JjzYpx+s0=\");\n\n_c = DrawingManager;\nexport default GoogleApiWrapper({\n  apiKey: MAP_API_KEY,\n  libraries: ['places']\n})(DrawingManager);\n\nvar _c;\n\n$RefreshReg$(_c, \"DrawingManager\");","map":{"version":3,"names":["GoogleApiWrapper","Map","Marker","Polygon","Polyline","React","useState","useEffect","MAP_API_KEY","BiCurrentLocation","DrawingManager","props","center","setCenter","lat","lng","polygon","setPolygon","triangleCoords","finish","setFinish","focus","setFocus","setMerge","onClick","t","map","coord","latLng","settriangleCoords","prev","onFinish","e","position","length","setLocation","currentLocation","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","handleMapReady","_","setOptions","draggableCursor","draggingCursor","markers","item","Number","bounds","google","maps","LatLngBounds","i","extend","OPTIONS","minZoom","maxZoom","height","width","idx","url","scaledSize","Size","apiKey","libraries"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/drawing-map.js"],"sourcesContent":["import {\n  GoogleApiWrapper,\n  Map,\n  Marker,\n  Polygon,\n  Polyline,\n} from 'google-maps-react';\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { MAP_API_KEY } from '../configs/app-global';\nimport { BiCurrentLocation } from 'react-icons/bi';\n\nconst DrawingManager = (props) => {\n  const [center, setCenter] = useState({\n    lat: 38.58799374569842,\n    lng: -98.47949767583457,\n  });\n  const [polygon, setPolygon] = useState(\n    props.triangleCoords ? props.triangleCoords : []\n  );\n  const [finish, setFinish] = useState(props.triangleCoords ? true : false);\n  const [focus, setFocus] = useState(null);\n  props.setMerge(finish);\n\n  const onClick = (t, map, coord) => {\n    setFocus(false);\n    const { latLng } = coord;\n    const lat = latLng.lat();\n    const lng = latLng.lng();\n    if (finish) {\n      setPolygon([]);\n      props.settriangleCoords([{ lat, lng }]);\n      setCenter({ lat, lng });\n      setFinish(false);\n    } else {\n      props.settriangleCoords((prev) => [...prev, { lat, lng }]);\n    }\n  };\n\n  const onFinish = (e) => {\n    setFinish(props.triangleCoords ? true : false);\n    if (\n      props.triangleCoords[0]?.lat === e.position?.lat &&\n      props.triangleCoords.length > 1\n    ) {\n      setPolygon(props.triangleCoords);\n      props.setLocation(props.triangleCoords);\n      setFinish(true);\n      setFocus(true);\n    }\n  };\n\n  const currentLocation = () => {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      setCenter({\n        lat: position.coords.latitude,\n        lng: position.coords.longitude,\n      });\n    });\n  };\n\n  useEffect(() => {\n    setFocus(true);\n  }, []);\n\n  function handleMapReady(_, map) {\n    map.setOptions({\n      draggableCursor: 'crosshair',\n      draggingCursor: 'grab',\n    });\n  }\n\n  const markers = props.triangleCoords.map((item) => ({\n    lat: Number(item.lat || '0'),\n    lng: Number(item.lng || '0'),\n  }));\n  // eslint-disable-next-line no-undef\n  var bounds = new props.google.maps.LatLngBounds();\n  for (var i = 0; i < markers.length; i++) {\n    bounds.extend(markers[i]);\n  }\n\n  const OPTIONS = {\n    minZoom: 15,\n    maxZoom: 15,\n  };\n\n  return (\n    <div className='map-container' style={{ height: 500, width: '100%' }}>\n      <button\n        className='map-button'\n        type='button'\n        onClick={() => {\n          currentLocation();\n        }}\n      >\n        <BiCurrentLocation />\n      </button>\n      <Map\n        options={OPTIONS}\n        cursor={'pointer'}\n        onClick={onClick}\n        maxZoom={16}\n        minZoom={2}\n        google={props.google}\n        initialCenter={center}\n        center={center}\n        onReady={handleMapReady}\n        bounds={focus && bounds}\n        className='clickable'\n      >\n        {props.triangleCoords?.map((item, idx) => (\n          <Marker\n            onClick={(e) => onFinish(e)}\n            key={idx}\n            position={item}\n            icon={{\n              url: 'https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg',\n              scaledSize: new props.google.maps.Size(10, 10),\n            }}\n            className='marker'\n          />\n        ))}\n\n        {!polygon?.length ? (\n          <Polyline\n            key={props.triangleCoords?.length}\n            path={props.triangleCoords}\n            strokeColor='black'\n            strokeOpacity={0.8}\n            strokeWeight={3}\n            fillColor='black'\n            fillOpacity={0.35}\n          />\n        ) : (\n          <Polygon\n            key={polygon?.length}\n            path={props.triangleCoords}\n            strokeColor='black'\n            strokeOpacity={0.8}\n            strokeWeight={3}\n            fillColor='black'\n            fillOpacity={0.35}\n          />\n        )}\n      </Map>\n    </div>\n  );\n};\n\nexport default GoogleApiWrapper({\n  apiKey: MAP_API_KEY,\n  libraries: ['places'],\n})(DrawingManager);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}