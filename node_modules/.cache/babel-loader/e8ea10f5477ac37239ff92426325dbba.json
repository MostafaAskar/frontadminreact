{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/products/product-stock.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Button, Card, Col, Divider, Form, Input, InputNumber, Row, Space } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport extraService from 'services/seller/extras';\nimport productService from 'services/seller/product';\nimport { AsyncSelect } from 'components/async-select';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation, useParams } from 'react-router-dom';\nimport Loading from 'components/loading';\nimport cartesian from 'helpers/cartesian';\nimport { DeleteOutlined, DeploymentUnitOutlined } from '@ant-design/icons';\nimport { setMenuData } from 'redux/slices/menu';\nimport generateRandomNumbers from 'helpers/generateRandomNumbers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductStock = _ref => {\n  _s();\n\n  var _location$state2;\n\n  let {\n    prev,\n    next,\n    isRequest\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n  const {\n    uuid\n  } = useParams();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    myShop\n  } = useSelector(state => state.myShop, shallowEqual);\n  const [loading, setLoading] = useState(null);\n  const location = useLocation();\n  const {\n    defaultLang\n  } = useSelector(state => state.formLang, shallowEqual);\n  const {\n    defaultCurrency\n  } = useSelector(state => state.currency, shallowEqual);\n  const randomNumbersLength = 6;\n  const [loadingBtn, setLoadingBtn] = useState(null);\n  const [stockIds, setStockIds] = useState([]);\n\n  const onFinish = values => {\n    var _activeMenu$data, _activeMenu$data$extr;\n\n    const {\n      stocks\n    } = values;\n    const delete_ids = stockIds.filter((stockId, index) => {\n      var _stocks$index;\n\n      return !!((_stocks$index = stocks[index]) !== null && _stocks$index !== void 0 && _stocks$index.stock_id) && !stocks.some(stock => (stock === null || stock === void 0 ? void 0 : stock.stock_id) === stockId);\n    });\n    let extras;\n    const isProductWithExtras = !!((_activeMenu$data = activeMenu.data) !== null && _activeMenu$data !== void 0 && (_activeMenu$data$extr = _activeMenu$data.extras) !== null && _activeMenu$data$extr !== void 0 && _activeMenu$data$extr.length);\n\n    if (isProductWithExtras) {\n      extras = stocks.map(item => {\n        var _activeMenu$data2, _activeMenu$data3, _item$addons, _item$addons2;\n\n        return {\n          galleries: item.galleries,\n          price: item.price,\n          quantity: item.quantity,\n          sku: item.sku,\n          ids: isRequest ? (_activeMenu$data2 = activeMenu.data) === null || _activeMenu$data2 === void 0 ? void 0 : _activeMenu$data2.extras.map((_, idx) => item[`extras[${idx}]`]) : (_activeMenu$data3 = activeMenu.data) === null || _activeMenu$data3 === void 0 ? void 0 : _activeMenu$data3.extras.map((_, idx) => item[`extras[${idx}]`].value),\n          addons: item.addons ? isRequest ? (_item$addons = item.addons) === null || _item$addons === void 0 ? void 0 : _item$addons.map(i => i) : (_item$addons2 = item.addons) === null || _item$addons2 === void 0 ? void 0 : _item$addons2.map(i => i.value) : [],\n          stock_id: item.stock_id\n        };\n      });\n    } else {\n      extras = [{\n        price: stocks[0].price,\n        quantity: stocks[0].quantity,\n        addons: stocks[0].addons ? isRequest ? stocks[0].addons.map(i => i) : stocks[0].addons.map(i => i.value) : [],\n        stock_id: stocks[0].stock_id,\n        sku: stocks[0].sku,\n        ids: []\n      }];\n    }\n\n    if (isRequest) {\n      dispatch(setMenuData({\n        activeMenu,\n        data: { ...activeMenu.data,\n          stocks: extras,\n          delete_ids\n        }\n      }));\n      next();\n      return;\n    }\n\n    setLoadingBtn(true);\n    productService.stocks(uuid, {\n      extras,\n      delete_ids\n    }).then(_ref2 => {\n      let {\n        data: {\n          stocks\n        }\n      } = _ref2;\n      const newExtras = stocks === null || stocks === void 0 ? void 0 : stocks.flatMap(item => item.extras);\n      const extraValues = newExtras.map(item => ({ ...item.value,\n        stock_id: item.stock_id,\n        group_type: item.group.type\n      }));\n      const extraGroup = newExtras === null || newExtras === void 0 ? void 0 : newExtras.find(item => item.group.type === 'color');\n      const extrasCustom = {};\n      stocks.forEach(stock => {\n        stock.extras.forEach(extra => {\n          if (extra.extra_group_id in extrasCustom) {\n            var _extrasCustom$extra$e;\n\n            if (!((_extrasCustom$extra$e = extrasCustom[extra.extra_group_id].values) !== null && _extrasCustom$extra$e !== void 0 && _extrasCustom$extra$e.some(item => {\n              var _extra$value;\n\n              return item.value === ((_extra$value = extra.value) === null || _extra$value === void 0 ? void 0 : _extra$value.id);\n            }))) {\n              var _extrasCustom$extra$e2, _extra$value2;\n\n              (_extrasCustom$extra$e2 = extrasCustom[extra.extra_group_id].values) === null || _extrasCustom$extra$e2 === void 0 ? void 0 : _extrasCustom$extra$e2.push({\n                value: extra.value.id,\n                label: (_extra$value2 = extra.value) === null || _extra$value2 === void 0 ? void 0 : _extra$value2.value,\n                stock_id: stock.id\n              });\n            }\n          } else {\n            var _extra$group$translat, _extra$value3;\n\n            extrasCustom[extra.extra_group_id] = {\n              group: extra.group,\n              label: (_extra$group$translat = extra.group.translation) === null || _extra$group$translat === void 0 ? void 0 : _extra$group$translat.title,\n              value: extra.extra_group_id,\n              id: extra.extra_group_id,\n              stock_id: stock.id,\n              values: [{\n                value: extra.value.id,\n                label: (_extra$value3 = extra.value) === null || _extra$value3 === void 0 ? void 0 : _extra$value3.value,\n                stock_id: stock.id\n              }]\n            };\n          }\n        });\n      });\n      dispatch(setMenuData({\n        activeMenu,\n        data: { ...activeMenu.data,\n          newExtras: [{\n            group: extraGroup === null || extraGroup === void 0 ? void 0 : extraGroup.group,\n            values: extraValues\n          }],\n          delete_ids,\n          stocks,\n          stocksData: stocks,\n          extras: Object.values(extrasCustom)\n        }\n      }));\n      next();\n    }).finally(() => setLoadingBtn(false));\n  };\n\n  function fetchProduct(uuid) {\n    setLoading(true);\n    productService.getById(uuid).then(res => {\n      var _activeMenu$data$extr2, _res$data$stocks, _res$data$stocks3;\n\n      const additionalStocks = cartesian(activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data$extr2 = activeMenu.data.extras) === null || _activeMenu$data$extr2 === void 0 ? void 0 : _activeMenu$data$extr2.map(extra => extra.values || []));\n      const parsedAdditionalStocks = additionalStocks.map((additionalStock, i) => {\n        var _activeMenu$data5, _activeMenu$data6;\n\n        if (additionalStock.every(itemValue => typeof itemValue.stock_id !== 'undefined')) {\n          var _activeMenu$data$sku, _activeMenu$data4, _selectedStock$addons;\n\n          const selectedStock = res.data.stocks.find(stock => {\n            return stock.extras.every(extra => {\n              return additionalStock.some(addStock => {\n                var _extra$value4;\n\n                return addStock.value === (extra === null || extra === void 0 ? void 0 : (_extra$value4 = extra.value) === null || _extra$value4 === void 0 ? void 0 : _extra$value4.id);\n              });\n            });\n          });\n          return {\n            galleries: (selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.galleries) || [],\n            price: (selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.price) || 0,\n            quantity: (selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.quantity) || 0,\n            sku: (_activeMenu$data$sku = (_activeMenu$data4 = activeMenu.data) === null || _activeMenu$data4 === void 0 ? void 0 : _activeMenu$data4.sku) !== null && _activeMenu$data$sku !== void 0 ? _activeMenu$data$sku : selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.sku,\n            stock_id: selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.id,\n            tax: (activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data.tax) || 0,\n            addons: (selectedStock === null || selectedStock === void 0 ? void 0 : (_selectedStock$addons = selectedStock.addons) === null || _selectedStock$addons === void 0 ? void 0 : _selectedStock$addons.map(item => {\n              var _item$product, _item$product$transla, _item$product2;\n\n              return {\n                label: (item === null || item === void 0 ? void 0 : (_item$product = item.product) === null || _item$product === void 0 ? void 0 : (_item$product$transla = _item$product.translation) === null || _item$product$transla === void 0 ? void 0 : _item$product$transla.title) || (item === null || item === void 0 ? void 0 : item.label),\n                value: (item === null || item === void 0 ? void 0 : (_item$product2 = item.product) === null || _item$product2 === void 0 ? void 0 : _item$product2.id) || (item === null || item === void 0 ? void 0 : item.value)\n              };\n            })) || [],\n            ...Object.assign({}, ...additionalStock.map((extra, idx) => ({\n              [`extras[${idx}]`]: {\n                label: extra.label,\n                value: extra.value\n              }\n            })))\n          };\n        }\n\n        return {\n          price: 0,\n          quantity: 0,\n          sku: (_activeMenu$data5 = activeMenu.data) === null || _activeMenu$data5 === void 0 ? void 0 : _activeMenu$data5.sku,\n          tax: ((_activeMenu$data6 = activeMenu.data) === null || _activeMenu$data6 === void 0 ? void 0 : _activeMenu$data6.tax) || 0,\n          addons: [],\n          ...Object.assign({}, ...additionalStock.map((extra, idx) => ({\n            [`extras[${idx}]`]: {\n              label: extra.label,\n              value: extra.value\n            }\n          })))\n        };\n      });\n      let defaultStock = [];\n\n      if (additionalStocks.length === 0 && ((_res$data$stocks = res.data.stocks) === null || _res$data$stocks === void 0 ? void 0 : _res$data$stocks.length) !== 0) {\n        var _res$data$stocks2, _activeMenu$data$sku2, _activeMenu$data7, _activeMenu$data8, _stockWithoutExtras$a;\n\n        const stockWithoutExtras = (_res$data$stocks2 = res.data.stocks) === null || _res$data$stocks2 === void 0 ? void 0 : _res$data$stocks2.at(0);\n        defaultStock = [{\n          price: (stockWithoutExtras === null || stockWithoutExtras === void 0 ? void 0 : stockWithoutExtras.price) || 0,\n          quantity: (stockWithoutExtras === null || stockWithoutExtras === void 0 ? void 0 : stockWithoutExtras.quantity) || 0,\n          sku: (_activeMenu$data$sku2 = (_activeMenu$data7 = activeMenu.data) === null || _activeMenu$data7 === void 0 ? void 0 : _activeMenu$data7.sku) !== null && _activeMenu$data$sku2 !== void 0 ? _activeMenu$data$sku2 : stockWithoutExtras === null || stockWithoutExtras === void 0 ? void 0 : stockWithoutExtras.sku,\n          tax: ((_activeMenu$data8 = activeMenu.data) === null || _activeMenu$data8 === void 0 ? void 0 : _activeMenu$data8.tax) || 0,\n          addons: stockWithoutExtras ? (_stockWithoutExtras$a = stockWithoutExtras.addons) === null || _stockWithoutExtras$a === void 0 ? void 0 : _stockWithoutExtras$a.map(item => {\n            var _item$product3, _item$product3$transl, _item$product4;\n\n            return {\n              label: (item === null || item === void 0 ? void 0 : (_item$product3 = item.product) === null || _item$product3 === void 0 ? void 0 : (_item$product3$transl = _item$product3.translation) === null || _item$product3$transl === void 0 ? void 0 : _item$product3$transl.title) || (item === null || item === void 0 ? void 0 : item.label),\n              value: (item === null || item === void 0 ? void 0 : (_item$product4 = item.product) === null || _item$product4 === void 0 ? void 0 : _item$product4.id) || (item === null || item === void 0 ? void 0 : item.value)\n            };\n          }) : []\n        }];\n      }\n\n      if (additionalStocks.length === 0 && ((_res$data$stocks3 = res.data.stocks) === null || _res$data$stocks3 === void 0 ? void 0 : _res$data$stocks3.length) === 0) {\n        var _activeMenu$data9, _activeMenu$data10;\n\n        defaultStock = [{\n          price: undefined,\n          quantity: 0,\n          sku: (_activeMenu$data9 = activeMenu.data) === null || _activeMenu$data9 === void 0 ? void 0 : _activeMenu$data9.sku,\n          tax: ((_activeMenu$data10 = activeMenu.data) === null || _activeMenu$data10 === void 0 ? void 0 : _activeMenu$data10.tax) || 0,\n          addons: []\n        }];\n      }\n\n      const stocks = defaultStock.concat(parsedAdditionalStocks);\n      setStockIds(res.data.stocks.map(item => item.id));\n      form.setFieldsValue({\n        stocks\n      });\n    }).finally(() => {\n      setLoading(false);\n    });\n  }\n\n  function fetchExtra(id) {\n    return extraService.getGroupById(id).then(res => res.data.extra_values.map(item => ({\n      label: item.value,\n      value: item.id\n    })));\n  }\n\n  const fetchAddons = search => {\n    const params = {\n      search,\n      addon: 1,\n      shop_id: myShop.id\n    };\n    return productService.getAll(params).then(res => res.data.map(item => {\n      var _item$translation;\n\n      return {\n        label: item === null || item === void 0 ? void 0 : (_item$translation = item.translation) === null || _item$translation === void 0 ? void 0 : _item$translation.title,\n        value: item === null || item === void 0 ? void 0 : item.id\n      };\n    }));\n  };\n\n  useEffect(() => {\n    if (isRequest) {\n      var _location$state;\n\n      if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.generate) {\n        var _activeMenu$data$extr3, _activeMenu$data14, _activeMenu$data14$ac, _activeMenu$data16, _activeMenu$data16$ac;\n\n        const additionalStocks = cartesian(activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data$extr3 = activeMenu.data.extras) === null || _activeMenu$data$extr3 === void 0 ? void 0 : _activeMenu$data$extr3.map(extra => extra.values || []));\n        const parsedAdditionalStocks = additionalStocks.map(item => {\n          var _activeMenu$data12, _activeMenu$data13;\n\n          if (item.every(itemValue => typeof itemValue.stock_id !== 'undefined')) {\n            var _activeMenu$data11, _activeMenu$data11$ac, _selectedStock$addons2;\n\n            const selectedStock = (_activeMenu$data11 = activeMenu.data) === null || _activeMenu$data11 === void 0 ? void 0 : (_activeMenu$data11$ac = _activeMenu$data11.actualStocks) === null || _activeMenu$data11$ac === void 0 ? void 0 : _activeMenu$data11$ac.find(stock => {\n              return stock.extras.every(extra => {\n                return item.some(addStock => {\n                  var _extra$value5;\n\n                  return addStock.value === (extra === null || extra === void 0 ? void 0 : (_extra$value5 = extra.value) === null || _extra$value5 === void 0 ? void 0 : _extra$value5.id);\n                });\n              });\n            });\n            return {\n              galleries: (selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.galleries) || [],\n              price: (selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.price) || 0,\n              quantity: (selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.quantity) || 0,\n              stock_id: selectedStock === null || selectedStock === void 0 ? void 0 : selectedStock.id,\n              tax: (activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data.tax) || 0,\n              addons: (selectedStock === null || selectedStock === void 0 ? void 0 : (_selectedStock$addons2 = selectedStock.addons) === null || _selectedStock$addons2 === void 0 ? void 0 : _selectedStock$addons2.map(item => {\n                var _item$product5, _item$product5$transl, _item$product6;\n\n                return {\n                  label: (item === null || item === void 0 ? void 0 : (_item$product5 = item.product) === null || _item$product5 === void 0 ? void 0 : (_item$product5$transl = _item$product5.translation) === null || _item$product5$transl === void 0 ? void 0 : _item$product5$transl.title) || (item === null || item === void 0 ? void 0 : item.label),\n                  value: (item === null || item === void 0 ? void 0 : (_item$product6 = item.product) === null || _item$product6 === void 0 ? void 0 : _item$product6.id) || (item === null || item === void 0 ? void 0 : item.value)\n                };\n              })) || [],\n              ...Object.assign({}, ...item.map((extra, idx) => ({\n                [`extras[${idx}]`]: {\n                  label: extra.label,\n                  value: extra.value,\n                  group: activeMenu.data.extras[idx].label\n                }\n              })))\n            };\n          }\n\n          return {\n            price: 0,\n            quantity: 0,\n            tax: ((_activeMenu$data12 = activeMenu.data) === null || _activeMenu$data12 === void 0 ? void 0 : _activeMenu$data12.tax) || 0,\n            sku: activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data13 = activeMenu.data) === null || _activeMenu$data13 === void 0 ? void 0 : _activeMenu$data13.sku,\n            addons: [],\n            ...Object.assign({}, ...item.map((extra, idx) => ({\n              [`extras[${idx}]`]: {\n                label: extra.label,\n                value: extra.value\n              }\n            })))\n          };\n        });\n        let defaultStock = [];\n\n        if (additionalStocks.length === 0 && ((_activeMenu$data14 = activeMenu.data) === null || _activeMenu$data14 === void 0 ? void 0 : (_activeMenu$data14$ac = _activeMenu$data14.actualStocks) === null || _activeMenu$data14$ac === void 0 ? void 0 : _activeMenu$data14$ac.length) !== 0) {\n          var _activeMenu$data$actu, _activeMenu$data15, _stockWithoutExtras$a2;\n\n          const stockWithoutExtras = (_activeMenu$data$actu = activeMenu.data.actualStocks) === null || _activeMenu$data$actu === void 0 ? void 0 : _activeMenu$data$actu.at(0);\n          defaultStock = [{\n            price: (stockWithoutExtras === null || stockWithoutExtras === void 0 ? void 0 : stockWithoutExtras.price) || 0,\n            quantity: (stockWithoutExtras === null || stockWithoutExtras === void 0 ? void 0 : stockWithoutExtras.quantity) || 0,\n            sku: stockWithoutExtras === null || stockWithoutExtras === void 0 ? void 0 : stockWithoutExtras.sku,\n            tax: ((_activeMenu$data15 = activeMenu.data) === null || _activeMenu$data15 === void 0 ? void 0 : _activeMenu$data15.tax) || 0,\n            addons: stockWithoutExtras ? (_stockWithoutExtras$a2 = stockWithoutExtras.addons) === null || _stockWithoutExtras$a2 === void 0 ? void 0 : _stockWithoutExtras$a2.map(item => {\n              var _item$product7, _item$product7$transl, _item$product8;\n\n              return {\n                label: (item === null || item === void 0 ? void 0 : (_item$product7 = item.product) === null || _item$product7 === void 0 ? void 0 : (_item$product7$transl = _item$product7.translation) === null || _item$product7$transl === void 0 ? void 0 : _item$product7$transl.title) || (item === null || item === void 0 ? void 0 : item.label),\n                value: (item === null || item === void 0 ? void 0 : (_item$product8 = item.product) === null || _item$product8 === void 0 ? void 0 : _item$product8.id) || (item === null || item === void 0 ? void 0 : item.value)\n              };\n            }) : []\n          }];\n        }\n\n        if (additionalStocks.length === 0 && (activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data16 = activeMenu.data) === null || _activeMenu$data16 === void 0 ? void 0 : (_activeMenu$data16$ac = _activeMenu$data16.actualStocks) === null || _activeMenu$data16$ac === void 0 ? void 0 : _activeMenu$data16$ac.length) === 0) {\n          var _activeMenu$data17;\n\n          defaultStock = [{\n            price: undefined,\n            quantity: 0,\n            sku: activeMenu === null || activeMenu === void 0 ? void 0 : activeMenu.data.sku,\n            tax: ((_activeMenu$data17 = activeMenu.data) === null || _activeMenu$data17 === void 0 ? void 0 : _activeMenu$data17.tax) || 0,\n            addons: []\n          }];\n        }\n\n        const stocks = defaultStock.concat(parsedAdditionalStocks);\n        setStockIds(activeMenu.data.actualStocks.map(item => item.id));\n        form.setFieldsValue({\n          stocks\n        });\n      } else {\n        var _activeMenu$data$stoc, _activeMenu$data18;\n\n        const stocks = (_activeMenu$data$stoc = activeMenu.data.stocks) === null || _activeMenu$data$stoc === void 0 ? void 0 : _activeMenu$data$stoc.map(stock => ({\n          galleries: (stock === null || stock === void 0 ? void 0 : stock.galleries) || [],\n          price: stock.price,\n          quantity: stock.quantity,\n          tax: activeMenu.data.tax,\n          stock_id: stock.stock_id,\n          sku: stock.sku,\n          ...Object.assign({}, ...stock.ids.map((extra, idx) => ({\n            [`extras[${idx}]`]: {\n              label: extra.label,\n              value: extra.value,\n              group: extra.group\n            }\n          }))),\n          addons: stock.addons\n        }));\n        setStockIds(((_activeMenu$data18 = activeMenu.data) === null || _activeMenu$data18 === void 0 ? void 0 : _activeMenu$data18.delete_ids) || []);\n        form.setFieldsValue({\n          stocks\n        });\n      }\n    } else {\n      fetchProduct(uuid);\n    }\n  }, [isRequest, (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.generate]);\n\n  function handleSetAllPrice(value) {\n    const {\n      stocks\n    } = form.getFieldsValue();\n    form.setFieldsValue({\n      stocks: assignObject(stocks, 'price', value)\n    });\n  }\n\n  function handleSetAllQuantity(value) {\n    const {\n      stocks\n    } = form.getFieldsValue();\n    form.setFieldsValue({\n      stocks: assignObject(stocks, 'quantity', value)\n    });\n  }\n\n  const assignObject = (obj, key, value) => obj.map(item => Object.assign(item, {\n    [key]: value\n  }));\n\n  const handleSetAllSku = (generateRandom, value) => {\n    const skuValue = generateRandom ? generateRandomNumbers(randomNumbersLength) : value;\n    const {\n      stocks\n    } = form.getFieldsValue();\n    form.setFieldsValue({\n      'set.all.sku': skuValue,\n      stock: assignObject(stocks, 'sku', skuValue)\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: activeMenu.data[`title[${defaultLang}]`] ? `${activeMenu.data[`title[${defaultLang}]`]}` : '',\n    children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      form: form,\n      onFinish: onFinish,\n      children: [/*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: t('set.all.values')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        gutter: 12,\n        align: \"middle\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          span: 5,\n          style: {\n            marginRight: '10px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: t('sku'),\n            name: \"set.all.sku\",\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              className: \"w-100\",\n              onChange: e => handleSetAllSku(false, e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: ' ',\n            name: \"sku\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              icon: /*#__PURE__*/_jsxDEV(DeploymentUnitOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 25\n              }, this),\n              onClick: () => handleSetAllSku(true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 4,\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: t('price'),\n            name: 'set.all.price',\n            rules: [{\n              type: 'number',\n              min: 0,\n              message: t('must.be.positive.number')\n            }],\n            children: /*#__PURE__*/_jsxDEV(InputNumber, {\n              className: \"w-100\",\n              onChange: handleSetAllPrice\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 4,\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: t('quantity'),\n            name: 'set.all.quantity',\n            rules: [{\n              type: 'number',\n              min: 0,\n              message: t('must.be.positive.number')\n            }],\n            children: /*#__PURE__*/_jsxDEV(InputNumber, {\n              className: \"w-100\",\n              onChange: handleSetAllQuantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.List, {\n        name: \"stocks\",\n        children: (fields, _ref3) => {\n          let {\n            add,\n            remove\n          } = _ref3;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: fields.map((field, index) => {\n              var _activeMenu$data19, _activeMenu$data19$ex, _activeMenu$data20, _activeMenu$data20$ex;\n\n              return /*#__PURE__*/_jsxDEV(Row, {\n                gutter: 12,\n                align: \"middle\",\n                style: {\n                  flexWrap: 'nowrap',\n                  overflowX: 'auto'\n                },\n                hidden: !((_activeMenu$data19 = activeMenu.data) !== null && _activeMenu$data19 !== void 0 && (_activeMenu$data19$ex = _activeMenu$data19.extras) !== null && _activeMenu$data19$ex !== void 0 && _activeMenu$data19$ex.length) && field.key,\n                children: [(_activeMenu$data20 = activeMenu.data) === null || _activeMenu$data20 === void 0 ? void 0 : (_activeMenu$data20$ex = _activeMenu$data20.extras) === null || _activeMenu$data20$ex === void 0 ? void 0 : _activeMenu$data20$ex.map((item, idx) => /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: item === null || item === void 0 ? void 0 : item.label,\n                    name: [index, `extras[${idx}]`],\n                    rules: [{\n                      required: true,\n                      message: t('required')\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(AsyncSelect, {\n                      fetchOptions: () => fetchExtra(item.value),\n                      className: \"w-100\",\n                      disabled: true,\n                      style: {\n                        minWidth: 200\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 537,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 530,\n                    columnNumber: 29\n                  }, this)\n                }, 'extra' + item.value, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 27\n                }, this)), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: t('sku'),\n                    name: [index, 'sku'],\n                    children: /*#__PURE__*/_jsxDEV(Input, {\n                      className: \"w-100\",\n                      style: {\n                        minWidth: 200\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 564,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 563,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: t('quantity'),\n                    name: [index, 'quantity'],\n                    rules: [{\n                      required: true,\n                      message: t('required')\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                      min: 0,\n                      className: \"w-100\",\n                      style: {\n                        minWidth: 200\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 576,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 571,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 570,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: `${t('price')} (${defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.symbol})`,\n                    name: [index, 'price'],\n                    rules: [{\n                      required: true,\n                      message: t('requried')\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                      min: 0,\n                      className: \"w-100\",\n                      style: {\n                        minWidth: 200\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 589,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 584,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: t('tax'),\n                    name: [index, 'tax'],\n                    children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                      className: \"w-100\",\n                      disabled: true,\n                      style: {\n                        minWidth: 200\n                      },\n                      addonAfter: \"%\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 598,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 597,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                    hidden: true,\n                    label: t('id'),\n                    name: [index, 'stock_id'],\n                    children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                      className: \"w-100\",\n                      disabled: true,\n                      style: {\n                        minWidth: 200\n                      },\n                      addonAfter: \"%\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 610,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 605,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 25\n                }, this), ' ', /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    noStyle: true,\n                    shouldUpdate: (prevValues, nextValues) => prevValues.stocks[field.name].price !== nextValues.stocks[field.name].price,\n                    children: _ref4 => {\n                      let {\n                        getFieldValue\n                      } = _ref4;\n                      const tax = getFieldValue(['stocks', field.name, 'tax']) || 0;\n                      const price = getFieldValue(['stocks', field.name, 'price']);\n                      const totalPrice = tax === 0 ? price : (price * tax / 100 + price).toFixed(2);\n                      return /*#__PURE__*/_jsxDEV(Form.Item, {\n                        label: `${t('total.price')} (${defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.symbol})`,\n                        children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                          min: 1,\n                          disabled: true,\n                          value: totalPrice,\n                          className: \"w-100\",\n                          style: {\n                            minWidth: 200\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 646,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 641,\n                        columnNumber: 33\n                      }, this);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 619,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 618,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: (fields === null || fields === void 0 ? void 0 : fields.length) > 1 ? /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"primary\",\n                    className: \"mt-2\",\n                    danger: true,\n                    icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 664,\n                      columnNumber: 37\n                    }, this),\n                    onClick: () => {\n                      remove(field.name);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 660,\n                    columnNumber: 29\n                  }, this) : ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 25\n                }, this)]\n              }, field.key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 17\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        className: \"mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: prev,\n          children: t('prev')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          loading: !!loadingBtn,\n          children: t('next')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 451,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductStock, \"8NlRZlinjt4cN/8Thgi0QGLQhgA=\", false, function () {\n  return [useTranslation, Form.useForm, useDispatch, useParams, useSelector, useSelector, useLocation, useSelector, useSelector];\n});\n\n_c = ProductStock;\nexport default ProductStock;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductStock\");","map":{"version":3,"names":["React","useEffect","useState","Button","Card","Col","Divider","Form","Input","InputNumber","Row","Space","shallowEqual","useDispatch","useSelector","extraService","productService","AsyncSelect","useTranslation","useLocation","useParams","Loading","cartesian","DeleteOutlined","DeploymentUnitOutlined","setMenuData","generateRandomNumbers","ProductStock","prev","next","isRequest","t","form","useForm","dispatch","uuid","activeMenu","state","menu","myShop","loading","setLoading","location","defaultLang","formLang","defaultCurrency","currency","randomNumbersLength","loadingBtn","setLoadingBtn","stockIds","setStockIds","onFinish","values","stocks","delete_ids","filter","stockId","index","stock_id","some","stock","extras","isProductWithExtras","data","length","map","item","galleries","price","quantity","sku","ids","_","idx","value","addons","i","then","newExtras","flatMap","extraValues","group_type","group","type","extraGroup","find","extrasCustom","forEach","extra","extra_group_id","id","push","label","translation","title","stocksData","Object","finally","fetchProduct","getById","res","additionalStocks","parsedAdditionalStocks","additionalStock","every","itemValue","selectedStock","addStock","tax","product","assign","defaultStock","stockWithoutExtras","at","undefined","concat","setFieldsValue","fetchExtra","getGroupById","extra_values","fetchAddons","search","params","addon","shop_id","getAll","generate","actualStocks","handleSetAllPrice","getFieldsValue","assignObject","handleSetAllQuantity","obj","key","handleSetAllSku","generateRandom","skuValue","marginRight","e","target","min","message","fields","add","remove","field","flexWrap","overflowX","required","minWidth","symbol","prevValues","nextValues","name","getFieldValue","totalPrice","toFixed"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/products/product-stock.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  Button,\n  Card,\n  Col,\n  Divider,\n  Form,\n  Input,\n  InputNumber,\n  Row,\n  Space,\n} from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport extraService from 'services/seller/extras';\nimport productService from 'services/seller/product';\nimport { AsyncSelect } from 'components/async-select';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation, useParams } from 'react-router-dom';\nimport Loading from 'components/loading';\nimport cartesian from 'helpers/cartesian';\nimport { DeleteOutlined, DeploymentUnitOutlined } from '@ant-design/icons';\nimport { setMenuData } from 'redux/slices/menu';\nimport generateRandomNumbers from 'helpers/generateRandomNumbers';\n\nconst ProductStock = ({ prev, next, isRequest }) => {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n  const { uuid } = useParams();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { myShop } = useSelector((state) => state.myShop, shallowEqual);\n  const [loading, setLoading] = useState(null);\n  const location = useLocation();\n  const { defaultLang } = useSelector((state) => state.formLang, shallowEqual);\n  const { defaultCurrency } = useSelector(\n    (state) => state.currency,\n    shallowEqual,\n  );\n\n  const randomNumbersLength = 6;\n\n  const [loadingBtn, setLoadingBtn] = useState(null);\n  const [stockIds, setStockIds] = useState([]);\n\n  const onFinish = (values) => {\n    const { stocks } = values;\n\n    const delete_ids = stockIds.filter(\n      (stockId, index) =>\n        !!stocks[index]?.stock_id &&\n        !stocks.some((stock) => stock?.stock_id === stockId),\n    );\n    let extras;\n    const isProductWithExtras = !!activeMenu.data?.extras?.length;\n\n    if (isProductWithExtras) {\n      extras = stocks.map((item) => ({\n        galleries: item.galleries,\n        price: item.price,\n        quantity: item.quantity,\n        sku: item.sku,\n        ids: isRequest\n          ? activeMenu.data?.extras.map((_, idx) => item[`extras[${idx}]`])\n          : activeMenu.data?.extras.map(\n              (_, idx) => item[`extras[${idx}]`].value,\n            ),\n        addons: item.addons\n          ? isRequest\n            ? item.addons?.map((i) => i)\n            : item.addons?.map((i) => i.value)\n          : [],\n        stock_id: item.stock_id,\n      }));\n    } else {\n      extras = [\n        {\n          price: stocks[0].price,\n          quantity: stocks[0].quantity,\n          addons: stocks[0].addons\n            ? isRequest\n              ? stocks[0].addons.map((i) => i)\n              : stocks[0].addons.map((i) => i.value)\n            : [],\n          stock_id: stocks[0].stock_id,\n          sku: stocks[0].sku,\n          ids: [],\n        },\n      ];\n    }\n\n    if (isRequest) {\n      dispatch(\n        setMenuData({\n          activeMenu,\n          data: { ...activeMenu.data, stocks: extras, delete_ids },\n        }),\n      );\n      next();\n      return;\n    }\n\n    setLoadingBtn(true);\n    productService\n      .stocks(uuid, { extras, delete_ids })\n      .then(({ data: { stocks } }) => {\n        const newExtras = stocks?.flatMap((item) => item.extras);\n        const extraValues = newExtras.map((item) => ({\n          ...item.value,\n          stock_id: item.stock_id,\n          group_type: item.group.type,\n        }));\n        const extraGroup = newExtras?.find(\n          (item) => item.group.type === 'color',\n        );\n        const extrasCustom = {};\n        stocks.forEach((stock) => {\n          stock.extras.forEach((extra) => {\n            if (extra.extra_group_id in extrasCustom) {\n              if (\n                !extrasCustom[extra.extra_group_id].values?.some(\n                  (item) => item.value === extra.value?.id,\n                )\n              ) {\n                extrasCustom[extra.extra_group_id].values?.push({\n                  value: extra.value.id,\n                  label: extra.value?.value,\n                  stock_id: stock.id,\n                });\n              }\n            } else {\n              extrasCustom[extra.extra_group_id] = {\n                group: extra.group,\n                label: extra.group.translation?.title,\n                value: extra.extra_group_id,\n                id: extra.extra_group_id,\n                stock_id: stock.id,\n                values: [\n                  {\n                    value: extra.value.id,\n                    label: extra.value?.value,\n                    stock_id: stock.id,\n                  },\n                ],\n              };\n            }\n          });\n        });\n        dispatch(\n          setMenuData({\n            activeMenu,\n            data: {\n              ...activeMenu.data,\n              newExtras: [{ group: extraGroup?.group, values: extraValues }],\n              delete_ids,\n              stocks,\n              stocksData: stocks,\n              extras: Object.values(extrasCustom),\n            },\n          }),\n        );\n        next();\n      })\n      .finally(() => setLoadingBtn(false));\n  };\n  function fetchProduct(uuid) {\n    setLoading(true);\n    productService\n      .getById(uuid)\n      .then((res) => {\n        const additionalStocks = cartesian(\n          activeMenu?.data.extras?.map((extra) => extra.values || []),\n        );\n        const parsedAdditionalStocks = additionalStocks.map(\n          (additionalStock, i) => {\n            if (\n              additionalStock.every(\n                (itemValue) => typeof itemValue.stock_id !== 'undefined',\n              )\n            ) {\n              const selectedStock = res.data.stocks.find((stock) => {\n                return stock.extras.every((extra) => {\n                  return additionalStock.some(\n                    (addStock) => addStock.value === extra?.value?.id,\n                  );\n                });\n              });\n\n              return {\n                galleries: selectedStock?.galleries || [],\n                price: selectedStock?.price || 0,\n                quantity: selectedStock?.quantity || 0,\n                sku: activeMenu.data?.sku ?? selectedStock?.sku,\n                stock_id: selectedStock?.id,\n                tax: activeMenu?.data.tax || 0,\n                addons:\n                  selectedStock?.addons?.map((item) => ({\n                    label: item?.product?.translation?.title || item?.label,\n                    value: item?.product?.id || item?.value,\n                  })) || [],\n                ...Object.assign(\n                  {},\n                  ...additionalStock.map((extra, idx) => ({\n                    [`extras[${idx}]`]: {\n                      label: extra.label,\n                      value: extra.value,\n                    },\n                  })),\n                ),\n              };\n            }\n\n            return {\n              price: 0,\n              quantity: 0,\n              sku: activeMenu.data?.sku,\n              tax: activeMenu.data?.tax || 0,\n              addons: [],\n              ...Object.assign(\n                {},\n                ...additionalStock.map((extra, idx) => ({\n                  [`extras[${idx}]`]: {\n                    label: extra.label,\n                    value: extra.value,\n                  },\n                })),\n              ),\n            };\n          },\n        );\n\n        let defaultStock = [];\n        if (additionalStocks.length === 0 && res.data.stocks?.length !== 0) {\n          const stockWithoutExtras = res.data.stocks?.at(0);\n          defaultStock = [\n            {\n              price: stockWithoutExtras?.price || 0,\n              quantity: stockWithoutExtras?.quantity || 0,\n              sku: activeMenu.data?.sku ?? stockWithoutExtras?.sku,\n              tax: activeMenu.data?.tax || 0,\n              addons: stockWithoutExtras\n                ? stockWithoutExtras.addons?.map((item) => ({\n                    label: item?.product?.translation?.title || item?.label,\n                    value: item?.product?.id || item?.value,\n                  }))\n                : [],\n            },\n          ];\n        }\n        if (additionalStocks.length === 0 && res.data.stocks?.length === 0) {\n          defaultStock = [\n            {\n              price: undefined,\n              quantity: 0,\n              sku: activeMenu.data?.sku,\n              tax: activeMenu.data?.tax || 0,\n              addons: [],\n            },\n          ];\n        }\n        const stocks = defaultStock.concat(parsedAdditionalStocks);\n        setStockIds(res.data.stocks.map((item) => item.id));\n        form.setFieldsValue({\n          stocks,\n        });\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }\n\n  function fetchExtra(id) {\n    return extraService.getGroupById(id).then((res) =>\n      res.data.extra_values.map((item) => ({\n        label: item.value,\n        value: item.id,\n      })),\n    );\n  }\n\n  const fetchAddons = (search) => {\n    const params = {\n      search,\n      addon: 1,\n      shop_id: myShop.id,\n    };\n    return productService.getAll(params).then((res) =>\n      res.data.map((item) => ({\n        label: item?.translation?.title,\n        value: item?.id,\n      })),\n    );\n  };\n\n  useEffect(() => {\n    if (isRequest) {\n      if (location.state?.generate) {\n        const additionalStocks = cartesian(\n          activeMenu?.data.extras?.map((extra) => extra.values || []),\n        );\n\n        const parsedAdditionalStocks = additionalStocks.map((item) => {\n          if (\n            item.every((itemValue) => typeof itemValue.stock_id !== 'undefined')\n          ) {\n            const selectedStock = activeMenu.data?.actualStocks?.find(\n              (stock) => {\n                return stock.extras.every((extra) => {\n                  return item.some(\n                    (addStock) => addStock.value === extra?.value?.id,\n                  );\n                });\n              },\n            );\n            return {\n              galleries: selectedStock?.galleries || [],\n              price: selectedStock?.price || 0,\n              quantity: selectedStock?.quantity || 0,\n              stock_id: selectedStock?.id,\n              tax: activeMenu?.data.tax || 0,\n              addons:\n                selectedStock?.addons?.map((item) => ({\n                  label: item?.product?.translation?.title || item?.label,\n                  value: item?.product?.id || item?.value,\n                })) || [],\n              ...Object.assign(\n                {},\n                ...item.map((extra, idx) => ({\n                  [`extras[${idx}]`]: {\n                    label: extra.label,\n                    value: extra.value,\n                    group: activeMenu.data.extras[idx].label,\n                  },\n                })),\n              ),\n            };\n          }\n\n          return {\n            price: 0,\n            quantity: 0,\n            tax: activeMenu.data?.tax || 0,\n            sku: activeMenu?.data?.sku,\n            addons: [],\n            ...Object.assign(\n              {},\n              ...item.map((extra, idx) => ({\n                [`extras[${idx}]`]: {\n                  label: extra.label,\n                  value: extra.value,\n                },\n              })),\n            ),\n          };\n        });\n        let defaultStock = [];\n        if (\n          additionalStocks.length === 0 &&\n          activeMenu.data?.actualStocks?.length !== 0\n        ) {\n          const stockWithoutExtras = activeMenu.data.actualStocks?.at(0);\n          defaultStock = [\n            {\n              price: stockWithoutExtras?.price || 0,\n              quantity: stockWithoutExtras?.quantity || 0,\n              sku: stockWithoutExtras?.sku,\n              tax: activeMenu.data?.tax || 0,\n              addons: stockWithoutExtras\n                ? stockWithoutExtras.addons?.map((item) => ({\n                    label: item?.product?.translation?.title || item?.label,\n                    value: item?.product?.id || item?.value,\n                  }))\n                : [],\n            },\n          ];\n        }\n        if (\n          additionalStocks.length === 0 &&\n          activeMenu?.data?.actualStocks?.length === 0\n        ) {\n          defaultStock = [\n            {\n              price: undefined,\n              quantity: 0,\n              sku: activeMenu?.data.sku,\n              tax: activeMenu.data?.tax || 0,\n              addons: [],\n            },\n          ];\n        }\n        const stocks = defaultStock.concat(parsedAdditionalStocks);\n        setStockIds(activeMenu.data.actualStocks.map((item) => item.id));\n        form.setFieldsValue({\n          stocks,\n        });\n      } else {\n        const stocks = activeMenu.data.stocks?.map((stock) => ({\n          galleries: stock?.galleries || [],\n          price: stock.price,\n          quantity: stock.quantity,\n          tax: activeMenu.data.tax,\n          stock_id: stock.stock_id,\n          sku: stock.sku,\n          ...Object.assign(\n            {},\n            ...stock.ids.map((extra, idx) => ({\n              [`extras[${idx}]`]: {\n                label: extra.label,\n                value: extra.value,\n                group: extra.group,\n              },\n            })),\n          ),\n          addons: stock.addons,\n        }));\n        setStockIds(activeMenu.data?.delete_ids || []);\n\n        form.setFieldsValue({\n          stocks,\n        });\n      }\n    } else {\n      fetchProduct(uuid);\n    }\n  }, [isRequest, location.state?.generate]);\n\n  function handleSetAllPrice(value) {\n    const { stocks } = form.getFieldsValue();\n    form.setFieldsValue({ stocks: assignObject(stocks, 'price', value) });\n  }\n\n  function handleSetAllQuantity(value) {\n    const { stocks } = form.getFieldsValue();\n    form.setFieldsValue({ stocks: assignObject(stocks, 'quantity', value) });\n  }\n\n  const assignObject = (obj, key, value) =>\n    obj.map((item) => Object.assign(item, { [key]: value }));\n\n  const handleSetAllSku = (generateRandom, value) => {\n    const skuValue = generateRandom\n      ? generateRandomNumbers(randomNumbersLength)\n      : value;\n    const { stocks } = form.getFieldsValue();\n    form.setFieldsValue({\n      'set.all.sku': skuValue,\n      stock: assignObject(stocks, 'sku', skuValue),\n    });\n  };\n\n  return (\n    <Card\n      title={\n        activeMenu.data[`title[${defaultLang}]`]\n          ? `${activeMenu.data[`title[${defaultLang}]`]}`\n          : ''\n      }\n    >\n      {loading ? (\n        <Loading />\n      ) : (\n        <Form layout='vertical' form={form} onFinish={onFinish}>\n          <Divider />\n          <h2>{t('set.all.values')}</h2>\n          <Row gutter={12} align='middle'>\n            <Col span={5} style={{ marginRight: '10px' }}>\n              <Form.Item label={t('sku')} name='set.all.sku'>\n                <Input\n                  className='w-100'\n                  onChange={(e) => handleSetAllSku(false, e.target.value)}\n                />\n              </Form.Item>\n            </Col>\n            <Col>\n              <Form.Item label={' '} name='sku'>\n                <Button\n                  icon={<DeploymentUnitOutlined />}\n                  onClick={() => handleSetAllSku(true)}\n                />\n              </Form.Item>\n            </Col>\n            <Col span={4}>\n              <Form.Item\n                label={t('price')}\n                name={'set.all.price'}\n                rules={[\n                  {\n                    type: 'number',\n                    min: 0,\n                    message: t('must.be.positive.number'),\n                  },\n                ]}\n              >\n                <InputNumber className='w-100' onChange={handleSetAllPrice} />\n              </Form.Item>\n            </Col>\n            <Col span={4}>\n              <Form.Item\n                label={t('quantity')}\n                name={'set.all.quantity'}\n                rules={[\n                  {\n                    type: 'number',\n                    min: 0,\n                    message: t('must.be.positive.number'),\n                  },\n                ]}\n              >\n                <InputNumber\n                  className='w-100'\n                  onChange={handleSetAllQuantity}\n                />\n              </Form.Item>\n            </Col>\n          </Row>\n          <Form.List name='stocks'>\n            {(fields, { add, remove }) => {\n              return (\n                <div>\n                  {fields.map((field, index) => {\n                    return (\n                      <Row\n                        key={field.key}\n                        gutter={12}\n                        align='middle'\n                        style={{ flexWrap: 'nowrap', overflowX: 'auto' }}\n                        hidden={!activeMenu.data?.extras?.length && field.key}\n                      >\n                        {activeMenu.data?.extras?.map((item, idx) => (\n                          <Col key={'extra' + item.value}>\n                            <Form.Item\n                              label={item?.label}\n                              name={[index, `extras[${idx}]`]}\n                              rules={[\n                                { required: true, message: t('required') },\n                              ]}\n                            >\n                              <AsyncSelect\n                                fetchOptions={() => fetchExtra(item.value)}\n                                className='w-100'\n                                disabled\n                                style={{ minWidth: 200 }}\n                              />\n                            </Form.Item>\n                          </Col>\n                        ))}\n                        {/*<Col>*/}\n                        {/*  <Form.Item*/}\n                        {/*    label={t('addons')}*/}\n                        {/*    name={[index, 'addons']}*/}\n                        {/*    rules={[*/}\n                        {/*      { required: false, message: t('required') },*/}\n                        {/*    ]}*/}\n                        {/*  >*/}\n                        {/*    <DebounceSelect*/}\n                        {/*      mode='multiple'*/}\n                        {/*      style={{ minWidth: '300px' }}*/}\n                        {/*      fetchOptions={fetchAddons}*/}\n                        {/*      allowClear={true}*/}\n                        {/*    />*/}\n                        {/*  </Form.Item>*/}\n                        {/*</Col>*/}\n                        <Col>\n                          <Form.Item label={t('sku')} name={[index, 'sku']}>\n                            <Input\n                              className='w-100'\n                              style={{ minWidth: 200 }}\n                            />\n                          </Form.Item>\n                        </Col>\n                        <Col>\n                          <Form.Item\n                            label={t('quantity')}\n                            name={[index, 'quantity']}\n                            rules={[{ required: true, message: t('required') }]}\n                          >\n                            <InputNumber\n                              min={0}\n                              className='w-100'\n                              style={{ minWidth: 200 }}\n                            />\n                          </Form.Item>\n                        </Col>\n                        <Col>\n                          <Form.Item\n                            label={`${t('price')} (${defaultCurrency?.symbol})`}\n                            name={[index, 'price']}\n                            rules={[{ required: true, message: t('requried') }]}\n                          >\n                            <InputNumber\n                              min={0}\n                              className='w-100'\n                              style={{ minWidth: 200 }}\n                            />\n                          </Form.Item>\n                        </Col>\n                        <Col>\n                          <Form.Item label={t('tax')} name={[index, 'tax']}>\n                            <InputNumber\n                              className='w-100'\n                              disabled\n                              style={{ minWidth: 200 }}\n                              addonAfter='%'\n                            />\n                          </Form.Item>\n                          <Form.Item\n                            hidden\n                            label={t('id')}\n                            name={[index, 'stock_id']}\n                          >\n                            <InputNumber\n                              className='w-100'\n                              disabled\n                              style={{ minWidth: 200 }}\n                              addonAfter='%'\n                            />\n                          </Form.Item>\n                        </Col>{' '}\n                        <Col>\n                          <Form.Item\n                            noStyle\n                            shouldUpdate={(prevValues, nextValues) =>\n                              prevValues.stocks[field.name].price !==\n                              nextValues.stocks[field.name].price\n                            }\n                          >\n                            {({ getFieldValue }) => {\n                              const tax =\n                                getFieldValue(['stocks', field.name, 'tax']) ||\n                                0;\n\n                              const price = getFieldValue([\n                                'stocks',\n                                field.name,\n                                'price',\n                              ]);\n                              const totalPrice =\n                                tax === 0\n                                  ? price\n                                  : ((price * tax) / 100 + price).toFixed(2);\n                              return (\n                                <Form.Item\n                                  label={`${t('total.price')} (${\n                                    defaultCurrency?.symbol\n                                  })`}\n                                >\n                                  <InputNumber\n                                    min={1}\n                                    disabled\n                                    value={totalPrice}\n                                    className='w-100'\n                                    style={{ minWidth: 200 }}\n                                  />\n                                </Form.Item>\n                              );\n                            }}\n                          </Form.Item>\n                        </Col>\n                        <Col>\n                          {fields?.length > 1 ? (\n                            <Button\n                              type='primary'\n                              className='mt-2'\n                              danger\n                              icon={<DeleteOutlined />}\n                              onClick={() => {\n                                remove(field.name);\n                              }}\n                            />\n                          ) : (\n                            ''\n                          )}\n                        </Col>\n                      </Row>\n                    );\n                  })}\n                </div>\n              );\n            }}\n          </Form.List>\n          <Space className='mt-4'>\n            <Button onClick={prev}>{t('prev')}</Button>\n            <Button type='primary' htmlType='submit' loading={!!loadingBtn}>\n              {t('next')}\n            </Button>\n          </Space>\n        </Form>\n      )}\n    </Card>\n  );\n};\n\nexport default ProductStock;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}