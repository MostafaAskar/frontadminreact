{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/looks/edit.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { Form } from 'antd';\nimport LooksForm from './form';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport sellerLooksService from 'services/seller/banner';\nimport Loading from 'components/loading';\nimport { disableRefetch, setMenuData } from 'redux/slices/menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditLook() {\n  _s();\n\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    languages\n  } = useSelector(state => state.formLang, shallowEqual);\n  const {\n    id\n  } = useParams();\n  const [loading, setLoading] = useState(false);\n\n  const fetchLook = id => {\n    setLoading(true);\n    const params = {\n      type: 'look'\n    };\n    sellerLooksService.getById(id, params).then(res => {\n      var _data$translation, _data$translation2, _data$translation3, _data$translation4, _data$products, _data$galleries;\n\n      const data = res === null || res === void 0 ? void 0 : res.data;\n      const body = {\n        [`title[${data === null || data === void 0 ? void 0 : (_data$translation = data.translation) === null || _data$translation === void 0 ? void 0 : _data$translation.locale}]`]: data === null || data === void 0 ? void 0 : (_data$translation2 = data.translation) === null || _data$translation2 === void 0 ? void 0 : _data$translation2.title,\n        [`description[${data === null || data === void 0 ? void 0 : (_data$translation3 = data.translation) === null || _data$translation3 === void 0 ? void 0 : _data$translation3.locale}]`]: data === null || data === void 0 ? void 0 : (_data$translation4 = data.translation) === null || _data$translation4 === void 0 ? void 0 : _data$translation4.description,\n        products: data === null || data === void 0 ? void 0 : (_data$products = data.products) === null || _data$products === void 0 ? void 0 : _data$products.map(product => {\n          var _product$translation;\n\n          return {\n            label: product === null || product === void 0 ? void 0 : (_product$translation = product.translation) === null || _product$translation === void 0 ? void 0 : _product$translation.title,\n            value: product === null || product === void 0 ? void 0 : product.id,\n            key: product === null || product === void 0 ? void 0 : product.id\n          };\n        }),\n        image: data === null || data === void 0 ? void 0 : (_data$galleries = data.galleries) === null || _data$galleries === void 0 ? void 0 : _data$galleries.map(img => ({\n          uid: img.id,\n          name: img.path,\n          url: img.path\n        })),\n        active: Boolean(data === null || data === void 0 ? void 0 : data.active)\n      };\n      form.setFieldsValue(body);\n      dispatch(setMenuData({\n        activeMenu,\n        data: body\n      }));\n    }).finally(() => {\n      setLoading(false);\n      dispatch(disableRefetch(activeMenu));\n    });\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchLook(id);\n    }\n  }, [activeMenu.refetch]);\n\n  const handleSubmit = (values, image) => {\n    const body = {\n      type: 'look',\n      active: Number(values.active),\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description'),\n      products: values.products.map(i => i.value),\n      images: image.map(image => image.name)\n    };\n    return sellerLooksService.update(id, body);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: !loading ? /*#__PURE__*/_jsxDEV(LooksForm, {\n      form: form,\n      handleSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditLook, \"wG2CIYFi3fWFXiIL0TijKYj2/38=\", false, function () {\n  return [useDispatch, Form.useForm, useSelector, useSelector, useParams];\n});\n\n_c = EditLook;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditLook\");","map":{"version":3,"names":["React","Fragment","useEffect","useState","Form","LooksForm","getTranslationFields","shallowEqual","useSelector","useDispatch","useParams","sellerLooksService","Loading","disableRefetch","setMenuData","EditLook","dispatch","form","useForm","activeMenu","state","menu","languages","formLang","id","loading","setLoading","fetchLook","params","type","getById","then","res","data","body","translation","locale","title","description","products","map","product","label","value","key","image","galleries","img","uid","name","path","url","active","Boolean","setFieldsValue","finally","refetch","handleSubmit","values","Number","i","images","update"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/looks/edit.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\nimport { Form } from 'antd';\nimport LooksForm from './form';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport sellerLooksService from 'services/seller/banner';\nimport Loading from 'components/loading';\nimport { disableRefetch, setMenuData } from 'redux/slices/menu';\nexport default function EditLook() {\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n  const { id } = useParams();\n\n  const [loading, setLoading] = useState(false);\n\n  const fetchLook = (id) => {\n    setLoading(true);\n\n    const params = {\n      type: 'look',\n    };\n\n    sellerLooksService\n      .getById(id, params)\n      .then((res) => {\n        const data = res?.data;\n        const body = {\n          [`title[${data?.translation?.locale}]`]: data?.translation?.title,\n          [`description[${data?.translation?.locale}]`]:\n            data?.translation?.description,\n          products: data?.products?.map((product) => ({\n            label: product?.translation?.title,\n            value: product?.id,\n            key: product?.id,\n          })),\n          image: data?.galleries?.map((img) => ({\n            uid: img.id,\n            name: img.path,\n            url: img.path,\n          })),\n          active: Boolean(data?.active),\n        };\n\n        form.setFieldsValue(body);\n        dispatch(setMenuData({ activeMenu, data: body }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchLook(id);\n    }\n  }, [activeMenu.refetch]);\n\n  const handleSubmit = (values, image) => {\n    const body = {\n      type: 'look',\n      active: Number(values.active),\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description'),\n      products: values.products.map((i) => i.value),\n      images: image.map((image) => image.name),\n    };\n\n    return sellerLooksService.update(id, body);\n  };\n\n  return (\n    <Fragment>\n      {!loading ? (\n        <LooksForm form={form} handleSubmit={handleSubmit} />\n      ) : (\n        <Loading />\n      )}\n    </Fragment>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}