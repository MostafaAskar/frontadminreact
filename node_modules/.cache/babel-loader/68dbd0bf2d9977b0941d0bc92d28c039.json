{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/menu-categories/category-edit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Card, Form, Input, Modal } from 'antd';\nimport { toast } from 'react-toastify';\nimport { useParams } from 'react-router-dom';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch } from '../../redux/slices/menu';\nimport categoryService from '../../services/category';\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from 'components/language-list';\nimport { setRefetch } from 'redux/slices/menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MenuCategoryEdit = _ref => {\n  _s();\n\n  let {\n    isModalOpen,\n    handleCancel\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const {\n    defaultLang,\n    languages\n  } = useSelector(state => state.formLang, shallowEqual);\n  const uuid = isModalOpen === null || isModalOpen === void 0 ? void 0 : isModalOpen.uuid;\n\n  function getLanguageFields(data) {\n    if (!data) {\n      return {};\n    }\n\n    const {\n      translations\n    } = data;\n    const result = languages.map(item => {\n      var _translations$find;\n\n      return {\n        [`title[${item.locale}]`]: (_translations$find = translations.find(el => el.locale === item.locale)) === null || _translations$find === void 0 ? void 0 : _translations$find.title\n      };\n    });\n    return Object.assign({}, ...result);\n  }\n\n  const getCategory = alias => {\n    setLoading(true);\n    categoryService.getById(alias).then(res => {\n      let category = res.data;\n      const body = { ...getLanguageFields(category)\n      };\n      form.setFieldsValue(body);\n    }).finally(() => {\n      setLoading(false);\n      dispatch(disableRefetch(activeMenu));\n    });\n  };\n\n  const onFinish = values => {\n    setLoadingBtn(true);\n    const body = { ...values,\n      type: 'menu'\n    };\n    console.log('isModalOpen => ', isModalOpen);\n    categoryService.update(uuid, body).then(() => {\n      toast.success(t('successfully.updated'));\n      handleCancel();\n      dispatch(setRefetch(activeMenu));\n    }).catch(err => console.error(err.response.data.params)).finally(() => setLoadingBtn(false));\n  };\n\n  useEffect(() => {\n    if (isModalOpen) getCategory(isModalOpen.uuid);\n  }, [isModalOpen]);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    visible: isModalOpen,\n    title: t('edit.menu.category'),\n    onCancel: handleCancel,\n    footer: [/*#__PURE__*/_jsxDEV(Button, {\n      loading: loadingBtn,\n      type: \"primary\",\n      onClick: () => form.submit(),\n      children: t('save')\n    }, 'saveBtn', false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"default\",\n      onClick: handleCancel,\n      children: t('cancel')\n    }, 'cancelBtn', false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this)],\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      extra: /*#__PURE__*/_jsxDEV(LanguageList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 20\n      }, this),\n      loading: loading,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        name: \"basic\",\n        layout: \"vertical\",\n        onFinish: onFinish,\n        initialValues: { ...activeMenu.data\n        },\n        form: form,\n        children: languages.map((item, index) => /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: t('name'),\n          name: `title[${item.locale}]`,\n          rules: [{\n            required: item.locale === defaultLang,\n            message: t('required')\n          }],\n          hidden: item.locale !== defaultLang,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: t('name'),\n            className: \"w-100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this)\n        }, item.title + index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MenuCategoryEdit, \"yMpLtSNeKOcDsz6fbBtc5iGkk1c=\", false, function () {\n  return [useTranslation, useDispatch, useSelector, Form.useForm, useSelector];\n});\n\n_c = MenuCategoryEdit;\nexport default MenuCategoryEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"MenuCategoryEdit\");","map":{"version":3,"names":["React","useState","useEffect","Button","Card","Form","Input","Modal","toast","useParams","shallowEqual","useDispatch","useSelector","disableRefetch","categoryService","useTranslation","LanguageList","setRefetch","MenuCategoryEdit","isModalOpen","handleCancel","t","dispatch","activeMenu","state","menu","loading","setLoading","form","useForm","loadingBtn","setLoadingBtn","defaultLang","languages","formLang","uuid","getLanguageFields","data","translations","result","map","item","locale","find","el","title","Object","assign","getCategory","alias","getById","then","res","category","body","setFieldsValue","finally","onFinish","values","type","console","log","update","success","catch","err","error","response","params","submit","index","required","message"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/menu-categories/category-edit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, Card, Form, Input, Modal } from 'antd';\nimport { toast } from 'react-toastify';\nimport { useParams } from 'react-router-dom';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch } from '../../redux/slices/menu';\nimport categoryService from '../../services/category';\nimport { useTranslation } from 'react-i18next';\nimport LanguageList from 'components/language-list';\nimport { setRefetch } from 'redux/slices/menu';\n\nconst MenuCategoryEdit = ({ isModalOpen, handleCancel }) => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const { defaultLang, languages } = useSelector(\n    (state) => state.formLang,\n    shallowEqual\n  );\n\n  const uuid = isModalOpen?.uuid;\n\n  function getLanguageFields(data) {\n    if (!data) {\n      return {};\n    }\n    const { translations } = data;\n    const result = languages.map((item) => ({\n      [`title[${item.locale}]`]: translations.find(\n        (el) => el.locale === item.locale\n      )?.title,\n    }));\n    return Object.assign({}, ...result);\n  }\n\n  const getCategory = (alias) => {\n    setLoading(true);\n    categoryService\n      .getById(alias)\n      .then((res) => {\n        let category = res.data;\n        const body = {\n          ...getLanguageFields(category),\n        };\n        form.setFieldsValue(body);\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  const onFinish = (values) => {\n    setLoadingBtn(true);\n    const body = {\n      ...values,\n      type: 'menu',\n    };\n\n    console.log('isModalOpen => ', isModalOpen);\n\n    categoryService\n      .update(uuid, body)\n      .then(() => {\n        toast.success(t('successfully.updated'));\n        handleCancel();\n        dispatch(setRefetch(activeMenu));\n      })\n      .catch((err) => console.error(err.response.data.params))\n      .finally(() => setLoadingBtn(false));\n  };\n\n  useEffect(() => {\n    if (isModalOpen) getCategory(isModalOpen.uuid);\n  }, [isModalOpen]);\n\n  return (\n    <Modal\n      visible={isModalOpen}\n      title={t('edit.menu.category')}\n      onCancel={handleCancel}\n      footer={[\n        <Button\n          loading={loadingBtn}\n          type='primary'\n          key={'saveBtn'}\n          onClick={() => form.submit()}\n        >\n          {t('save')}\n        </Button>,\n        <Button type='default' key={'cancelBtn'} onClick={handleCancel}>\n          {t('cancel')}\n        </Button>,\n      ]}\n    >\n      <Card extra={<LanguageList />} loading={loading}>\n        <Form\n          name='basic'\n          layout='vertical'\n          onFinish={onFinish}\n          initialValues={{\n            ...activeMenu.data,\n          }}\n          form={form}\n        >\n          {languages.map((item, index) => (\n            <Form.Item\n              key={item.title + index}\n              label={t('name')}\n              name={`title[${item.locale}]`}\n              rules={[\n                {\n                  required: item.locale === defaultLang,\n                  message: t('required'),\n                },\n              ]}\n              hidden={item.locale !== defaultLang}\n            >\n              <Input placeholder={t('name')} className='w-100' />\n            </Form.Item>\n          ))}\n        </Form>\n      </Card>\n    </Modal>\n  );\n};\nexport default MenuCategoryEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}