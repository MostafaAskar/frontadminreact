{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/dashboard/salesChart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo } from 'react';\nimport { Badge, Card, Select, Spin } from 'antd';\nimport ChartWidget from '../../components/chart-widget';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { COLORS } from '../../constants/ChartConstant';\nimport moment from 'moment';\nimport { fetchOrderSales, fetchSellerOrderSales, filterOrderSales } from '../../redux/slices/statistics/orderSales';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SalesChart() {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const {\n    defaultCurrency\n  } = useSelector(state => state.currency, shallowEqual);\n  const {\n    sales,\n    params,\n    loading\n  } = useSelector(state => state.orderSales, shallowEqual);\n  const {\n    role\n  } = useSelector(state => state.auth.user, shallowEqual);\n  const {\n    direction\n  } = useSelector(state => state.theme.theme, shallowEqual);\n  const categories = useMemo(() => sales.map(item => moment(item.time).format('D MMM')), [sales]);\n  const chartData = useMemo(() => {\n    return [{\n      name: t('sales'),\n      data: (sales === null || sales === void 0 ? void 0 : sales.map(item => item.total_price.toFixed(2))) || []\n    }];\n  }, [sales]);\n\n  const handleChange = value => {\n    const payload = {\n      time: value\n    };\n    dispatch(filterOrderSales(payload));\n\n    switch (role) {\n      case 'admin':\n        dispatch(fetchOrderSales(payload));\n        break;\n\n      case 'seller':\n        dispatch(fetchSellerOrderSales(payload));\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"h-100\",\n    title: t('sales'),\n    extra: /*#__PURE__*/_jsxDEV(Select, {\n      value: params.time,\n      size: \"small\",\n      style: {\n        minWidth: 110\n      },\n      onSelect: handleChange,\n      defaultValue: \"subMonth\",\n      children: [/*#__PURE__*/_jsxDEV(Select.Option, {\n        value: \"subWeek\",\n        children: t('this.week')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n        value: \"subMonth\",\n        children: t('this.month')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n        value: \"subYear\",\n        children: t('this.year')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this),\n    children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mr-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-weight-bold mb-1\",\n          children: numberToPrice(sales.reduce((total, item) => total += item.total_price, 0), defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.symbol, defaultCurrency === null || defaultCurrency === void 0 ? void 0 : defaultCurrency.position)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(Badge, {\n            color: COLORS[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), t('total.sales.amount')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ChartWidget, {\n        card: false,\n        type: \"area\",\n        series: chartData,\n        xAxis: categories,\n        height: 280,\n        customOptions: {\n          colors: COLORS,\n          legend: {\n            show: false\n          },\n          stroke: {\n            width: 2.5,\n            curve: 'smooth'\n          }\n        },\n        direction: direction\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SalesChart, \"DCLOGM3ZAt0wXW4lUTrhD4gqRp4=\", false, function () {\n  return [useTranslation, useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = SalesChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"SalesChart\");","map":{"version":3,"names":["React","useMemo","Badge","Card","Select","Spin","ChartWidget","numberToPrice","shallowEqual","useDispatch","useSelector","COLORS","moment","fetchOrderSales","fetchSellerOrderSales","filterOrderSales","useTranslation","SalesChart","t","dispatch","defaultCurrency","state","currency","sales","params","loading","orderSales","role","auth","user","direction","theme","categories","map","item","time","format","chartData","name","data","total_price","toFixed","handleChange","value","payload","minWidth","reduce","total","symbol","position","colors","legend","show","stroke","width","curve"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/dashboard/salesChart.js"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { Badge, Card, Select, Spin } from 'antd';\nimport ChartWidget from '../../components/chart-widget';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { COLORS } from '../../constants/ChartConstant';\nimport moment from 'moment';\nimport {\n  fetchOrderSales,\n  fetchSellerOrderSales,\n  filterOrderSales,\n} from '../../redux/slices/statistics/orderSales';\nimport { useTranslation } from 'react-i18next';\n\nexport default function SalesChart() {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { defaultCurrency } = useSelector(\n    (state) => state.currency,\n    shallowEqual,\n  );\n  const { sales, params, loading } = useSelector(\n    (state) => state.orderSales,\n    shallowEqual,\n  );\n\n  const { role } = useSelector((state) => state.auth.user, shallowEqual);\n  const { direction } = useSelector((state) => state.theme.theme, shallowEqual);\n  const categories = useMemo(\n    () => sales.map((item) => moment(item.time).format('D MMM')),\n    [sales],\n  );\n\n  const chartData = useMemo(() => {\n    return [\n      {\n        name: t('sales'),\n        data: sales?.map((item) => item.total_price.toFixed(2)) || [],\n      },\n    ];\n  }, [sales]);\n\n  const handleChange = (value) => {\n    const payload = { time: value };\n    dispatch(filterOrderSales(payload));\n    switch (role) {\n      case 'admin':\n        dispatch(fetchOrderSales(payload));\n        break;\n      case 'seller':\n        dispatch(fetchSellerOrderSales(payload));\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return (\n    <Card\n      className='h-100'\n      title={t('sales')}\n      extra={\n        <Select\n          value={params.time}\n          size='small'\n          style={{ minWidth: 110 }}\n          onSelect={handleChange}\n          defaultValue='subMonth'\n        >\n          <Select.Option value='subWeek'>{t('this.week')}</Select.Option>\n          <Select.Option value='subMonth'>{t('this.month')}</Select.Option>\n          <Select.Option value='subYear'>{t('this.year')}</Select.Option>\n        </Select>\n      }\n    >\n      {loading && (\n        <div className='loader'>\n          <Spin />\n        </div>\n      )}\n      <div className='d-flex'>\n        <div className='mr-5'>\n          <h2 className='font-weight-bold mb-1'>\n            {numberToPrice(\n              sales.reduce((total, item) => (total += item.total_price), 0),\n              defaultCurrency?.symbol,\n              defaultCurrency?.position,\n            )}\n          </h2>\n          <p>\n            <Badge color={COLORS[0]} />\n            {t('total.sales.amount')}\n          </p>\n        </div>\n      </div>\n      <div>\n        <ChartWidget\n          card={false}\n          type='area'\n          series={chartData}\n          xAxis={categories}\n          height={280}\n          customOptions={{\n            colors: COLORS,\n            legend: {\n              show: false,\n            },\n            stroke: {\n              width: 2.5,\n              curve: 'smooth',\n            },\n          }}\n          direction={direction}\n        />\n      </div>\n    </Card>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}