{"ast":null,"code":"import React from'react';import{Card,Col,Image,Row,Select,Space,Spin}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import getImage from'../../helpers/getImage';import{fetchSellerTopProducts,fetchTopProducts,filterTopProducts}from'../../redux/slices/statistics/topProducts';import{useTranslation}from'react-i18next';import RiveResult from'../../components/rive-result';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TopProducts(){const{t}=useTranslation();const dispatch=useDispatch();const{topProducts,loading,params}=useSelector(state=>state.topProducts,shallowEqual);const{role}=useSelector(state=>state.auth.user,shallowEqual);const handleChange=(item,value)=>{const payload={...params,[item]:value};dispatch(filterTopProducts(payload));switch(role){case'admin':dispatch(fetchTopProducts(payload));break;case'seller':dispatch(fetchSellerTopProducts(payload));break;default:break;}};return/*#__PURE__*/_jsxs(Card,{title:t('top.selled.products'),extra:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(Select,{value:params.perPage,size:\"small\",style:{minWidth:110},onSelect:value=>handleChange('perPage',value),children:[/*#__PURE__*/_jsx(Select.Option,{value:5,children:`5 / ${t('page')}`}),/*#__PURE__*/_jsx(Select.Option,{value:10,children:`10 / ${t('page')}`}),/*#__PURE__*/_jsx(Select.Option,{value:50,children:`50 / ${t('page')}`}),/*#__PURE__*/_jsx(Select.Option,{value:100,children:`100 / ${t('page')}`})]}),/*#__PURE__*/_jsxs(Select,{value:params.time,size:\"small\",style:{minWidth:110},onSelect:value=>handleChange('time',value),defaultValue:\"subMonth\",children:[/*#__PURE__*/_jsx(Select.Option,{value:\"subWeek\",children:t('this.week')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subMonth\",children:t('this.month')}),/*#__PURE__*/_jsx(Select.Option,{value:\"subYear\",children:t('this.year')})]})]}),className:\"h-100\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})}),/*#__PURE__*/_jsx(\"div\",{style:{overflowY:'auto',maxHeight:370},children:topProducts!==null&&topProducts!==void 0&&topProducts.length?topProducts.map((item,idx)=>{var _item$product,_item$product2,_item$product2$transl,_item$count;return/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 py-3 flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex avatar\",children:[/*#__PURE__*/_jsx(Image,{src:getImage(item===null||item===void 0?void 0:(_item$product=item.product)===null||_item$product===void 0?void 0:_item$product.img),width:40,height:40,preview:false,style:{borderRadius:10}}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-2 avatar-text\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"title\",children:item===null||item===void 0?void 0:(_item$product2=item.product)===null||_item$product2===void 0?void 0:(_item$product2$transl=_item$product2.translation)===null||_item$product2$transl===void 0?void 0:_item$product2$transl.title})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mr-3 text-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:t('sales')}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-0 h5 font-weight-bold\",children:(_item$count=item===null||item===void 0?void 0:item.count)!==null&&_item$count!==void 0?_item$count:0})]})})]},idx);}):/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(RiveResult,{id:\"nosell\"})})})})]});}","map":null,"metadata":{},"sourceType":"module"}