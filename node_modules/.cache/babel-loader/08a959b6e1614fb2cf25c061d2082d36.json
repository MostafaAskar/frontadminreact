{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/pos-system/components/filter.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Card, Col, Row } from 'antd';\nimport { DebounceSelect } from '../../../../components/search';\nimport brandService from '../../../../services/rest/brand';\nimport categoryService from '../../../../services/rest/category';\nimport useDidUpdate from '../../../../helpers/useDidUpdate';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { fetchSellerProducts } from '../../../../redux/slices/product';\nimport SearchInput from '../../../../components/search-input';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Filter = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const [brand, setBrand] = useState(null);\n  const [category, setCategory] = useState(null);\n  const [search, setSearch] = useState(null);\n  const {\n    myShop\n  } = useSelector(state => state.myShop, shallowEqual);\n\n  async function fetchUserBrand(username) {\n    const params = {\n      search: username.length === 0 ? null : username\n    };\n    return brandService.getAll(params).then(res => res.data.map(item => {\n      var _item$title;\n\n      return {\n        label: (_item$title = item === null || item === void 0 ? void 0 : item.title) !== null && _item$title !== void 0 ? _item$title : t('no.name'),\n        value: item === null || item === void 0 ? void 0 : item.id,\n        key: item === null || item === void 0 ? void 0 : item.id\n      };\n    }));\n  }\n\n  async function fetchUserCategory(search) {\n    const params = {\n      search,\n      type: 'main'\n    };\n    if (!search) params === null || params === void 0 ? true : delete params.search;\n    return categoryService.search(params).then(res => res.data.map(item => {\n      var _item$translation$tit, _item$translation;\n\n      return {\n        label: (_item$translation$tit = !!(item !== null && item !== void 0 && (_item$translation = item.translation) !== null && _item$translation !== void 0 && _item$translation.title)) !== null && _item$translation$tit !== void 0 ? _item$translation$tit : t('no.name'),\n        value: item === null || item === void 0 ? void 0 : item.id,\n        key: item === null || item === void 0 ? void 0 : item.id\n      };\n    }));\n  }\n\n  useDidUpdate(() => {\n    const params = {\n      brand_id: brand === null || brand === void 0 ? void 0 : brand.value,\n      category_id: category === null || category === void 0 ? void 0 : category.value,\n      search,\n      active: 1,\n      status: 'published',\n      shop_id: myShop === null || myShop === void 0 ? void 0 : myShop.id\n    };\n    dispatch(fetchSellerProducts(params));\n  }, [brand, category, search]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      gutter: 12,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(SearchInput, {\n          className: \"w-100\",\n          placeholder: t('search'),\n          handleChange: setSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: myShop.type === 'shop' ? 6 : 12,\n        children: /*#__PURE__*/_jsxDEV(DebounceSelect, {\n          className: \"w-100\",\n          placeholder: t('select.category'),\n          fetchOptions: fetchUserCategory,\n          onChange: value => setCategory(value),\n          value: category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), myShop.type === 'shop' ? /*#__PURE__*/_jsxDEV(Col, {\n        span: 6,\n        children: /*#__PURE__*/_jsxDEV(DebounceSelect, {\n          className: \"w-100\",\n          placeholder: t('select.brand'),\n          fetchOptions: fetchUserBrand,\n          onChange: value => setBrand(value),\n          value: brand\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this) : undefined]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Filter, \"SdxgxnF32YzyPYi9udRO0viLufw=\", false, function () {\n  return [useTranslation, useDispatch, useSelector, useDidUpdate];\n});\n\n_c = Filter;\nexport default Filter;\n\nvar _c;\n\n$RefreshReg$(_c, \"Filter\");","map":{"version":3,"names":["React","useState","Card","Col","Row","DebounceSelect","brandService","categoryService","useDidUpdate","shallowEqual","useDispatch","useSelector","fetchSellerProducts","SearchInput","useTranslation","Filter","t","dispatch","brand","setBrand","category","setCategory","search","setSearch","myShop","state","fetchUserBrand","username","params","length","getAll","then","res","data","map","item","label","title","value","id","key","fetchUserCategory","type","translation","brand_id","category_id","active","status","shop_id","undefined"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/seller-views/pos-system/components/filter.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Card, Col, Row } from 'antd';\nimport { DebounceSelect } from '../../../../components/search';\nimport brandService from '../../../../services/rest/brand';\nimport categoryService from '../../../../services/rest/category';\nimport useDidUpdate from '../../../../helpers/useDidUpdate';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { fetchSellerProducts } from '../../../../redux/slices/product';\nimport SearchInput from '../../../../components/search-input';\nimport { useTranslation } from 'react-i18next';\n\nconst Filter = () => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const [brand, setBrand] = useState(null);\n  const [category, setCategory] = useState(null);\n  const [search, setSearch] = useState(null);\n  const { myShop } = useSelector((state) => state.myShop, shallowEqual);\n\n  async function fetchUserBrand(username) {\n    const params = {\n      search: username.length === 0 ? null : username,\n    };\n    return brandService.getAll(params).then((res) =>\n      res.data.map((item) => ({\n        label: item?.title ?? t('no.name'),\n        value: item?.id,\n        key: item?.id,\n      })),\n    );\n  }\n\n  async function fetchUserCategory(search) {\n    const params = {\n      search,\n      type: 'main',\n    };\n\n    if (!search) delete params?.search;\n\n    return categoryService.search(params).then((res) =>\n      res.data.map((item) => ({\n        label: !!item?.translation?.title ?? t('no.name'),\n        value: item?.id,\n        key: item?.id,\n      })),\n    );\n  }\n\n  useDidUpdate(() => {\n    const params = {\n      brand_id: brand?.value,\n      category_id: category?.value,\n      search,\n      active: 1,\n      status: 'published',\n      shop_id: myShop?.id,\n    };\n    dispatch(fetchSellerProducts(params));\n  }, [brand, category, search]);\n\n  return (\n    <Card>\n      <Row gutter={12}>\n        <Col span={12}>\n          <SearchInput\n            className='w-100'\n            placeholder={t('search')}\n            handleChange={setSearch}\n          />\n        </Col>\n        <Col span={myShop.type === 'shop' ? 6 : 12}>\n          <DebounceSelect\n            className='w-100'\n            placeholder={t('select.category')}\n            fetchOptions={fetchUserCategory}\n            onChange={(value) => setCategory(value)}\n            value={category}\n          />\n        </Col>\n        {myShop.type === 'shop' ? (\n          <Col span={6}>\n            <DebounceSelect\n              className='w-100'\n              placeholder={t('select.brand')}\n              fetchOptions={fetchUserBrand}\n              onChange={(value) => setBrand(value)}\n              value={brand}\n            />\n          </Col>\n        ) : undefined}\n      </Row>\n    </Card>\n  );\n};\nexport default Filter;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}