{"ast":null,"code":"import React,{useState}from'react';import{Card,Col,Row}from'antd';import{DebounceSelect}from'../../../../components/search';import brandService from'../../../../services/rest/brand';import categoryService from'../../../../services/rest/category';import useDidUpdate from'../../../../helpers/useDidUpdate';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{fetchSellerProducts}from'../../../../redux/slices/product';import SearchInput from'../../../../components/search-input';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Filter=()=>{const{t}=useTranslation();const dispatch=useDispatch();const[brand,setBrand]=useState(null);const[category,setCategory]=useState(null);const[search,setSearch]=useState(null);const{myShop}=useSelector(state=>state.myShop,shallowEqual);async function fetchUserBrand(username){const params={search:username.length===0?null:username};return brandService.getAll(params).then(res=>res.data.map(item=>{var _item$title;return{label:(_item$title=item===null||item===void 0?void 0:item.title)!==null&&_item$title!==void 0?_item$title:t('no.name'),value:item===null||item===void 0?void 0:item.id,key:item===null||item===void 0?void 0:item.id};}));}async function fetchUserCategory(search){const params={search,type:'main'};if(!search)params===null||params===void 0?true:delete params.search;return categoryService.search(params).then(res=>res.data.map(item=>{var _item$translation$tit,_item$translation;return{label:(_item$translation$tit=!!(item!==null&&item!==void 0&&(_item$translation=item.translation)!==null&&_item$translation!==void 0&&_item$translation.title))!==null&&_item$translation$tit!==void 0?_item$translation$tit:t('no.name'),value:item===null||item===void 0?void 0:item.id,key:item===null||item===void 0?void 0:item.id};}));}useDidUpdate(()=>{const params={brand_id:brand===null||brand===void 0?void 0:brand.value,category_id:category===null||category===void 0?void 0:category.value,search,active:1,status:'published',shop_id:myShop===null||myShop===void 0?void 0:myShop.id};dispatch(fetchSellerProducts(params));},[brand,category,search]);return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(SearchInput,{className:\"w-100\",placeholder:t('search'),handleChange:setSearch})}),/*#__PURE__*/_jsx(Col,{span:myShop.type==='shop'?6:12,children:/*#__PURE__*/_jsx(DebounceSelect,{className:\"w-100\",placeholder:t('select.category'),fetchOptions:fetchUserCategory,onChange:value=>setCategory(value),value:category})}),myShop.type==='shop'?/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(DebounceSelect,{className:\"w-100\",placeholder:t('select.brand'),fetchOptions:fetchUserBrand,onChange:value=>setBrand(value),value:brand})}):undefined]})});};export default Filter;","map":null,"metadata":{},"sourceType":"module"}