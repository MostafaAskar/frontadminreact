{"ast":null,"code":"import React,{useState}from'react';import{Tabs,Modal,Image}from'antd';import UploadMedia from'./upload-media';import{DeleteOutlined,PlusOutlined}from'@ant-design/icons';import getImage from'helpers/getImage';import ImageGallery from'../image-gallery';import{t}from'i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const MediaUpload=_ref=>{let{imageList=[],setImageList,form,type,multiple=true,name,disabled,text='upload'}=_ref;const[isModalOpen,setIsModalOpen]=useState(false);const[loadingBtn,setLoadingBtn]=useState(false);const[fileList,setFileList]=useState([]);const showModal=()=>{setIsModalOpen(true);};const handleCancel=()=>{setIsModalOpen(false);setLoadingBtn(false);setFileList([]);};const removeImg=path=>{const nextArray=imageList.filter(item=>item!==path);form.setFieldsValue({images:nextArray});setImageList(nextArray);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"media-upload-wrapper\",children:[imageList===null||imageList===void 0?void 0:imageList.filter(item=>!(item!==null&&item!==void 0&&item.isVideo)).map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"image-wrapper\",onClick:()=>disabled?undefined:removeImg(item),children:[/*#__PURE__*/_jsx(Image,{preview:false,src:getImage(item===null||item===void 0?void 0:item.name),className:\"images\",alt:'images'}),/*#__PURE__*/_jsx(DeleteOutlined,{color:\"white\",hidden:disabled})]},idx)),(multiple||!imageList.length)&&/*#__PURE__*/_jsxs(\"div\",{className:\"media-upload\",onClick:showModal,children:[/*#__PURE__*/_jsx(PlusOutlined,{}),\" \",/*#__PURE__*/_jsx(\"span\",{children:t(text)})]})]}),/*#__PURE__*/_jsx(Modal,{onCancel:handleCancel,maskClosable:true,visible:isModalOpen,footer:false,width:'80%',children:/*#__PURE__*/_jsxs(Tabs,{children:[/*#__PURE__*/_jsx(Tabs.TabPane,{tab:\"Media files\",children:/*#__PURE__*/_jsx(UploadMedia,{form:form,setImageList:setImageList,imageList:imageList,setIsModalOpen:setIsModalOpen,name:name})},'item-1'),/*#__PURE__*/_jsx(Tabs.TabPane,{tab:\"Upload media\",className:\"upload-media\",children:/*#__PURE__*/_jsx(ImageGallery,{type:type,form:form,setFileList:setImageList,fileList:imageList,multiple:multiple,loadingBtn:loadingBtn,setLoadingBtn:setLoadingBtn,imageList:fileList,setImageList:setFileList,handleClose:handleCancel})},'item-2')]})})]});};export default MediaUpload;","map":null,"metadata":{},"sourceType":"module"}