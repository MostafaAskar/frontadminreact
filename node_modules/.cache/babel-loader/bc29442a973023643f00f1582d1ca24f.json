{"ast":null,"code":"import React,{useState}from'react';import{Menu,Dropdown,Modal}from'antd';import{EditOutlined,LogoutOutlined}from'@ant-design/icons';import getAvatar from'helpers/getAvatar';import{useTranslation}from'react-i18next';import UserModal from'./user-modal';import{batch,shallowEqual,useSelector,useDispatch}from'react-redux';import{clearUser}from'redux/slices/auth';import{clearMenu}from'redux/slices/menu';import{setCurrentChat}from'redux/slices/chat';import{useNavigate}from'react-router-dom';import authService from'services/auth';import{clearBags,clearCart,clearCartShops}from'redux/slices/cart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function NavProfile(_ref){let{user}=_ref;const{t}=useTranslation();const dispatch=useDispatch();const navigate=useNavigate();const[isModalVisible,setIsModalVisible]=useState(false);const[userModal,setUserModal]=useState(false);const showModal=()=>setIsModalVisible(true);const handleCancel=()=>setIsModalVisible(false);const{firebaseToken}=useSelector(state=>state.auth,shallowEqual);const handleOk=()=>{authService.logout({token:firebaseToken}).then(res=>{batch(()=>{dispatch(clearUser());dispatch(clearMenu());dispatch(setCurrentChat(null));dispatch(clearCart());dispatch(clearCartShops());dispatch(clearBags());});setIsModalVisible(false);localStorage.removeItem('token');navigate('/login');});};const profileMenu=/*#__PURE__*/_jsxs(Menu,{children:[/*#__PURE__*/_jsx(Menu.Item,{onClick:e=>setUserModal(true),icon:/*#__PURE__*/_jsx(EditOutlined,{}),children:t('edit.profile')},'edit.profile'),/*#__PURE__*/_jsx(Menu.Item,{onClick:e=>showModal(),icon:/*#__PURE__*/_jsx(LogoutOutlined,{}),children:t('logout')},'logout')]});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Dropdown,{placement:\"bottom\",overlay:profileMenu,trigger:['click'],children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-brand cursor-pointer\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"sidebar-logo\",src:getAvatar(user.img),alt:user.fullName}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-brand-text\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"user-name fw-bold\",children:user.fullName}),/*#__PURE__*/_jsx(\"h6\",{className:\"user-status\",children:user.role})]})]})}),/*#__PURE__*/_jsxs(Modal,{visible:isModalVisible,onOk:handleOk,onCancel:handleCancel,centered:true,children:[/*#__PURE__*/_jsx(LogoutOutlined,{style:{fontSize:'25px',color:'#08c'},theme:\"primary\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:t('leave.site')})]}),userModal&&/*#__PURE__*/_jsx(UserModal,{visible:userModal,handleCancel:()=>setUserModal(false)})]});}","map":null,"metadata":{},"sourceType":"module"}