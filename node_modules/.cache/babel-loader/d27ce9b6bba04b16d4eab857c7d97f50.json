{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/shops/user.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Col, Form, Input, InputNumber, Row, Space } from 'antd';\nimport { useNavigate } from 'react-router-dom';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport userService from '../../services/user';\nimport { toast } from 'react-toastify';\nimport { removeFromMenu } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport Loading from '../../components/loading';\nimport ShopUserForm from 'components/forms/shop-user-form';\nimport { fetchShops } from '../../redux/slices/shop';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function UserEdit(_ref) {\n  _s();\n\n  let {\n    prev\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [error, setError] = useState(null);\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n\n  const showUserData = uuid => {\n    setLoading(true);\n    userService.getById(uuid).then(res => {\n      const data = res.data;\n      form.setFieldsValue({\n        firstname: data.firstname,\n        lastname: data.lastname,\n        email: data.email,\n        phone: data.phone,\n        password_confirmation: data.password_confirmation,\n        password: data.password\n      });\n    }).finally(() => setLoading(false));\n  };\n\n  const onFinish = values => {\n    var _activeMenu$data, _activeMenu$data$sell;\n\n    setLoadingBtn(true);\n    const body = {\n      firstname: values.firstname,\n      lastname: values.lastname,\n      email: values.email,\n      phone: values.phone,\n      password_confirmation: values.password_confirmation,\n      password: values.password\n    };\n    const nextUrl = 'shops';\n    userService.update(activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data = activeMenu.data) === null || _activeMenu$data === void 0 ? void 0 : (_activeMenu$data$sell = _activeMenu$data.seller) === null || _activeMenu$data$sell === void 0 ? void 0 : _activeMenu$data$sell.uuid, body).then(() => {\n      toast.success(t('successfully.updated'));\n      navigate(`/${nextUrl}`);\n      dispatch(fetchShops({\n        perPage: 10,\n        page: 1\n      }));\n      dispatch(removeFromMenu({ ...activeMenu,\n        nextUrl\n      }));\n    }).catch(err => setError(err.response.data.params)).finally(() => setLoadingBtn(false));\n  };\n\n  useEffect(() => {\n    if (activeMenu !== null && activeMenu !== void 0 && activeMenu.data.seller) {\n      var _activeMenu$data2, _activeMenu$data2$sel;\n\n      showUserData(activeMenu === null || activeMenu === void 0 ? void 0 : (_activeMenu$data2 = activeMenu.data) === null || _activeMenu$data2 === void 0 ? void 0 : (_activeMenu$data2$sel = _activeMenu$data2.seller) === null || _activeMenu$data2$sel === void 0 ? void 0 : _activeMenu$data2$sel.uuid);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !loading ? /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      layout: \"vertical\",\n      initialValues: { ...activeMenu.data\n      },\n      onFinish: onFinish,\n      className: \"py-4\",\n      children: /*#__PURE__*/_jsxDEV(ShopUserForm, {\n        error: error,\n        loadingBtn: loadingBtn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(UserEdit, \"rzf83YKbQfcU3Bi4nG/j6BYSyVc=\", false, function () {\n  return [useTranslation, useSelector, useDispatch, useNavigate, Form.useForm];\n});\n\n_c = UserEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserEdit\");","map":{"version":3,"names":["React","useState","useEffect","Button","Col","Form","Input","InputNumber","Row","Space","useNavigate","shallowEqual","useDispatch","useSelector","userService","toast","removeFromMenu","useTranslation","Loading","ShopUserForm","fetchShops","UserEdit","prev","t","activeMenu","state","menu","dispatch","navigate","error","setError","loadingBtn","setLoadingBtn","loading","setLoading","form","useForm","showUserData","uuid","getById","then","res","data","setFieldsValue","firstname","lastname","email","phone","password_confirmation","password","finally","onFinish","values","body","nextUrl","update","seller","success","perPage","page","catch","err","response","params"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/shops/user.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, Col, Form, Input, InputNumber, Row, Space } from 'antd';\nimport { useNavigate } from 'react-router-dom';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport userService from '../../services/user';\nimport { toast } from 'react-toastify';\nimport { removeFromMenu } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport Loading from '../../components/loading';\nimport ShopUserForm from 'components/forms/shop-user-form';\nimport { fetchShops } from '../../redux/slices/shop';\n\nexport default function UserEdit({ prev }) {\n  const { t } = useTranslation();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [error, setError] = useState(null);\n  const [loadingBtn, setLoadingBtn] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n\n  const showUserData = (uuid) => {\n    setLoading(true);\n    userService\n      .getById(uuid)\n      .then((res) => {\n        const data = res.data;\n        form.setFieldsValue({\n          firstname: data.firstname,\n          lastname: data.lastname,\n          email: data.email,\n          phone: data.phone,\n          password_confirmation: data.password_confirmation,\n          password: data.password,\n        });\n      })\n      .finally(() => setLoading(false));\n  };\n\n  const onFinish = (values) => {\n    setLoadingBtn(true);\n    const body = {\n      firstname: values.firstname,\n      lastname: values.lastname,\n      email: values.email,\n      phone: values.phone,\n      password_confirmation: values.password_confirmation,\n      password: values.password,\n    };\n    const nextUrl = 'shops';\n    userService\n      .update(activeMenu?.data?.seller?.uuid, body)\n      .then(() => {\n        toast.success(t('successfully.updated'));\n        navigate(`/${nextUrl}`);\n        dispatch(fetchShops({ perPage: 10, page: 1 }));\n        dispatch(removeFromMenu({ ...activeMenu, nextUrl }));\n      })\n      .catch((err) => setError(err.response.data.params))\n      .finally(() => setLoadingBtn(false));\n  };\n\n  useEffect(() => {\n    if (activeMenu?.data.seller) {\n      showUserData(activeMenu?.data?.seller?.uuid);\n    }\n  }, []);\n\n  return (\n    <>\n      {!loading ? (\n        <Form\n          form={form}\n          layout='vertical'\n          initialValues={{\n            ...activeMenu.data,\n          }}\n          onFinish={onFinish}\n          className='py-4'\n        >\n          <ShopUserForm error={error} loadingBtn={loadingBtn} />\n        </Form>\n      ) : (\n        <Loading />\n      )}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}