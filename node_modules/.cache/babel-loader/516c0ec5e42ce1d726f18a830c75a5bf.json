{"ast":null,"code":"import React,{useState}from'react';import{DeleteOutlined,MinusOutlined,PlusOutlined}from'@ant-design/icons';import{Button,Card,Col,Divider,Form,Image,Input,Row,Space,Spin}from'antd';import{batch,shallowEqual,useDispatch,useSelector}from'react-redux';import{addToCart,clearCart,removeFromCart,reduceCart,setCartShops,clearCartShops,setCartTotal,addCoupon,verifyCoupon,removeBag,setCartOrder,setLoadingCoupon,clearData}from'redux/slices/cart';import getImage from'helpers/getImage';import useDidUpdate from'helpers/useDidUpdate';import orderService from'services/seller/order';import invokableService from'services/rest/invokable';import{useTranslation}from'react-i18next';import numberToPrice from'helpers/numberToPrice';import{getCartData,getCartItems}from'redux/selectors/cartSelector';import PreviewInfo from'./preview-info';import{toast}from'react-toastify';import{fetchSellerProducts}from'redux/slices/product';import moment from'moment';import QueryString from'qs';import{useLocation}from'react-router-dom';import RiveResult from'components/rive-result';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function OrderCart(){var _locat$state;const{t}=useTranslation();const dispatch=useDispatch();const{cartItems,cartShops,currentBag,total,coupons,currency}=useSelector(state=>state.cart,shallowEqual);const{myShop}=useSelector(state=>state.myShop,shallowEqual);const filteredCartItems=useSelector(state=>getCartItems(state.cart));const data=useSelector(state=>getCartData(state.cart),shallowEqual);console.log('data',data);const[loading,setLoading]=useState(false);const[showInvoice,setShowInvoice]=useState(null);const[couponSuccessful,setCouponSuccessful]=useState(false);const[form]=Form.useForm();const{myShop:shop}=useSelector(state=>state.myShop,shallowEqual);const locat=useLocation();const delivery_type=locat===null||locat===void 0?void 0:(_locat$state=locat.state)===null||_locat$state===void 0?void 0:_locat$state.delivery_type;const deleteCard=e=>dispatch(removeFromCart(e));const clearAll=()=>{dispatch(clearCart());dispatch(clearData());if(currentBag!==0){dispatch(removeBag(currentBag));}};const increment=item=>{var _item$stock;if(item.quantity===(item===null||item===void 0?void 0:(_item$stock=item.stock)===null||_item$stock===void 0?void 0:_item$stock.quantity)){return;}if(item.quantity===item.max_qty){return;}dispatch(addToCart({...item,quantity:1}));};const decrement=item=>{if(item.quantity===1){return;}if(item.quantity<=item.min_qty){return;}dispatch(reduceCart({...item,quantity:1}));};function formatProducts(list){var _coupons$filter,_data$deliveries,_data$delivery_point;const products=list.map(item=>{var _item$stockID,_item$stock2;return{quantity:item.quantity,stock_id:item.stockID?(_item$stockID=item.stockID)===null||_item$stockID===void 0?void 0:_item$stockID.id:(_item$stock2=item.stock)===null||_item$stock2===void 0?void 0:_item$stock2.id};});const verifiedCoupons={};coupons===null||coupons===void 0?void 0:(_coupons$filter=coupons.filter(coupon=>coupon===null||coupon===void 0?void 0:coupon.verified))===null||_coupons$filter===void 0?void 0:_coupons$filter.forEach(coupon=>verifiedCoupons[`${coupon===null||coupon===void 0?void 0:coupon.shop_id}`]=coupon===null||coupon===void 0?void 0:coupon.name);const result={products,currency_id:currency===null||currency===void 0?void 0:currency.id,coupon:verifiedCoupons,shop_id:shop.id,delivery_type:data===null||data===void 0?void 0:(_data$deliveries=data.deliveries)===null||_data$deliveries===void 0?void 0:_data$deliveries.value,delivery_point_id:(data===null||data===void 0?void 0:data.delivery_type)==='point'?data===null||data===void 0?void 0:(_data$delivery_point=data.delivery_point)===null||_data$delivery_point===void 0?void 0:_data$delivery_point.value:undefined,delivery_price_id:(data===null||data===void 0?void 0:data.delivery_type)==='delivery'?data===null||data===void 0?void 0:data.delivery_price_id:undefined};return QueryString.stringify(result,{addQueryPrefix:true});}useDidUpdate(()=>{dispatch(fetchSellerProducts({perPage:12,currency_id:currency===null||currency===void 0?void 0:currency.id,status:'published',active:1}));if(filteredCartItems.length){productCalculate();}},[currency]);useDidUpdate(()=>{if(filteredCartItems.length){productCalculate();}else{dispatch(clearCartShops());}},[cartItems,currentBag,data===null||data===void 0?void 0:data.delivery_price_id,currency,data===null||data===void 0?void 0:data.coupon,couponSuccessful]);function productCalculate(){const products=formatProducts(filteredCartItems);setLoading(true);orderService.calculate(products).then(_ref=>{var _data$shops,_data$shops$flatMap,_data$delivery_fee,_data$coupon$reduce,_data$coupon;let{data}=_ref;const items=data===null||data===void 0?void 0:(_data$shops=data.shops)===null||_data$shops===void 0?void 0:(_data$shops$flatMap=_data$shops.flatMap(shop=>shop.stocks))===null||_data$shops$flatMap===void 0?void 0:_data$shops$flatMap.map(item=>({...filteredCartItems.find(el=>el.id===item.id),...item,...item.stock.countable,stock:item.stock.stock_extras,stocks:item.stock.stock_extras,stockID:item.stock}));dispatch(setCartShops(items));const orderData={product_total:data===null||data===void 0?void 0:data.price,tax:data===null||data===void 0?void 0:data.total_tax,shop_tax:data===null||data===void 0?void 0:data.total_shop_tax,order_total:data===null||data===void 0?void 0:data.total_price,delivery_fee:data===null||data===void 0?void 0:(_data$delivery_fee=data.delivery_fee)===null||_data$delivery_fee===void 0?void 0:_data$delivery_fee.reduce((total,item)=>{var _item$price;return total+=(_item$price=item===null||item===void 0?void 0:item.price)!==null&&_item$price!==void 0?_item$price:0;},0),service_fee:data===null||data===void 0?void 0:data.service_fee,coupon:(_data$coupon$reduce=data===null||data===void 0?void 0:(_data$coupon=data.coupon)===null||_data$coupon===void 0?void 0:_data$coupon.reduce((total,item)=>total+=item===null||item===void 0?void 0:item.price,0))!==null&&_data$coupon$reduce!==void 0?_data$coupon$reduce:0,discount:data===null||data===void 0?void 0:data.total_discount};dispatch(setCartTotal(orderData));}).finally(()=>setLoading(false));}const handleCloseInvoice=()=>{setShowInvoice(null);clearAll();toast.success(t('successfully.closed'));};function handleCheckCoupon(shopId){var _coupon$name,_data$user;const coupon=coupons===null||coupons===void 0?void 0:coupons.find(coupon=>coupon.shop_id===shopId);if(!coupon||!(coupon!==null&&coupon!==void 0&&(_coupon$name=coupon.name)!==null&&_coupon$name!==void 0&&_coupon$name.trim())){return;}const body={coupon:coupon===null||coupon===void 0?void 0:coupon.name,shop_id:coupon===null||coupon===void 0?void 0:coupon.shop_id,user_id:data===null||data===void 0?void 0:(_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.value};dispatch(setLoadingCoupon({shop_id:shopId,loading:true}));invokableService.checkCoupon(body).then(_ref2=>{let{data}=_ref2;dispatch(verifyCoupon({shop_id:data===null||data===void 0?void 0:data.shop_id,price:data===null||data===void 0?void 0:data.price}));setCouponSuccessful(!couponSuccessful);}).catch(error=>console.log('error of coupon => ',error)).finally(()=>dispatch(setLoadingCoupon({shop_id:shopId,loading:false})));}const handleClick=()=>{var _data$user2,_data$paymentType,_data$delivery_point2,_data$deliveries2,_data$deliveryAddress,_data$deliveryAddress2,_data$deliveryAddress3,_data$deliveryAddress4,_data$phone,_data$paymentType2;if(!currency&&!delivery_type){toast.warning(t('please.select.currency'));return;}if(!data.address&&(data===null||data===void 0?void 0:data.delivery_type)==='delivery'){toast.warning(t('please.select.address'));return;}if(!data.deliveryAddress.city_id&&(data===null||data===void 0?void 0:data.delivery_type)==='delivery'){toast.warning(t('delivery.address.is.invalid'));return;}// if (!data.street_house_number && data?.delivery_type === 'delivery') {\n//   toast.warning(t('please.enter.house.number'));\n//   return;\n// }\n// if (!data.zip_code && data?.delivery_type === 'delivery') {\n//   toast.warning(t('please.enter.zipcode'));\n//   return;\n// }\nif(!data.delivery_point&&(data===null||data===void 0?void 0:data.delivery_type)==='point'){toast.warning(t('please.select.delivery.point'));return;}if(!data.delivery_time&&!delivery_type){toast.warning(t('shop.closed'));return;}if(!data.delivery_date&&!delivery_type){toast.warning(t('please.select.deliveryDate'));return;}setLoading(true);const verifiedCoupons=coupons===null||coupons===void 0?void 0:coupons.filter(coupon=>coupon===null||coupon===void 0?void 0:coupon.verified);const resultCoupons=verifiedCoupons.reduce((acc,coupon)=>{acc[`${coupon.shop_id}`]=coupon.name;return acc;},{});const products=cartShops===null||cartShops===void 0?void 0:cartShops.map(cart=>({stock_id:cart.stockID.id,quantity:cart.quantity,bonus:cart.bonus}));const defaultBody={user_id:(_data$user2=data.user)===null||_data$user2===void 0?void 0:_data$user2.value,currency_id:currency===null||currency===void 0?void 0:currency.id,rate:currency.rate,payment_id:(_data$paymentType=data.paymentType)===null||_data$paymentType===void 0?void 0:_data$paymentType.value,delivery_point_id:(data===null||data===void 0?void 0:data.delivery_type)==='point'?data===null||data===void 0?void 0:(_data$delivery_point2=data.delivery_point)===null||_data$delivery_point2===void 0?void 0:_data$delivery_point2.value:undefined,delivery_date:`${data.delivery_date} ${moment(data.delivery_time,'HH:mm').format('HH:mm')}`,delivery_type:(_data$deliveries2=data.deliveries)===null||_data$deliveries2===void 0?void 0:_data$deliveries2.value,coupon:resultCoupons,data:[{shop_id:shop===null||shop===void 0?void 0:shop.id,products}],tax:total.order_tax,delivery_price_id:(data===null||data===void 0?void 0:data.delivery_type)==='delivery'?data===null||data===void 0?void 0:data.delivery_price_id:undefined,address:(data===null||data===void 0?void 0:data.delivery_type)==='delivery'?data===null||data===void 0?void 0:data.deliveryAddress:undefined,location:(data===null||data===void 0?void 0:data.delivery_type)==='delivery'?{latitude:data===null||data===void 0?void 0:(_data$deliveryAddress=data.deliveryAddress)===null||_data$deliveryAddress===void 0?void 0:(_data$deliveryAddress2=_data$deliveryAddress.location)===null||_data$deliveryAddress2===void 0?void 0:_data$deliveryAddress2.latitude,longitude:data===null||data===void 0?void 0:(_data$deliveryAddress3=data.deliveryAddress)===null||_data$deliveryAddress3===void 0?void 0:(_data$deliveryAddress4=_data$deliveryAddress3.location)===null||_data$deliveryAddress4===void 0?void 0:_data$deliveryAddress4.longitude}:undefined,products:products,phone:data===null||data===void 0?void 0:(_data$phone=data.phone)===null||_data$phone===void 0?void 0:_data$phone.toString()};const dineInBody={currency_id:currency===null||currency===void 0?void 0:currency.id,delivery_type:delivery_type,payment_type:(_data$paymentType2=data.paymentType)===null||_data$paymentType2===void 0?void 0:_data$paymentType2.label,products:products,shop_id:shop.id,coupon:resultCoupons};const body=delivery_type?dineInBody:defaultBody;orderService.create(body).then(response=>{batch(()=>{dispatch(setCartOrder(response===null||response===void 0?void 0:response.data));dispatch(clearCart());});setShowInvoice(true);form.resetFields();}).catch(err=>console.error(err)).finally(()=>setLoading(false));};const coupon=coupons===null||coupons===void 0?void 0:coupons.find(coupon=>(coupon===null||coupon===void 0?void 0:coupon.shop_id)===(myShop===null||myShop===void 0?void 0:myShop.id));return/*#__PURE__*/_jsxs(Card,{children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(Spin,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-save\",children:[cartShops.map(item=>{var _item$translation,_item$stock3,_item$addons,_item$stock4,_item$stock4$product,_item$stock5,_item$stock5$product,_item$stock5$product$,_item$stock5$product$2,_item$translation2,_item$stock6,_item$addons2,_item$stock7,_item$stock7$product,_item$stock8,_item$stock8$product,_item$stock8$product$,_item$stock8$product$2;return/*#__PURE__*/_jsx(\"div\",{children:item.bonus!==true?/*#__PURE__*/_jsx(\"div\",{className:\"custom-cart-container\",children:/*#__PURE__*/_jsxs(Row,{className:\"product-row\",children:[/*#__PURE__*/_jsx(Image,{width:70,height:\"auto\",src:getImage(item.img),preview:true,placeholder:true,className:\"rounded\"}),/*#__PURE__*/_jsx(Col,{span:18,className:\"product-col\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"product-name\",children:item===null||item===void 0?void 0:(_item$translation=item.translation)===null||_item$translation===void 0?void 0:_item$translation.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Space,{wrap:true,className:\"mt-2\",children:item===null||item===void 0?void 0:(_item$stock3=item.stock)===null||_item$stock3===void 0?void 0:_item$stock3.map((el,idj)=>{var _el$group,_el$group2,_el$group2$translatio,_el$value2,_el$value3;if((el===null||el===void 0?void 0:(_el$group=el.group)===null||_el$group===void 0?void 0:_el$group.type)==='color'){var _el$value;return/*#__PURE__*/_jsxs(Space,{children:[t('color'),\":\",/*#__PURE__*/_jsx(\"div\",{className:\"extras-color\",style:{backgroundColor:el===null||el===void 0?void 0:(_el$value=el.value)===null||_el$value===void 0?void 0:_el$value.value}})]});}return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[el===null||el===void 0?void 0:(_el$group2=el.group)===null||_el$group2===void 0?void 0:(_el$group2$translatio=_el$group2.translation)===null||_el$group2$translatio===void 0?void 0:_el$group2$translatio.title,\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"extras-text rounded pr-2 pl-2\",children:(_el$value3=el.value)===null||_el$value3===void 0?void 0:_el$value3.value},idj+'-'+((_el$value2=el.value)===null||_el$value2===void 0?void 0:_el$value2.value))]});})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Space,{wrap:true,className:\"mt-2\",children:(_item$addons=item.addons)===null||_item$addons===void 0?void 0:_item$addons.map(addon=>{var _addon$countable,_addon$countable$tran;return/*#__PURE__*/_jsxs(\"span\",{className:\"extras-text rounded pr-2 pl-2\",children:[addon===null||addon===void 0?void 0:(_addon$countable=addon.countable)===null||_addon$countable===void 0?void 0:(_addon$countable$tran=_addon$countable.translation)===null||_addon$countable$tran===void 0?void 0:_addon$countable$tran.title,\" x\",' ',addon.quantity]});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-counter\",children:[/*#__PURE__*/_jsx(\"span\",{children:numberToPrice((item===null||item===void 0?void 0:item.total_price)||(item===null||item===void 0?void 0:item.price),currency===null||currency===void 0?void 0:currency.symbol)}),/*#__PURE__*/_jsxs(\"div\",{className:\"count\",children:[/*#__PURE__*/_jsx(Button,{className:\"button-counter\",shape:\"circle\",icon:/*#__PURE__*/_jsx(MinusOutlined,{size:14}),onClick:()=>decrement(item)}),/*#__PURE__*/_jsxs(\"span\",{children:[(item===null||item===void 0?void 0:item.quantity)*((item===null||item===void 0?void 0:(_item$stock4=item.stock)===null||_item$stock4===void 0?void 0:(_item$stock4$product=_item$stock4.product)===null||_item$stock4$product===void 0?void 0:_item$stock4$product.interval)||1),item===null||item===void 0?void 0:(_item$stock5=item.stock)===null||_item$stock5===void 0?void 0:(_item$stock5$product=_item$stock5.product)===null||_item$stock5$product===void 0?void 0:(_item$stock5$product$=_item$stock5$product.unit)===null||_item$stock5$product$===void 0?void 0:(_item$stock5$product$2=_item$stock5$product$.translation)===null||_item$stock5$product$2===void 0?void 0:_item$stock5$product$2.title]}),/*#__PURE__*/_jsx(Button,{className:\"button-counter\",shape:\"circle\",icon:/*#__PURE__*/_jsx(PlusOutlined,{size:14}),onClick:()=>increment(item)}),/*#__PURE__*/_jsx(Button,{className:\"button-counter\",shape:\"circle\",onClick:()=>deleteCard(item),icon:/*#__PURE__*/_jsx(DeleteOutlined,{size:14})})]})]})]})})]})},item.id):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-2\",children:t('bonus.product')}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-cart-container\",children:/*#__PURE__*/_jsxs(Row,{className:\"product-row\",children:[/*#__PURE__*/_jsx(Image,{width:70,height:\"auto\",src:getImage(item.img),preview:true,placeholder:true,className:\"rounded\"}),/*#__PURE__*/_jsx(Col,{span:18,className:\"product-col\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"product-name\",children:item===null||item===void 0?void 0:(_item$translation2=item.translation)===null||_item$translation2===void 0?void 0:_item$translation2.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Space,{wrap:true,className:\"mt-2\",children:item===null||item===void 0?void 0:(_item$stock6=item.stock)===null||_item$stock6===void 0?void 0:_item$stock6.map(el=>{var _el$group3,_el$group4,_el$group4$translatio,_el$value5,_el$value6;if((el===null||el===void 0?void 0:(_el$group3=el.group)===null||_el$group3===void 0?void 0:_el$group3.type)==='color'){var _el$value4;return/*#__PURE__*/_jsxs(Space,{children:[t('color'),\":\",/*#__PURE__*/_jsx(\"div\",{className:\"extras-color\",style:{backgroundColor:el===null||el===void 0?void 0:(_el$value4=el.value)===null||_el$value4===void 0?void 0:_el$value4.value}})]});}return/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[el===null||el===void 0?void 0:(_el$group4=el.group)===null||_el$group4===void 0?void 0:(_el$group4$translatio=_el$group4.translation)===null||_el$group4$translatio===void 0?void 0:_el$group4$translatio.title,\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"extras-text rounded pr-2 pl-2\",children:(_el$value6=el.value)===null||_el$value6===void 0?void 0:_el$value6.value},(_el$value5=el.value)===null||_el$value5===void 0?void 0:_el$value5.value)]});})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Space,{wrap:true,className:\"mt-2\",children:(_item$addons2=item.addons)===null||_item$addons2===void 0?void 0:_item$addons2.map(addon=>{var _addon$countable2,_addon$countable2$tra;return/*#__PURE__*/_jsxs(\"span\",{className:\"extras-text rounded pr-2 pl-2\",children:[addon===null||addon===void 0?void 0:(_addon$countable2=addon.countable)===null||_addon$countable2===void 0?void 0:(_addon$countable2$tra=_addon$countable2.translation)===null||_addon$countable2$tra===void 0?void 0:_addon$countable2$tra.title,\" x\",' ',addon.quantity]});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-counter\",children:[/*#__PURE__*/_jsx(\"span\",{children:numberToPrice((item===null||item===void 0?void 0:item.total_price)||(item===null||item===void 0?void 0:item.price),currency===null||currency===void 0?void 0:currency.symbol)}),/*#__PURE__*/_jsxs(\"div\",{className:\"count\",children:[/*#__PURE__*/_jsx(Button,{className:\"button-counter\",shape:\"circle\",icon:/*#__PURE__*/_jsx(MinusOutlined,{size:14}),onClick:()=>decrement(item),disabled:true}),/*#__PURE__*/_jsxs(\"span\",{children:[(item===null||item===void 0?void 0:item.quantity)*((item===null||item===void 0?void 0:(_item$stock7=item.stock)===null||_item$stock7===void 0?void 0:(_item$stock7$product=_item$stock7.product)===null||_item$stock7$product===void 0?void 0:_item$stock7$product.interval)||1),item===null||item===void 0?void 0:(_item$stock8=item.stock)===null||_item$stock8===void 0?void 0:(_item$stock8$product=_item$stock8.product)===null||_item$stock8$product===void 0?void 0:(_item$stock8$product$=_item$stock8$product.unit)===null||_item$stock8$product$===void 0?void 0:(_item$stock8$product$2=_item$stock8$product$.translation)===null||_item$stock8$product$2===void 0?void 0:_item$stock8$product$2.title]}),/*#__PURE__*/_jsx(Button,{className:\"button-counter\",shape:\"circle\",icon:/*#__PURE__*/_jsx(PlusOutlined,{size:14}),onClick:()=>increment(item),disabled:true})]})]})]})})]})},item.id)]})});}),cartShops.length?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',columnGap:'20px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(Input,{className:'w-100',placeholder:t('enter.coupon'),onChange:e=>dispatch(addCoupon({name:e.target.value,shop_id:myShop===null||myShop===void 0?void 0:myShop.id}))}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleCheckCoupon(myShop===null||myShop===void 0?void 0:myShop.id),disabled:coupon===null||coupon===void 0?void 0:coupon.loading,loading:coupon===null||coupon===void 0?void 0:coupon.loading,children:t('check')})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RiveResult,{id:\"nosell\"}),/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center'},children:t('empty.cart')})]}),!(cartShops!==null&&cartShops!==void 0&&cartShops.length)&&/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Row,{className:\"all-price-row\",children:/*#__PURE__*/_jsxs(Col,{span:24,className:\"col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('products')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.product_total,currency===null||currency===void 0?void 0:currency.symbol)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('delivery.fee')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.delivery_fee,currency===null||currency===void 0?void 0:currency.symbol)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('service.fee')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.service_fee,currency===null||currency===void 0?void 0:currency.symbol)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('tax')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.tax,currency===null||currency===void 0?void 0:currency.symbol)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('discount')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"- \",numberToPrice(total.discount,currency===null||currency===void 0?void 0:currency.symbol)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('coupon')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"- \",numberToPrice(total.coupon,currency===null||currency===void 0?void 0:currency.symbol)]})]})]})}),/*#__PURE__*/_jsxs(Row,{className:\"submit-row\",children:[/*#__PURE__*/_jsxs(Col,{span:14,className:\"col\",children:[/*#__PURE__*/_jsx(\"span\",{children:t('total.amount')}),/*#__PURE__*/_jsx(\"span\",{children:numberToPrice(total.order_total,currency===null||currency===void 0?void 0:currency.symbol)})]}),/*#__PURE__*/_jsx(Col,{className:\"col2\",children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>handleClick(),disabled:!cartShops.length,children:t('place.order')})})]})]}),showInvoice?/*#__PURE__*/_jsx(PreviewInfo,{handleClose:handleCloseInvoice}):'']});}","map":null,"metadata":{},"sourceType":"module"}