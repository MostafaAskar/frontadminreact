{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Card,Col,Form,Input,Row}from'antd';import{useTranslation}from'react-i18next';import settingService from'../../services/settings';import{toast}from'react-toastify';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{disableRefetch,setMenuData}from'../../redux/slices/menu';import{fetchSettings as getSettings}from'../../redux/slices/globalSettings';import Loading from'../../components/loading';import useDemo from'../../helpers/useDemo';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AppSettings(){const{t}=useTranslation();const[form]=Form.useForm();const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const dispatch=useDispatch();const[loading,setLoading]=useState(false);const[loadingBtn,setLoadingBtn]=useState(false);const{isDemo}=useDemo();useEffect(()=>{return()=>{const data=form.getFieldsValue(true);dispatch(setMenuData({activeMenu,data}));};},[]);const createSettings=list=>{const result=list.map(item=>({[item.key]:item.value}));return Object.assign({},...result);};function fetchSettings(){setLoading(true);settingService.get().then(res=>{const data=createSettings(res.data);form.setFieldsValue(data);}).finally(()=>{setLoading(false);dispatch(disableRefetch(activeMenu));});}useEffect(()=>{if(activeMenu.refetch){fetchSettings();}},[activeMenu.refetch]);function updateSettings(data){setLoadingBtn(true);settingService.update(data).then(()=>{toast.success(t('successfully.updated'));dispatch(getSettings());}).finally(()=>setLoadingBtn(false));}const onFinish=values=>{updateSettings(values);};const handleClick=()=>{if(isDemo){toast.warning(t('cannot.work.demo'));return;}form.submit();};return/*#__PURE__*/_jsx(Form,{layout:\"vertical\",form:form,name:\"global-settings\",onFinish:onFinish,initialValues:{...activeMenu.data},children:!loading?/*#__PURE__*/_jsx(Card,{title:t('social.settings'),extra:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>handleClick(),loading:loadingBtn,children:t('save')}),children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Vendor App IOS',name:\"vendor_app_ios\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Vendor App Android',name:\"vendor_app_android\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Delivery App IOS',name:\"delivery_app_ios\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Delivery App Android',name:\"delivery_app_android\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Customer App IOS',name:\"customer_app_ios\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})}),/*#__PURE__*/_jsx(Col,{span:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Customer App Android',name:\"customer_app_android\",rules:[{required:true,message:t('required')}],children:/*#__PURE__*/_jsx(Input,{})})})]})}):/*#__PURE__*/_jsx(Loading,{})});}","map":null,"metadata":{},"sourceType":"module"}