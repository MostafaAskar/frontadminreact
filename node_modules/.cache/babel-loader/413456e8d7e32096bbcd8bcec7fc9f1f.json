{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/looks/edit.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { Form } from 'antd';\nimport LooksForm from './form';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport looksService from 'services/banner';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport banner from 'services/banner';\nimport Loading from 'components/loading';\nimport { disableRefetch, setMenuData } from 'redux/slices/menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditLook() {\n  _s();\n\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    languages\n  } = useSelector(state => state.formLang, shallowEqual);\n  const {\n    id\n  } = useParams();\n  const [loading, setLoading] = useState(false);\n\n  const fetchLook = id => {\n    setLoading(true);\n    const params = {\n      type: 'look'\n    };\n    banner.getById(id, params).then(res => {\n      var _data$translation, _data$translation2, _data$translation3, _data$translation4, _data$shop, _data$shop$translatio, _data$shop2, _data$shop3, _data$products, _data$galleries;\n\n      const data = res === null || res === void 0 ? void 0 : res.data;\n      const body = {\n        [`title[${data === null || data === void 0 ? void 0 : (_data$translation = data.translation) === null || _data$translation === void 0 ? void 0 : _data$translation.locale}]`]: data === null || data === void 0 ? void 0 : (_data$translation2 = data.translation) === null || _data$translation2 === void 0 ? void 0 : _data$translation2.title,\n        [`description[${data === null || data === void 0 ? void 0 : (_data$translation3 = data.translation) === null || _data$translation3 === void 0 ? void 0 : _data$translation3.locale}]`]: data === null || data === void 0 ? void 0 : (_data$translation4 = data.translation) === null || _data$translation4 === void 0 ? void 0 : _data$translation4.description,\n        shop: {\n          label: data === null || data === void 0 ? void 0 : (_data$shop = data.shop) === null || _data$shop === void 0 ? void 0 : (_data$shop$translatio = _data$shop.translation) === null || _data$shop$translatio === void 0 ? void 0 : _data$shop$translatio.title,\n          value: data === null || data === void 0 ? void 0 : (_data$shop2 = data.shop) === null || _data$shop2 === void 0 ? void 0 : _data$shop2.id,\n          key: data === null || data === void 0 ? void 0 : (_data$shop3 = data.shop) === null || _data$shop3 === void 0 ? void 0 : _data$shop3.id\n        },\n        products: data === null || data === void 0 ? void 0 : (_data$products = data.products) === null || _data$products === void 0 ? void 0 : _data$products.map(product => {\n          var _product$translation;\n\n          return {\n            label: product === null || product === void 0 ? void 0 : (_product$translation = product.translation) === null || _product$translation === void 0 ? void 0 : _product$translation.title,\n            value: product === null || product === void 0 ? void 0 : product.id,\n            key: product === null || product === void 0 ? void 0 : product.id\n          };\n        }),\n        image: data === null || data === void 0 ? void 0 : (_data$galleries = data.galleries) === null || _data$galleries === void 0 ? void 0 : _data$galleries.map(img => ({\n          uid: img.id,\n          name: img.path,\n          url: img.path\n        })),\n        active: Boolean(data === null || data === void 0 ? void 0 : data.active)\n      };\n      form.setFieldsValue(body);\n      dispatch(setMenuData({\n        activeMenu,\n        data: body\n      }));\n    }).finally(() => {\n      setLoading(false);\n      dispatch(disableRefetch(activeMenu));\n    });\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchLook(id);\n    }\n  }, [activeMenu.refetch]);\n\n  const handleSubmit = (values, image) => {\n    const body = {\n      type: 'look',\n      active: Number(values.active),\n      shop_id: values.shop.value,\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description'),\n      products: values.products.map(i => i.value),\n      images: image.map(image => image.name)\n    };\n    return looksService.update(id, body);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: !loading ? /*#__PURE__*/_jsxDEV(LooksForm, {\n      form: form,\n      handleSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditLook, \"wG2CIYFi3fWFXiIL0TijKYj2/38=\", false, function () {\n  return [useDispatch, Form.useForm, useSelector, useSelector, useParams];\n});\n\n_c = EditLook;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditLook\");","map":{"version":3,"names":["React","Fragment","useEffect","useState","Form","LooksForm","getTranslationFields","looksService","shallowEqual","useSelector","useDispatch","useParams","banner","Loading","disableRefetch","setMenuData","EditLook","dispatch","form","useForm","activeMenu","state","menu","languages","formLang","id","loading","setLoading","fetchLook","params","type","getById","then","res","data","body","translation","locale","title","description","shop","label","value","key","products","map","product","image","galleries","img","uid","name","path","url","active","Boolean","setFieldsValue","finally","refetch","handleSubmit","values","Number","shop_id","i","images","update"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/looks/edit.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\nimport { Form } from 'antd';\nimport LooksForm from './form';\nimport getTranslationFields from 'helpers/getTranslationFields';\nimport looksService from 'services/banner';\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport banner from 'services/banner';\nimport Loading from 'components/loading';\nimport { disableRefetch, setMenuData } from 'redux/slices/menu';\nexport default function EditLook() {\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { languages } = useSelector((state) => state.formLang, shallowEqual);\n  const { id } = useParams();\n\n  const [loading, setLoading] = useState(false);\n\n  const fetchLook = (id) => {\n    setLoading(true);\n\n    const params = {\n      type: 'look',\n    };\n\n    banner\n      .getById(id, params)\n      .then((res) => {\n        const data = res?.data;\n        const body = {\n          [`title[${data?.translation?.locale}]`]: data?.translation?.title,\n          [`description[${data?.translation?.locale}]`]:\n            data?.translation?.description,\n          shop: {\n            label: data?.shop?.translation?.title,\n            value: data?.shop?.id,\n            key: data?.shop?.id,\n          },\n          products: data?.products?.map((product) => ({\n            label: product?.translation?.title,\n            value: product?.id,\n            key: product?.id,\n          })),\n          image: data?.galleries?.map((img) => ({\n            uid: img.id,\n            name: img.path,\n            url: img.path,\n          })),\n          active: Boolean(data?.active),\n        };\n\n        form.setFieldsValue(body);\n        dispatch(setMenuData({ activeMenu, data: body }));\n      })\n      .finally(() => {\n        setLoading(false);\n        dispatch(disableRefetch(activeMenu));\n      });\n  };\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      fetchLook(id);\n    }\n  }, [activeMenu.refetch]);\n\n  const handleSubmit = (values, image) => {\n    const body = {\n      type: 'look',\n      active: Number(values.active),\n      shop_id: values.shop.value,\n      title: getTranslationFields(languages, values, 'title'),\n      description: getTranslationFields(languages, values, 'description'),\n      products: values.products.map((i) => i.value),\n      images: image.map((image) => image.name),\n    };\n\n    return looksService.update(id, body);\n  };\n\n  return (\n    <Fragment>\n      {!loading ? (\n        <LooksForm form={form} handleSubmit={handleSubmit} />\n      ) : (\n        <Loading />\n      )}\n    </Fragment>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}