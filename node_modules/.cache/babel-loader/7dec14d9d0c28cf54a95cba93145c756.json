{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import{QRCodeCanvas}from'qrcode.react';import{toast}from'react-toastify';import{Tag,Button}from'antd';import axios from'axios';import{API_KEY,DYNAMIC_LINK_DOMAIN,WEBSITE_URL,ANDROID_PACKAGE_NAME,IOS_BUNDLE_ID}from'configs/app-global';import Loading from'components/loading';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseUrl=`https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=${API_KEY}`;export default function QrCode(_ref){let{orderId,showLink=true,size=2}=_ref;const{t}=useTranslation();const[qrCodeUrl,setQrCodeUrl]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const fetchQrCodeUrl=async()=>{setLoading(true);const requestData={dynamicLinkInfo:{domainUriPrefix:DYNAMIC_LINK_DOMAIN,link:`${WEBSITE_URL}/orders/${orderId}`,androidInfo:{androidPackageName:ANDROID_PACKAGE_NAME},iosInfo:{iosBundleId:IOS_BUNDLE_ID}}};try{const{data}=await axios.post(firebaseUrl,requestData);setError(null);setQrCodeUrl(data===null||data===void 0?void 0:data.shortLink);}catch(error){setError(error);toast.error(error.message);}finally{setLoading(false);}};useEffect(()=>{fetchQrCodeUrl();},[orderId]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[t('qr_code'),\":\"]}),/*#__PURE__*/_jsx(\"div\",{children:!loading&&!error?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{width:`${size*100}px`,height:`${size*100}px`,borderRadius:'10px',overflow:!error?'hidden':'none'},children:/*#__PURE__*/_jsx(QRCodeCanvas,{size:500,id:\"qrCode\",includeMargin:true,value:qrCodeUrl,style:{width:'100%',aspectRatio:'1/1',height:'100%'},bgColor:'#fff',level:'H'})}),/*#__PURE__*/_jsx(\"br\",{}),showLink&&/*#__PURE__*/_jsx(Button,{type:'primary',href:qrCodeUrl,target:'_blank',rel:'noreferrer',style:{width:`${size*100}px`},children:t('link.to.order')})]}):!!error?/*#__PURE__*/_jsx(Tag,{color:\"red\",children:t('smth.went.wrong')}):/*#__PURE__*/_jsx(Loading,{})})]});}","map":null,"metadata":{},"sourceType":"module"}