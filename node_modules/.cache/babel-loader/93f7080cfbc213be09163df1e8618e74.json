{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/infinite-select.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useMemo } from 'react';\nimport debounce from 'lodash/debounce';\nimport { Select, Spin } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const InfiniteSelect = _ref => {\n  _s();\n\n  let {\n    fetchOptions,\n    debounceTimeout = 400,\n    hasMore,\n    ...props\n  } = _ref;\n  const [fetching, setFetching] = useState(false);\n  const [options, setOptions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const debounceFetcher = useMemo(() => {\n    const loadOptions = value => {\n      setOptions([]);\n      setSearch(value);\n      setFetching(true);\n      fetchOptions({\n        search: value\n      }).then(newOptions => {\n        setOptions(newOptions);\n        setCurrentPage(2);\n        setFetching(false);\n      }).finally(() => setLoading(false));\n    };\n\n    return debounce(loadOptions, debounceTimeout);\n  }, [fetchOptions, debounceTimeout, currentPage]);\n\n  const fetchOnFocus = () => {\n    if (!options.length) {\n      debounceFetcher('');\n    }\n  };\n\n  const onScroll = async event => {\n    const target = event.target;\n\n    if (!loading && target.scrollTop + target.offsetHeight === target.scrollHeight) {\n      if (hasMore) {\n        setLoading(true);\n        target.scrollTo(0, target.scrollHeight);\n        fetchOptions({\n          search: search,\n          page: currentPage\n        }).then(item => {\n          setCurrentPage(i => i + 1);\n          setOptions([...options, ...item]);\n        }).finally(() => setLoading(false));\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Select, {\n    showSearch: true,\n    allowClear: true,\n    onPopupScroll: onScroll,\n    labelInValue: true,\n    filterOption: false,\n    onSearch: debounceFetcher,\n    notFoundContent: fetching ? /*#__PURE__*/_jsxDEV(Spin, {\n      size: \"small\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 35\n    }, this) : 'no results',\n    onFocus: fetchOnFocus,\n    ...props,\n    children: [options.map((item, index) => /*#__PURE__*/_jsxDEV(Select.Option, {\n      value: item.value,\n      children: item.label\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)), loading && /*#__PURE__*/_jsxDEV(Select.Option, {\n      children: /*#__PURE__*/_jsxDEV(Spin, {\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(InfiniteSelect, \"/My8Gqubbxe1OGR9KUEyNVs4MzU=\");\n\n_c = InfiniteSelect;\n\nvar _c;\n\n$RefreshReg$(_c, \"InfiniteSelect\");","map":{"version":3,"names":["React","useState","useMemo","debounce","Select","Spin","InfiniteSelect","fetchOptions","debounceTimeout","hasMore","props","fetching","setFetching","options","setOptions","loading","setLoading","search","setSearch","currentPage","setCurrentPage","debounceFetcher","loadOptions","value","then","newOptions","finally","fetchOnFocus","length","onScroll","event","target","scrollTop","offsetHeight","scrollHeight","scrollTo","page","item","i","map","index","label"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/components/infinite-select.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport debounce from 'lodash/debounce';\nimport { Select, Spin } from 'antd';\n\nexport const InfiniteSelect = ({\n  fetchOptions,\n  debounceTimeout = 400,\n  hasMore,\n  ...props\n}) => {\n  const [fetching, setFetching] = useState(false);\n  const [options, setOptions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const debounceFetcher = useMemo(() => {\n    const loadOptions = (value) => {\n      setOptions([]);\n      setSearch(value);\n      setFetching(true);\n      fetchOptions({ search: value })\n        .then((newOptions) => {\n          setOptions(newOptions);\n          setCurrentPage(2);\n          setFetching(false);\n        })\n        .finally(() => setLoading(false));\n    };\n    return debounce(loadOptions, debounceTimeout);\n  }, [fetchOptions, debounceTimeout, currentPage]);\n\n  const fetchOnFocus = () => {\n    if (!options.length) {\n      debounceFetcher('');\n    }\n  };\n\n  const onScroll = async (event) => {\n    const target = event.target;\n    if (\n      !loading &&\n      target.scrollTop + target.offsetHeight === target.scrollHeight\n    ) {\n      if (hasMore) {\n        setLoading(true);\n        target.scrollTo(0, target.scrollHeight);\n        fetchOptions({ search: search, page: currentPage })\n          .then((item) => {\n            setCurrentPage((i) => i + 1);\n            setOptions([...options, ...item]);\n          })\n          .finally(() => setLoading(false));\n      }\n    }\n  };\n\n  return (\n    <Select\n      showSearch\n      allowClear\n      onPopupScroll={onScroll}\n      labelInValue={true}\n      filterOption={false}\n      onSearch={debounceFetcher}\n      notFoundContent={fetching ? <Spin size='small' /> : 'no results'}\n      onFocus={fetchOnFocus}\n      {...props}\n    >\n      {options.map((item, index) => (\n        <Select.Option key={index} value={item.value}>\n          {item.label}\n        </Select.Option>\n      ))}\n      {loading && (\n        <Select.Option>\n          <Spin size='small' />\n        </Select.Option>\n      )}\n    </Select>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}