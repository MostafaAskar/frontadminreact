{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Card,Space,Table,Tag}from'antd';import{shallowEqual,useDispatch,useSelector}from'react-redux';import{disableRefetch}from'../../redux/slices/menu';import{useTranslation}from'react-i18next';import{fetchSubscriber}from'../../redux/slices/subscriber';import FilterColumns from'../../components/filter-column';import hideEmail from'../../components/hideEmail';import useDemo from'../../helpers/useDemo';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const Subciribed=()=>{var _activeMenu$data,_activeMenu$data2,_activeMenu$data3;const{t}=useTranslation();const dispatch=useDispatch();const{isDemo}=useDemo();const[columns,setColumns]=useState([{title:t('id'),dataIndex:'id',key:'id',is_show:true},{title:t('title'),dataIndex:'title',key:'title',is_show:true,render:(_,row)=>{var _row$user,_row$user2;return/*#__PURE__*/_jsxs(\"div\",{children:[row===null||row===void 0?void 0:(_row$user=row.user)===null||_row$user===void 0?void 0:_row$user.firstname,\" \",(row===null||row===void 0?void 0:(_row$user2=row.user)===null||_row$user2===void 0?void 0:_row$user2.lastname)||'']});}},{title:t('email'),dataIndex:'email',key:'email',is_show:true,render:(_,row)=>{var _row$user3,_row$user4;return/*#__PURE__*/_jsx(\"div\",{children:isDemo?hideEmail((_row$user3=row.user)===null||_row$user3===void 0?void 0:_row$user3.email):(_row$user4=row.user)===null||_row$user4===void 0?void 0:_row$user4.email});}},{title:t('status'),dataIndex:'active',key:'active',is_show:true,render:active=>{return/*#__PURE__*/_jsx(Tag,{color:active===true?'blue':'red',children:active===true?t('subscriber'):t('not.subscriber')});}}]);const{activeMenu}=useSelector(state=>state.menu,shallowEqual);const{subscriber,meta,loading,params}=useSelector(state=>state.subscriber,shallowEqual);useEffect(()=>{if(activeMenu.refetch){dispatch(fetchSubscriber());dispatch(disableRefetch(activeMenu));}},[activeMenu.refetch]);const onChangePagination=pageNumber=>{const{pageSize,current}=pageNumber;dispatch(fetchSubscriber({perPage:pageSize,page:current}));};return/*#__PURE__*/_jsx(Card,{title:t('subscriber'),extra:/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(FilterColumns,{columns:columns,setColumns:setColumns})}),children:/*#__PURE__*/_jsx(Table,{scroll:{x:true},columns:columns===null||columns===void 0?void 0:columns.filter(item=>item.is_show),dataSource:subscriber,pagination:{pageSize:params.perPage,page:((_activeMenu$data=activeMenu.data)===null||_activeMenu$data===void 0?void 0:_activeMenu$data.page)||1,total:meta.total,defaultCurrent:(_activeMenu$data2=activeMenu.data)===null||_activeMenu$data2===void 0?void 0:_activeMenu$data2.page,current:(_activeMenu$data3=activeMenu.data)===null||_activeMenu$data3===void 0?void 0:_activeMenu$data3.page},rowKey:record=>record.id,loading:loading,onChange:onChangePagination})});};export default Subciribed;","map":null,"metadata":{},"sourceType":"module"}