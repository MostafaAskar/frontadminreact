{"ast":null,"code":"var _jsxFileName = \"/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/wallet/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Card, Space, Table } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport formatSortType from '../../helpers/formatSortType';\nimport useDidUpdate from '../../helpers/useDidUpdate';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport { fetchWallets } from '../../redux/slices/wallet';\nimport SearchInput from '../../components/search-input';\nimport FilterColumns from '../../components/filter-column';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Wallets() {\n  _s();\n\n  var _activeMenu$data, _activeMenu$data2;\n\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const {\n    activeMenu\n  } = useSelector(state => state.menu, shallowEqual);\n  const {\n    wallets,\n    loading,\n    meta,\n    params\n  } = useSelector(state => state.wallet, shallowEqual);\n  const {\n    defaultCurrency\n  } = useSelector(state => state.currency, shallowEqual);\n  const [columns, setColumns] = useState([{\n    title: t('id'),\n    dataIndex: 'id',\n    key: 'id',\n    sorter: true,\n    is_show: true\n  }, {\n    title: t('firstname'),\n    dataIndex: 'firstname',\n    key: 'firstname',\n    is_show: true\n  }, {\n    title: t('lastname'),\n    dataIndex: 'lastname',\n    key: 'lastname',\n    is_show: true\n  }, {\n    title: t('wallet'),\n    dataIndex: 'wallet',\n    key: 'wallet',\n    is_show: true,\n    render: wallet => numberToPrice(wallet === null || wallet === void 0 ? void 0 : wallet.price, defaultCurrency.symbol)\n  }, {\n    title: t('phone'),\n    dataIndex: 'phone',\n    key: 'phone',\n    is_show: true\n  }, {\n    title: t('role'),\n    dataIndex: 'role',\n    key: 'role',\n    is_show: true\n  }]);\n\n  function onChangePagination(pagination, filters, sorter) {\n    const {\n      pageSize: perPage,\n      current: page\n    } = pagination;\n    const {\n      field: column,\n      order\n    } = sorter;\n    const sort = formatSortType(order);\n    dispatch(setMenuData({\n      activeMenu,\n      data: {\n        perPage,\n        page,\n        column,\n        sort\n      }\n    }));\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      dispatch(fetchWallets());\n      dispatch(disableRefetch(activeMenu));\n    }\n  }, [activeMenu.refetch]);\n  useDidUpdate(() => {\n    const data = activeMenu.data;\n    const paramsData = {\n      sort: data === null || data === void 0 ? void 0 : data.sort,\n      column: data === null || data === void 0 ? void 0 : data.column,\n      perPage: data === null || data === void 0 ? void 0 : data.perPage,\n      page: data === null || data === void 0 ? void 0 : data.page,\n      search: data === null || data === void 0 ? void 0 : data.search\n    };\n    dispatch(fetchWallets(paramsData));\n  }, [activeMenu.data]);\n\n  const handleFilter = (item, name) => {\n    const data = activeMenu.data;\n    dispatch(setMenuData({\n      activeMenu,\n      data: { ...data,\n        [name]: item\n      }\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    title: t('wallets'),\n    extra: /*#__PURE__*/_jsxDEV(Space, {\n      wrap: true,\n      children: [/*#__PURE__*/_jsxDEV(SearchInput, {\n        placeholder: t('search'),\n        handleChange: search => handleFilter(search, 'search'),\n        defaultValue: (_activeMenu$data = activeMenu.data) === null || _activeMenu$data === void 0 ? void 0 : _activeMenu$data.search,\n        resetSearch: !((_activeMenu$data2 = activeMenu.data) !== null && _activeMenu$data2 !== void 0 && _activeMenu$data2.search)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FilterColumns, {\n        columns: columns,\n        setColumns: setColumns\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      scroll: {\n        x: true\n      },\n      columns: columns === null || columns === void 0 ? void 0 : columns.filter(item => item.is_show),\n      dataSource: wallets,\n      loading: loading,\n      pagination: {\n        pageSize: params.perPage,\n        page: params.page,\n        total: meta.total,\n        defaultCurrent: params.page\n      },\n      rowKey: record => record.id,\n      onChange: onChangePagination\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Wallets, \"C51PA9xIrbWLctcxVLFrgBLEhao=\", false, function () {\n  return [useTranslation, useDispatch, useSelector, useSelector, useSelector, useDidUpdate];\n});\n\n_c = Wallets;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wallets\");","map":{"version":3,"names":["React","useEffect","useState","Card","Space","Table","shallowEqual","useDispatch","useSelector","disableRefetch","setMenuData","useTranslation","formatSortType","useDidUpdate","numberToPrice","fetchWallets","SearchInput","FilterColumns","Wallets","t","dispatch","activeMenu","state","menu","wallets","loading","meta","params","wallet","defaultCurrency","currency","columns","setColumns","title","dataIndex","key","sorter","is_show","render","price","symbol","onChangePagination","pagination","filters","pageSize","perPage","current","page","field","column","order","sort","data","refetch","paramsData","search","handleFilter","item","name","x","filter","total","defaultCurrent","record","id"],"sources":["/home/mostafa/Magde/new uzmart/admin/uzmart-admin-main/src/views/wallet/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, Space, Table } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { disableRefetch, setMenuData } from '../../redux/slices/menu';\nimport { useTranslation } from 'react-i18next';\nimport formatSortType from '../../helpers/formatSortType';\nimport useDidUpdate from '../../helpers/useDidUpdate';\nimport numberToPrice from '../../helpers/numberToPrice';\nimport { fetchWallets } from '../../redux/slices/wallet';\nimport SearchInput from '../../components/search-input';\nimport FilterColumns from '../../components/filter-column';\n\nexport default function Wallets() {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { activeMenu } = useSelector((state) => state.menu, shallowEqual);\n  const { wallets, loading, meta, params } = useSelector(\n    (state) => state.wallet,\n    shallowEqual\n  );\n  const { defaultCurrency } = useSelector(\n    (state) => state.currency,\n    shallowEqual\n  );\n\n  const [columns, setColumns] = useState([\n    {\n      title: t('id'),\n      dataIndex: 'id',\n      key: 'id',\n      sorter: true,\n      is_show: true,\n    },\n    {\n      title: t('firstname'),\n      dataIndex: 'firstname',\n      key: 'firstname',\n      is_show: true,\n    },\n    {\n      title: t('lastname'),\n      dataIndex: 'lastname',\n      key: 'lastname',\n      is_show: true,\n    },\n    {\n      title: t('wallet'),\n      dataIndex: 'wallet',\n      key: 'wallet',\n      is_show: true,\n      render: (wallet) => numberToPrice(wallet?.price, defaultCurrency.symbol),\n    },\n    {\n      title: t('phone'),\n      dataIndex: 'phone',\n      key: 'phone',\n      is_show: true,\n    },\n    {\n      title: t('role'),\n      dataIndex: 'role',\n      key: 'role',\n      is_show: true,\n    },\n  ]);\n\n  function onChangePagination(pagination, filters, sorter) {\n    const { pageSize: perPage, current: page } = pagination;\n    const { field: column, order } = sorter;\n    const sort = formatSortType(order);\n    dispatch(\n      setMenuData({ activeMenu, data: { perPage, page, column, sort } })\n    );\n  }\n\n  useEffect(() => {\n    if (activeMenu.refetch) {\n      dispatch(fetchWallets());\n      dispatch(disableRefetch(activeMenu));\n    }\n  }, [activeMenu.refetch]);\n\n  useDidUpdate(() => {\n    const data = activeMenu.data;\n    const paramsData = {\n      sort: data?.sort,\n      column: data?.column,\n      perPage: data?.perPage,\n      page: data?.page,\n      search: data?.search,\n    };\n    dispatch(fetchWallets(paramsData));\n  }, [activeMenu.data]);\n\n  const handleFilter = (item, name) => {\n    const data = activeMenu.data;\n    dispatch(\n      setMenuData({\n        activeMenu,\n        data: { ...data, [name]: item },\n      })\n    );\n  };\n\n  return (\n    <Card\n      title={t('wallets')}\n      extra={\n        <Space wrap>\n          <SearchInput\n            placeholder={t('search')}\n            handleChange={(search) => handleFilter(search, 'search')}\n            defaultValue={activeMenu.data?.search}\n            resetSearch={!activeMenu.data?.search}\n          />\n          <FilterColumns columns={columns} setColumns={setColumns} />\n        </Space>\n      }\n    >\n      <Table\n        scroll={{ x: true }}\n        columns={columns?.filter((item) => item.is_show)}\n        dataSource={wallets}\n        loading={loading}\n        pagination={{\n          pageSize: params.perPage,\n          page: params.page,\n          total: meta.total,\n          defaultCurrent: params.page,\n        }}\n        rowKey={(record) => record.id}\n        onChange={onChangePagination}\n      />\n    </Card>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}