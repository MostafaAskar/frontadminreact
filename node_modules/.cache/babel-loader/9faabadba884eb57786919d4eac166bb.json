{"ast":null,"code":"import{Space,Upload,Button,Row}from'antd';import{DeleteOutlined,PlusOutlined}from'@ant-design/icons';import galleryService from'services/gallery';import{useTranslation}from'react-i18next';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ImageGallery=_ref=>{let{fileList,setFileList,type,form,multiple,loadingBtn,setLoadingBtn,imageList,setImageList,handleClose}=_ref;const{t}=useTranslation();const createImage=file=>{return{uid:file.title,name:file.title,status:'done',// done, uploading, error\nurl:file.title,created:true};};const handleSave=()=>{setLoadingBtn(true);const formData=new FormData();formData.append('type',type);imageList.forEach((item,index)=>{formData.append(`images[${index}]`,item===null||item===void 0?void 0:item.originFileObj);});galleryService.storeMany(formData).then(_ref2=>{var _data$title;let{data}=_ref2;const images=data===null||data===void 0?void 0:(_data$title=data.title)===null||_data$title===void 0?void 0:_data$title.map(item=>createImage({title:item}));setFileList(prev=>[...prev,...images]);form.setFieldsValue({images:[...fileList,...images]});handleClose();}).finally(()=>setLoadingBtn(false));};const handleChange=_ref3=>{let{fileList}=_ref3;setImageList(fileList);};const handleRemove=file=>{setImageList(prev=>prev.filter(item=>item.uid!==file.uid));};const uploadButton=/*#__PURE__*/_jsxs(\"button\",{style:{border:0,background:'none'},type:\"button\",children:[/*#__PURE__*/_jsx(PlusOutlined,{}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:\"Upload\"})]});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Upload,{listType:\"picture-card\",accept:\".png,.jpg,.jpeg,.webp,.avif,jfif\",onChange:handleChange,className:\"antdImgUpload\",showUploadList:false,onRemove:handleRemove,fileList:imageList// beforeUpload={(file) => {\n//   const isItAtLeast2MB = file.size / 1024 / 1024 < 2;\n//   if (!isItAtLeast2MB) {\n//     toast.error(t('max.2.mb'));\n//     return false;\n//   }\n//   return true;\n// }}\n,customRequest:()=>{},disabled:!multiple&&imageList.length>0,multiple:multiple,children:uploadButton}),(imageList===null||imageList===void 0?void 0:imageList.length)>0&&/*#__PURE__*/_jsx(Row,{gutter:12,className:\"mt-4 media-container\",children:imageList.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"span\",{children:(item===null||item===void 0?void 0:item.name)||''}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleRemove(item),children:/*#__PURE__*/_jsx(DeleteOutlined,{})})]}))}),/*#__PURE__*/_jsxs(Space,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleSave,loading:loadingBtn,disabled:!(imageList!==null&&imageList!==void 0&&imageList.length),children:t('save')}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:t('cancel')})]})]});};export default ImageGallery;","map":null,"metadata":{},"sourceType":"module"}