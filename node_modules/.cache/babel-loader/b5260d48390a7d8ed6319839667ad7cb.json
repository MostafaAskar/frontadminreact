{"ast":null,"code":"import React,{useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import{CloseOutlined,ReloadOutlined}from'@ant-design/icons';import{toast}from'react-toastify';import{useSelector}from'react-redux/es/hooks/useSelector';import{setActiveMenu,removeFromMenu,setRefetch}from'../redux/slices/menu';import{shallowEqual,useDispatch}from'react-redux';import{Tabs}from'antd';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{TabPane}=Tabs;const TabMenu=()=>{var _menu$activeMenu2;const{t}=useTranslation();const navigate=useNavigate();const{pathname}=useLocation();const dispatch=useDispatch();const menu=useSelector(state=>state.menu,shallowEqual);const selectTab=item=>{dispatch(setActiveMenu(item));navigate(`/${item.url}`);};const deleteTab=(event,item)=>{var _menu$activeMenu;event.preventDefault();event.stopPropagation();const index=menu.menuItems.indexOf(item);if(!index){toast.warning('The menu tab does not close');return;}if(((_menu$activeMenu=menu.activeMenu)===null||_menu$activeMenu===void 0?void 0:_menu$activeMenu.id)!==item.id){dispatch(removeFromMenu({...item,nextUrl:menu.activeMenu.url}));return;}const newPath=menu.menuItems.filter(el=>el.url!==item.url);const isHaveOtherTabs=newPath.length-1>index;let currentPath;if(isHaveOtherTabs){currentPath=newPath[index];}else{currentPath=newPath[newPath.length-1];}dispatch(removeFromMenu({...item,nextUrl:currentPath.url}));navigate(`/${currentPath.url}`);};const reloadPage=(event,item)=>{event.preventDefault();event.stopPropagation();dispatch(setRefetch(item));if(item.id!==menu.activeMenu.id){navigate(`/${item.url}`);}};useEffect(()=>{console.log('menu mounting...');if(!pathname.includes(menu.activeMenu.url)){window.location.replace(`/${menu.activeMenu.url}`);}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"navbar-default\",children:/*#__PURE__*/_jsx(Tabs,{onChange:(key,item)=>console.log('tab => ',key,item),activeKey:(_menu$activeMenu2=menu.activeMenu)===null||_menu$activeMenu2===void 0?void 0:_menu$activeMenu2.url,type:\"card\",children:menu.menuItems.map(item=>/*#__PURE__*/_jsx(TabPane,{tab:/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectTab(item),className:\"nav-link\",children:[/*#__PURE__*/_jsx(ReloadOutlined,{onClick:event=>reloadPage(event,item),className:\"reload-button\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"nav-text\",children:[\" \",t(item.name)]}),/*#__PURE__*/_jsx(CloseOutlined,{onClick:event=>deleteTab(event,item),className:\"close-button\"})]})},item.url))})});};export default TabMenu;","map":null,"metadata":{},"sourceType":"module"}